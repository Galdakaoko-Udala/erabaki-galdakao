"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3693],{93693:function(t,o,i){var n=L.DivIcon.extend({options:{circleText:"",className:"svg-icon",circleAnchor:null,circleColor:null,circleOpacity:null,circleFillColor:"rgb(255,255,255)",circleFillOpacity:null,circleRatio:.5,circleWeight:null,color:"rgb(0,102,255)",fillColor:null,fillOpacity:.4,fontColor:"rgb(0, 0, 0)",fontOpacity:"1",fontSize:null,fontWeight:"normal",iconAnchor:null,iconSize:L.point(32,48),opacity:1,popupAnchor:null,shadowAngle:45,shadowBlur:1,shadowColor:"rgb(0,0,10)",shadowEnable:!1,shadowLength:.75,shadowOpacity:.5,shadowTranslate:L.point(0,0),weight:2},initialize:function(t){var o=L.Util.setOptions(this,t);o.iconSize=L.point(o.iconSize),o.circleAnchor?o.circleAnchor=L.point(o.circleAnchor):o.circleAnchor=L.point(Number(o.iconSize.x)/2,Number(o.iconSize.x)/2),o.circleColor||(o.circleColor=o.color),o.circleFillOpacity||(o.circleFillOpacity=o.opacity),o.circleOpacity||(o.circleOpacity=o.opacity),o.circleWeight||(o.circleWeight=o.weight),o.fillColor||(o.fillColor=o.color),o.fontSize||(o.fontSize=Number(o.iconSize.x/4)),o.iconAnchor?o.iconAnchor=L.point(o.iconAnchor):o.iconAnchor=L.point(Number(o.iconSize.x)/2,Number(o.iconSize.y)),o.popupAnchor?o.popupAnchor=L.point(o.popupAnchor):o.popupAnchor=L.point(0,-.75*o.iconSize.y),o.html=this._createSVG()},_createCircle:function(){var t=Number(this.options.circleAnchor.x),o=Number(this.options.circleAnchor.y),i=this.options.iconSize.x/2*Number(this.options.circleRatio),n=this.options.circleFillColor,e=this.options.circleFillOpacity,c=this.options.circleColor,r=this.options.circleOpacity,a=this.options.circleWeight,s="".concat(this.options.className,"-circle");return'<circle class="'.concat(s,'" cx="').concat(t,'" cy="').concat(o,'" r="').concat(i,'" fill="').concat(n,'" fill-opacity="').concat(e,'" stroke="').concat(c,'" stroke-opacity=').concat(r,'" stroke-width="').concat(a,'"/>')},_createPathDescription:function(){var t=Number(this.options.iconSize.y),o=Number(this.options.iconSize.x),i=Number(this.options.weight),n=i/2;return"M ".concat(n," ").concat(o/2," ")+"L ".concat(o/2," ").concat(t-i," ")+"L ".concat(o-n," ").concat(o/2," ")+"A ".concat(o/4," ").concat(o/4," 0 0 0 ").concat(n," ").concat(o/2," Z")},_createPath:function(){var t=this._createPathDescription(),o=this.options.weight,i=this.options.color,n=this.options.opacity,e=this.options.fillColor,c=this.options.fillOpacity,r="".concat(this.options.className,"-path");return'<path class="'.concat(r,'" d="').concat(t,'" stroke-width="').concat(o,'" stroke="').concat(i,'" stroke-opacity="').concat(n,'" fill="').concat(e,'" fill-opacity="').concat(c,'"/>')},_createShadow:function(){var t=this._createPathDescription(),o=this.options.weight,i=this.options.shadowColor,n=this.options.shadowColor,e="".concat(this.options.className,"-shadow"),c="".concat(this.options.iconSize.x/2,"px ").concat(this.options.iconSize.y,"px"),r=this.options.shadowAngle,a=this.options.shadowLength,s=this.options.shadowOpacity,l=this.options.shadowBlur,p="".concat(this.options.shadowTranslate.x,"px, ").concat(this.options.shadowTranslate.y,"px");return"<filter id='iconShadowBlur'><feGaussianBlur in='SourceGraphic' stdDeviation='".concat(l,"'/></filter>")+'<path filter="url(#iconShadowBlur") class="'.concat(e,'" d="').concat(t,'" fill="').concat(n,'" stroke-width="').concat(o,'" stroke="').concat(i,'" style="opacity: ').concat(s,"; transform-origin: ").concat(c,"; transform: rotate(").concat(r,"deg) translate(").concat(p,") scale(1, ").concat(a,')" />')},_createSVG:function(){var t=this._createPath(),o=this._createCircle(),i=this._createText(),n="";this.options.shadowEnable&&(n=this._createShadow());var e="".concat(this.options.className,"-svg"),c=this.options.iconSize.x,r=this.options.iconSize.y;this.options.shadowEnable&&(c+=this.options.iconSize.y*this.options.shadowLength-this.options.iconSize.x/2,c=Math.max(c,32),r+=this.options.iconSize.y*this.options.shadowLength);var a="width:".concat(c,"px; height:").concat(r);return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="'.concat(e,'" style="').concat(a,'">').concat(n).concat(t).concat(o).concat(i,"</svg>")},_createText:function(){var t="".concat(this.options.fontSize,"px"),o=this.options.fontWeight,i=Number(this.options.fontSize),n=this.options.circleAnchor.x,e=this.options.circleAnchor.y+.35*i,c=this.options.circleText,r=this.options.fontColor.replace("rgb(","rgba(").replace(")",",".concat(this.options.fontOpacity,")"));return'<text text-anchor="middle" x="'.concat(n,'" y="').concat(e,'" style="font-size: ').concat(t,"; font-weight: ").concat(o,'" fill="').concat(r,'">').concat(c,"</text>")}});L.Marker.extend({options:{iconFactory:L.divIcon.svgIcon,iconOptions:{}},initialize:function(t,o){var i=L.Util.setOptions(this,o);i.icon=i.iconFactory(i.iconOptions),this._latlng=t},onAdd:function(t){L.Marker.prototype.onAdd.call(this,t)},setStyle:function(t){if(this._icon){var o=this._icon.children[0].children[0],i=this._icon.children[0].children[1];if(t.color&&!t.iconOptions){var n=t.color.replace("rgb","rgba").replace(")",",".concat(this.options.icon.options.opacity,")")),e=t.color.replace("rgb","rgba").replace(")",",".concat(this.options.icon.options.fillOpacity,")"));o.setAttribute("stroke",n),o.setAttribute("fill",e),i.setAttribute("stroke",n),this.options.icon.fillColor=e,this.options.icon.color=n,this.options.icon.circleColor=n}if(t.opacity&&this.setOpacity(t.opacity),t.iconOptions){t.color&&(t.iconOptions.color=t.color);var c=L.Util.setOptions(this.options.icon,t.iconOptions);this.setIcon(L.divIcon.svgIcon(c))}}}});L.DivIcon.SVGIcon=n,L.DivIcon.SVGIcon.DecidimIcon=L.DivIcon.SVGIcon.extend({options:{fillColor:"#ef604d",fillOpacity:1,opacity:0},_createPathDescription:function(){return"M14 1.17a11.685 11.685 0 0 0-11.685 11.685c0 11.25 10.23 20.61 10.665 21a1.5 1.5 0 0 0 2.025 0c0.435-.435 10.665-9.81 10.665-21A11.685 11.685 0 0 0 14 1.17Zm0 17.415A5.085 5.085 0 1 1 19.085 13.5 5.085 5.085 0 0 1 14 18.585Z"},_createCircle:function(){return""},_createSVG:function(){var t=this._createPath(),o=this._createCircle(),i=this._createText(),n="".concat(this.options.className,"-svg"),e="width:".concat(this.options.iconSize.x,"px; height:").concat(this.options.iconSize.y,"px;");return'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" class="'.concat(n,'" style="').concat(e,'">').concat(t).concat(o).concat(i,"</svg>")}});var e=i(41386),c=i(12620);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function a(t,o){for(var i=0;i<o.length;i++){var n=o[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(e=n.key,c=void 0,c=function(t,o){if("object"!==r(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,o||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}(e,"string"),"symbol"===r(c)?c:String(c)),n)}var e,c}function s(t,o){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},s(t,o)}function l(t){var o=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=p(t);if(o){var e=p(this).constructor;i=Reflect.construct(n,arguments,e)}else i=n.apply(this,arguments);return function(t,o){if(o&&("object"===r(o)||"function"===typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}var u=window.open,h=function(t){!function(t,o){if("function"!==typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),o&&s(t,o)}(c,t);var o,i,n,e=l(c);function c(){return function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,c),e.apply(this,arguments)}return o=c,(i=[{key:"start",value:function(){var t=this;if(this.map.removeControl(this.map.zoomControl),this.map.dragging.disable(),this.map.touchZoom.disable(),this.map.doubleClickZoom.disable(),this.map.scrollWheelZoom.disable(),this.map.boxZoom.disable(),this.map.keyboard.disable(),this.map.tap&&this.map.tap.disable(),this.config.zoom?this.map.setZoom(this.config.zoom):this.map.setZoom(15),this.config.latitude&&this.config.longitude){var o=[this.config.latitude,this.config.longitude];this.map.panTo(o),L.marker(o,{icon:this.createIcon(),keyboard:!0,title:this.config.title}).addTo(this.map)._icon.removeAttribute("tabindex")}this.config.link&&this.map._container.addEventListener("click",(function(o){o.preventDefault(),t.map._container.focus(),u(t.config.link,"_blank")}))}}])&&a(o.prototype,i),n&&a(o,n),Object.defineProperty(o,"prototype",{writable:!1}),c}(c.Z);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function y(t,o){for(var i=0;i<o.length;i++){var n=o[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(e=n.key,c=void 0,c=function(t,o){if("object"!==f(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,o||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}(e,"string"),"symbol"===f(c)?c:String(c)),n)}var e,c}function d(t,o){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},d(t,o)}function m(t){var o=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=b(t);if(o){var e=b(this).constructor;i=Reflect.construct(n,arguments,e)}else i=n.apply(this,arguments);return function(t,o){if(o&&("object"===f(o)||"function"===typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}var g=function(t){!function(t,o){if("function"!==typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),o&&d(t,o)}(c,t);var o,i,n,e=m(c);function c(){return function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,c),e.apply(this,arguments)}return o=c,(i=[{key:"start",value:function(){this.config.marker?this.addMarker(this.config.marker):this.map.fitWorld()}},{key:"addMarker",value:function(t){var o=this;if(null!==t.latitude&&null!==t.longitude){var i={lat:t.latitude,lng:t.longitude};this.triggerEvent("coordinates",[i]),this.marker=L.marker(i,{icon:this.createIcon(),keyboard:!0,title:t.title,draggable:!0}),this.marker.on("drag",(function(t){o.triggerEvent("coordinates",[t.target.getLatLng()])})),this.marker.addTo(this.map);var n=parseInt(this.config.zoom,10)||14;this.map.setView(i,n)}}},{key:"getMarker",value:function(){return this.marker}},{key:"removeMarker",value:function(){this.marker&&(this.marker.remove(),this.marker=null)}}])&&y(o.prototype,i),n&&y(o,n),Object.defineProperty(o,"prototype",{writable:!1}),c}(c.Z);window.Decidim.createMapController=function(t,o){return"static"===o.type?new h(t,o):"drag-marker"===o.type?new g(t,o):new e.Z(t,o)},$((function(){var t=$("[data-decidim-map]");if(t.length<1&&$("#map").length>0)throw new Error("DEPRECATION: Please update your maps customizations or include 'decidim/map/legacy.js' for legacy support!");t.each((function(t,o){var i=$(o),n=i.attr("id");n||(n="map-".concat(Math.random().toString(36).substr(2,9)),i.attr("id",n));var e=i.data("decidim-map"),c=window.Decidim.createMapController(n,e),r=c.load();i.data("map",r),i.data("map-controller",c),i.trigger("configure.decidim",[r,e]),c.start(),i.trigger("ready.decidim",[r,e])}))}))}}]);
//# sourceMappingURL=3693-add13ac0d0b430f12c3f.js.map