!function(){var e,t={475:function(e,t,n){var o={"./decidim/decidim_awesome/handcard.svg":54971,"./decidim/decidim_awesome/handcheck.svg":29182,"./decidim/decidim_awesome/pokecode-logo.png":24342};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=475},80712:function(e,t,n){"use strict";n(75197);var o=n(37353),r=n.n(o);$((function(){if(window.DecidimAwesome=window.DecidimAwesome||{},window.DecidimAwesome.auto_save_forms){var e=window.DecidimAwesome.current_questionnaire;if(e){var t="awesome_autosave:".concat(e),n="awesome_autosave:checkboxes:".concat(e),o=$("form.answer-questionnaire");if(o.length){var i=new(r())("#".concat(o.attr("id")),{name:t,ignores:['[name="utf8"]','[name="authenticity_token"]',"[disabled]",'[type="checkbox"]']}),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?5e3:arguments.length>2&&void 0!==arguments[2]?arguments[2]:700,r=$('<div class="awesome_autosave-notice'.concat(t?" error":"",'">').concat(e,"</div>")).appendTo(o);setTimeout((function(){r.fadeOut(500,(function(){r.remove()}))}),n)};if(window.localStorage){window.localStorage.getItem(t)&&a(window.DecidimAwesome.texts.autosaved_retrieved,!1,5e3),i.apply();try{var l=JSON.parse(window.localStorage.getItem(n));for(var c in l)$("#".concat(c)).prop("checked",l[c])}catch(s){console.log("No checkboxes found")}o.find("input, textarea, select").on("change",(function(){!function(){i.save();var e={};o.find('input[type="checkbox"]').each((function(t,n){e[n.id]=n.checked})),window.localStorage.setItem(n,JSON.stringify(e)),a(window.DecidimAwesome.texts.autosaved_success)}()}))}else a(window.DecidimAwesome.texts.autosaved_error,!0)}else window.DecidimAwesome.questionnaire_answered&&(window.localStorage.removeItem(t),window.localStorage.removeItem(n))}}}));n(85192);var i=n(6705),a=n(97624),l=n(65800),c=n(8866);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(r=o.key,i=void 0,i=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"),"symbol"===s(i)?i:String(i)),o)}var r,i}function p(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t,n){return t=g(t),function(e,t){if(t&&("object"===s(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){return!1}}()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}Quill.debug("error");var w=Quill.import("delta"),y=Quill.import("blots/break"),_=Quill.import("blots/embed"),k=Quill.import("blots/scroll"),x=Quill.import("parchment");Quill.register({"modules/history":c.Z},!0),Quill.import("ui/icons").linebreak="\u23ce";var O=function(e){function t(){return f(this,t),v(this,t,arguments)}return h(t,e),p(t,[{key:"length",value:function(){return 1}},{key:"value",value:function(){return"\n"}},{key:"insertInto",value:function(e,t){Reflect.apply(_.prototype.insertInto,this,[e,t])}}])}(y);Quill.register(O);var S=function(e){function t(){return f(this,t),v(this,t,arguments)}return h(t,e),p(t,[{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(this.parchmentOptimize(e,t),e.length>0&&this.emitter.emit("scroll-optimize",e,t))}},{key:"parchmentOptimize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Reflect.apply(x.Container.prototype.optimize,this,[n]);for(var o=u(this.observer.takeRecords());o.length>0;)t.push(o.pop());for(var r=function t(n,o){n&&n!==e&&n.domNode.parentNode&&(n.domNode.__blot&&null===n.domNode.__blot.mutations&&(n.domNode.__blot.mutations=[]),o&&t(n.parent))},i=function e(t){t.domNode.__blot&&(t instanceof x.Container&&t.children.forEach(e),t.optimize(n))},a=t,l=0;a.length>0;l+=1){if(l>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach((function(e){var t=x.find(e.target,!0);t&&(t.domNode===e.target&&("childList"===e.type?(r(x.find(e.previousSibling,!1)),e.addedNodes.forEach((function(e){var t=x.find(e,!1);r(t,!1),t instanceof x.Container&&t.children.forEach((function(e){r(e,!1)}))}))):"attributes"===e.type&&r(t.prev)),r(t))})),this.children.forEach(i),o=(a=u(this.observer.takeRecords())).slice();o.length>0;)t.push(o.pop())}}}])}(k);function T(e){var t=e.selection.getRange()[0],n=e.getLeaf(t.index)[0],o=e.getLeaf(t.index+1)[0],r=e.getText(t.index-1,1);if(null===o||n.parent!==o.parent)e.insertEmbed(t.index,"break",!0,"user"),e.insertEmbed(t.index,"break",!0,"user");else if("\n"===r){var i=(new w).retain(t.index).insert("\n");e.updateContents(i,Quill.sources.USER)}else e.insertEmbed(t.index,"break",!0,"user");e.setSelection(t.index+1,Quill.sources.SILENT)}Quill.register("blots/scroll",S,!0),x.register(S),Quill.register("modules/linebreak",(function(e){e.getModule("toolbar").addHandler("linebreak",(function(){T(e)})),e.emitter.on("editor-ready",(function(){var t=e.getLength();"\n\n"===e.getText(t-2,2)&&e.deleteText(e.getLength()-2,2)})),(0,i.Z)(e),(0,a.Z)(e),(0,l.Z)(e)}));var A=n(78153),j=n.n(A),C=n(97046),D=n.n(C),E=(n(75990),n(2299),n(96083),n(20637)),N=(n(7480),n(38193),n(13320),n(90037),n(87441));function I(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var P=window.DecidimAwesome||{},q=["bold","italic","link","underline","header","list","video","image","alt","break","width","style","code","blockquote","indent"];$((function(){(window.DecidimAwesome.allow_images_in_full_editor||window.DecidimAwesome.allow_images_in_small_editor||window.DecidimAwesome.use_markdown_editor)&&$(".editor-container").each((function(e,t){!function(e){if(e){var t=$(e).find(".ql-editor").html();$(e).html(t),$(e).siblings(".ql-toolbar").remove(),$(e).find("*[class*='ql-']").removeClass((function(e,t){return(t.match(/(^|\s)ql-\S+/g)||[]).join(" ")})),$(e).removeClass((function(e,t){return(t.match(/(^|\s)ql-\S+/g)||[]).join(" ")})),$(e).next().is("p.help-text")&&$(e).next().remove()}else console.error("editor [".concat(e,"] not exists"))}(t),window.DecidimAwesome.use_markdown_editor?function(e){var t=P.texts.drag_and_drop_image,n=$('meta[name="csrf-token"]').attr("content"),o=$(e).siblings('input[type="hidden"]'),r=$('<textarea name="faker-inscrybmde"/>'),i=$(e).closest("form"),a=new(D());r.val(a.convert(o.val())),r.insertBefore($(e)),$(e).hide();var l=new(j())({element:r[0],spellChecker:!1,renderingConfig:{codeSyntaxHighlighting:!0,hljs:E.Z}});r[0].InscrybMDE=l,P.allow_images_in_markdown_editor&&($(l.gui.statusbar).prepend('<span class="help-text" style="float:left;margin:0;text-align:left;">'.concat(t,"</span>")),window.inlineAttachment.editors.codemirror4.attach(l.codemirror,{uploadUrl:P.editor_uploader_path,uploadFieldName:"image",jsonFieldName:"url",extraHeaders:{"X-CSRF-Token":n}})),N.TU.setOptions({breaks:!0}),i.on("submit",(function(){o.val((0,N.TU)(l.value()))}))}(t):function(e){var t=$(e).data("toolbar"),n=$(e).data("disabled"),o=[["bold","italic","underline","linebreak"],[{list:"ordered"},{list:"bullet"}],["link","clean"],["code","blockquote"],[{indent:"-1"},{indent:"+1"}]],r=!1;"full"===t?(o=[[{header:[2,3,4,5,6,!1]}]].concat(I(o)),P.allow_images_in_full_editor?(o.push(["video","image"]),r=!0):o.push(["video"])):"basic"===t?P.allow_images_in_small_editor?(o.push(["video","image"]),r=!0):o.push(["video"]):P.allow_images_in_small_editor&&(o.push(["image"]),r=!0);var i={linebreak:{},toolbar:{container:o,handlers:{linebreak:T}}},a=$(e).siblings('input[type="hidden"]');e.innerHTML=a.val()||"";var l=$('meta[name="csrf-token"]').attr("content");r&&(i.imageResize={modules:["Resize","DisplaySize"]},i.imageUpload={url:P.editor_uploader_path,method:"POST",name:"image",withCredentials:!1,headers:{"X-CSRF-Token":l},callbackOK:function(e,t){$("div.ql-toolbar").last().removeClass("editor-loading"),t(e.url)},callbackKO:function(t){$("div.ql-toolbar").last().removeClass("editor-loading");var n=t&&t.body;try{n=JSON.parse(n).message}catch(r){console.error("Parsing error",r)}console.error("Image upload error: ".concat(n));var o=$('<p class="text-alert help-text">'.concat(n,"</p>"));$(e).after(o),setTimeout((function(){o.fadeOut(1e3,(function(){o.destroy()}))}),3e3)},checkBeforeSend:function(e,t){$("div.ql-toolbar").last().addClass("editor-loading"),t(e)}});var c=new Quill(e,{modules:i,formats:q,theme:"snow"});if(n&&c.disable(),c.on("text-change",(function(){var t=c.getText(),n=new CustomEvent("quill-position",{detail:c.getSelection()});if(e.dispatchEvent(n),"\n"===t||"\n\n"===t?a.val(""):a.val(c.root.innerHTML),"\n"!==t&&"\n\n"!==t||0!==c.root.querySelectorAll("iframe").length){var o="<p><br></p>",r=c.root.innerHTML.replace(new RegExp("^".concat(o,"|").concat(o,"$"),"g"),"");a.val(r)}else a.val("")})),c.emitter.emit("editor-ready"),r){var s=$(e).data("dragAndDropHelpText")||P.texts.drag_and_drop_image;$(e).after('<p class="help-text" style="margin-top:-1.5rem;">'.concat(s,"</p>"))}c.emitter.emit("editor-ready")}(t)}))})),n(475)},75197:function(){$((function(){window.DecidimAwesome=window.DecidimAwesome||{};var e=$('meta[name="csrf-token"]').attr("content"),t=$("textarea#proposal_body"),n=window.DecidimAwesome.texts.drag_and_drop_image;t.length&&window.DecidimAwesome.allow_images_in_proposals&&(t.after('<p class="help-text">'.concat(n,"</p>")),t.inlineattachment({uploadUrl:window.DecidimAwesome.editor_uploader_path,uploadFieldName:"image",jsonFieldName:"url",progressText:"[Uploading file...]",urlText:"{filename}",extraHeaders:{"X-CSRF-Token":e}}))}))},85192:function(){$((function(){if(0!==$(".voting-voting_cards").length&&0!==$("#VotingCardsModalHelp").length&&0!==$(".sign-out-link").length){var e=$("#VotingCardsModalHelp"),t=e.find(".current-choice .vote-card"),n=$("#voting_cards-skip_help"),o=function(){return JSON.parse(localStorage.getItem("hideTreeFlagsModalHelp")||"{}")},r=function(){return o()[n.val()]};n.on("change",(function(){var e,t;e=n.is(":checked"),(t=o())[n.val()]=e,localStorage.setItem("hideTreeFlagsModalHelp",JSON.stringify(t))})),e.find(".vote-action").on("click",(function(){e.data("action").click(),e.foundation("close")})),$(".button--vote-button .voting-voting_cards").on("click",".vote-action",(function(o){r()||e.is(":visible")?$(o.currentTarget).closest(".voting-voting_cards").addClass("loading"):(o.stopPropagation(),o.preventDefault(),n.prop("checked",r()),e.data("action",o.currentTarget),t[0].classList=o.currentTarget.classList,o.currentTarget.children.length>1?t.html("".concat(o.currentTarget.children[1].outerHTML,'<p class="vote-label">').concat(o.currentTarget.children[1].children[0].textContent,"</p>")):t[0].classList.contains("button")?(t[0].classList.remove("button"),t.html('<p class="vote-label">'.concat(o.currentTarget.title,"</p>"))):t.html('<p class="vote-label">'.concat(o.currentTarget.textContent,"</p>")),e.foundation("open"))}))}}))},54971:function(e,t,n){"use strict";e.exports=n.p+"media/images/handcard-51f3bf5fe54dca0da55c.svg"},29182:function(e,t,n){"use strict";e.exports=n.p+"media/images/handcheck-d62ce7dd4139913b5519.svg"},24342:function(e,t,n){"use strict";e.exports=n.p+"media/images/pokecode-logo-6f9c59a6f9f00c285e0e.png"},62562:function(){}},n={};function o(e){var r=n[e];if(void 0!==r)return r.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=t,e=[],o.O=function(t,n,r,i){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],i=e[u][2];for(var l=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(l=!1,i<a&&(a=i));if(l){e.splice(u--,1);var s=r();void 0!==s&&(t=s)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,r,i]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},o.p="/decidim-packs/",function(){var e={9068:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,a=n[0],l=n[1],c=n[2],s=0;if(a.some((function(t){return 0!==e[t]}))){for(r in l)o.o(l,r)&&(o.m[r]=l[r]);if(c)var u=c(o)}for(t&&t(n);s<a.length;s++)i=a[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},n=self.webpackChunkapp=self.webpackChunkapp||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var r=o.O(void 0,[2415,292,596,7353,8860],(function(){return o(80712)}));r=o.O(r)}();
//# sourceMappingURL=decidim_decidim_awesome-35bcd2e404173d899def.js.map