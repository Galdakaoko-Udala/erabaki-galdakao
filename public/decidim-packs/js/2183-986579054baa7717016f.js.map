{"version":3,"file":"js/2183-986579054baa7717016f.js","mappings":";+EAAAA,GAAE,WACAA,EAAEC,UAAUC,GAAG,QAAS,0CAA0C,SAACC,GACjEA,EAAMC,iBACN,IAAMC,EAAOF,EAAMG,cACbC,EAASP,EAAE,IAADQ,OAAKH,EAAKI,QAAQC,OAClCH,EAAOI,KAAK,uCACZX,EAAEY,KAAK,CACLC,KAAM,MACNC,IAAKT,EAAKI,QAAQM,QAClBC,QAAS,SAACL,GACR,IAAMM,EAAQjB,EAAEW,GAChBJ,EAAOI,KAAKM,GACZA,EAAMC,YACR,EACAC,MAAO,SAAUC,EAASC,EAAQC,GAChCf,EAAOI,KAAK,OAADH,OAAQa,EAAM,YAAAb,OAAWc,EAAK,QAC3C,GAEJ,GACF,mVClBAC,EAAA,kBAAAC,CAAA,MAAAC,EAAAD,EAAA,GAAAE,EAAAC,OAAAC,UAAAC,EAAAH,EAAAI,eAAAC,EAAAJ,OAAAK,gBAAA,SAAAP,EAAAD,EAAAE,GAAAD,EAAAD,GAAAE,EAAAO,KAAA,EAAAC,EAAA,mBAAAC,OAAAA,OAAA,GAAAC,EAAAF,EAAAG,UAAA,aAAAC,EAAAJ,EAAAK,eAAA,kBAAAC,EAAAN,EAAAO,aAAA,yBAAAC,EAAAjB,EAAAD,EAAAE,GAAA,OAAAC,OAAAK,eAAAP,EAAAD,EAAA,CAAAS,MAAAP,EAAAiB,YAAA,EAAAC,cAAA,EAAAC,UAAA,IAAApB,EAAAD,EAAA,KAAAkB,EAAA,aAAAjB,GAAAiB,EAAA,SAAAjB,EAAAD,EAAAE,GAAA,OAAAD,EAAAD,GAAAE,CAAA,WAAAoB,EAAArB,EAAAD,EAAAE,EAAAG,GAAA,IAAAK,EAAAV,GAAAA,EAAAI,qBAAAmB,EAAAvB,EAAAuB,EAAAX,EAAAT,OAAAqB,OAAAd,EAAAN,WAAAU,EAAA,IAAAW,EAAApB,GAAA,WAAAE,EAAAK,EAAA,WAAAH,MAAAiB,EAAAzB,EAAAC,EAAAY,KAAAF,CAAA,UAAAe,EAAA1B,EAAAD,EAAAE,GAAA,WAAAb,KAAA,SAAAuC,IAAA3B,EAAA4B,KAAA7B,EAAAE,GAAA,OAAAD,GAAA,OAAAZ,KAAA,QAAAuC,IAAA3B,EAAA,EAAAD,EAAAsB,KAAAA,EAAA,IAAAQ,EAAA,iBAAAC,EAAA,iBAAAC,EAAA,YAAAC,EAAA,YAAAC,EAAA,YAAAX,IAAA,UAAAY,IAAA,UAAAC,IAAA,KAAAC,EAAA,GAAAnB,EAAAmB,EAAAzB,GAAA,8BAAA0B,EAAAnC,OAAAoC,eAAAC,EAAAF,GAAAA,EAAAA,EAAAG,EAAA,MAAAD,GAAAA,IAAAtC,GAAAG,EAAAwB,KAAAW,EAAA5B,KAAAyB,EAAAG,GAAA,IAAAE,EAAAN,EAAAhC,UAAAmB,EAAAnB,UAAAD,OAAAqB,OAAAa,GAAA,SAAAM,EAAA1C,GAAA,0BAAA2C,SAAA,SAAA5C,GAAAkB,EAAAjB,EAAAD,GAAA,SAAAC,GAAA,YAAA4C,QAAA7C,EAAAC,EAAA,gBAAA6C,EAAA7C,EAAAD,GAAA,SAAA+C,EAAA7C,EAAAK,EAAAG,EAAAE,GAAA,IAAAE,EAAAa,EAAA1B,EAAAC,GAAAD,EAAAM,GAAA,aAAAO,EAAAzB,KAAA,KAAA2B,EAAAF,EAAAc,IAAAE,EAAAd,EAAAP,MAAA,OAAAqB,GAAA,UAAAkB,EAAAlB,IAAAzB,EAAAwB,KAAAC,EAAA,WAAA9B,EAAAiD,QAAAnB,EAAAoB,SAAAC,MAAA,SAAAlD,GAAA8C,EAAA,OAAA9C,EAAAS,EAAAE,EAAA,aAAAX,GAAA8C,EAAA,QAAA9C,EAAAS,EAAAE,EAAA,IAAAZ,EAAAiD,QAAAnB,GAAAqB,MAAA,SAAAlD,GAAAe,EAAAP,MAAAR,EAAAS,EAAAM,EAAA,aAAAf,GAAA,OAAA8C,EAAA,QAAA9C,EAAAS,EAAAE,EAAA,IAAAA,EAAAE,EAAAc,IAAA,KAAA1B,EAAAK,EAAA,gBAAAE,MAAA,SAAAR,EAAAI,GAAA,SAAA+C,IAAA,WAAApD,GAAA,SAAAA,EAAAE,GAAA6C,EAAA9C,EAAAI,EAAAL,EAAAE,EAAA,WAAAA,EAAAA,EAAAA,EAAAiD,KAAAC,EAAAA,GAAAA,GAAA,aAAA1B,EAAA1B,EAAAE,EAAAG,GAAA,IAAAE,EAAAuB,EAAA,gBAAApB,EAAAE,GAAA,GAAAL,IAAAyB,EAAA,UAAAqB,MAAA,mCAAA9C,IAAA0B,EAAA,cAAAvB,EAAA,MAAAE,EAAA,OAAAH,MAAAR,EAAAqD,MAAA,OAAAjD,EAAAkD,OAAA7C,EAAAL,EAAAuB,IAAAhB,IAAA,KAAAE,EAAAT,EAAAmD,SAAA,GAAA1C,EAAA,KAAAE,EAAAyC,EAAA3C,EAAAT,GAAA,GAAAW,EAAA,IAAAA,IAAAkB,EAAA,gBAAAlB,CAAA,cAAAX,EAAAkD,OAAAlD,EAAAqD,KAAArD,EAAAsD,MAAAtD,EAAAuB,SAAA,aAAAvB,EAAAkD,OAAA,IAAAhD,IAAAuB,EAAA,MAAAvB,EAAA0B,EAAA5B,EAAAuB,IAAAvB,EAAAuD,kBAAAvD,EAAAuB,IAAA,gBAAAvB,EAAAkD,QAAAlD,EAAAwD,OAAA,SAAAxD,EAAAuB,KAAArB,EAAAyB,EAAA,IAAAK,EAAAV,EAAA3B,EAAAE,EAAAG,GAAA,cAAAgC,EAAAhD,KAAA,IAAAkB,EAAAF,EAAAiD,KAAArB,EAAAF,EAAAM,EAAAT,MAAAM,EAAA,gBAAAzB,MAAA4B,EAAAT,IAAA0B,KAAAjD,EAAAiD,KAAA,WAAAjB,EAAAhD,OAAAkB,EAAA0B,EAAA5B,EAAAkD,OAAA,QAAAlD,EAAAuB,IAAAS,EAAAT,IAAA,YAAA6B,EAAAzD,EAAAE,GAAA,IAAAG,EAAAH,EAAAqD,OAAAhD,EAAAP,EAAAa,SAAAR,GAAA,GAAAE,IAAAN,EAAA,OAAAC,EAAAsD,SAAA,eAAAnD,GAAAL,EAAAa,SAAA,SAAAX,EAAAqD,OAAA,SAAArD,EAAA0B,IAAA3B,EAAAwD,EAAAzD,EAAAE,GAAA,UAAAA,EAAAqD,SAAA,WAAAlD,IAAAH,EAAAqD,OAAA,QAAArD,EAAA0B,IAAA,IAAAkC,UAAA,oCAAAzD,EAAA,aAAA6B,EAAA,IAAAxB,EAAAiB,EAAApB,EAAAP,EAAAa,SAAAX,EAAA0B,KAAA,aAAAlB,EAAArB,KAAA,OAAAa,EAAAqD,OAAA,QAAArD,EAAA0B,IAAAlB,EAAAkB,IAAA1B,EAAAsD,SAAA,KAAAtB,EAAA,IAAAtB,EAAAF,EAAAkB,IAAA,OAAAhB,EAAAA,EAAA0C,MAAApD,EAAAF,EAAA+D,YAAAnD,EAAAH,MAAAP,EAAA8D,KAAAhE,EAAAiE,QAAA,WAAA/D,EAAAqD,SAAArD,EAAAqD,OAAA,OAAArD,EAAA0B,IAAA3B,GAAAC,EAAAsD,SAAA,KAAAtB,GAAAtB,GAAAV,EAAAqD,OAAA,QAAArD,EAAA0B,IAAA,IAAAkC,UAAA,oCAAA5D,EAAAsD,SAAA,KAAAtB,EAAA,UAAAgC,EAAAjE,GAAA,IAAAD,EAAA,CAAAmE,OAAAlE,EAAA,SAAAA,IAAAD,EAAAoE,SAAAnE,EAAA,SAAAA,IAAAD,EAAAqE,WAAApE,EAAA,GAAAD,EAAAsE,SAAArE,EAAA,SAAAsE,WAAAC,KAAAxE,EAAA,UAAAyE,EAAAxE,GAAA,IAAAD,EAAAC,EAAAyE,YAAA,GAAA1E,EAAAX,KAAA,gBAAAW,EAAA4B,IAAA3B,EAAAyE,WAAA1E,CAAA,UAAAyB,EAAAxB,GAAA,KAAAsE,WAAA,EAAAJ,OAAA,SAAAlE,EAAA2C,QAAAsB,EAAA,WAAAS,OAAA,YAAAlC,EAAAzC,GAAA,GAAAA,GAAA,KAAAA,EAAA,KAAAE,EAAAF,EAAAY,GAAA,GAAAV,EAAA,OAAAA,EAAA2B,KAAA7B,GAAA,sBAAAA,EAAAgE,KAAA,OAAAhE,EAAA,IAAA4E,MAAA5E,EAAA6E,QAAA,KAAAtE,GAAA,EAAAG,EAAA,SAAAsD,IAAA,OAAAzD,EAAAP,EAAA6E,QAAA,GAAAxE,EAAAwB,KAAA7B,EAAAO,GAAA,OAAAyD,EAAAvD,MAAAT,EAAAO,GAAAyD,EAAAV,MAAA,EAAAU,EAAA,OAAAA,EAAAvD,MAAAR,EAAA+D,EAAAV,MAAA,EAAAU,CAAA,SAAAtD,EAAAsD,KAAAtD,CAAA,YAAAoD,UAAAd,EAAAhD,GAAA,2BAAAmC,EAAA/B,UAAAgC,EAAA7B,EAAAmC,EAAA,eAAAjC,MAAA2B,EAAAhB,cAAA,IAAAb,EAAA6B,EAAA,eAAA3B,MAAA0B,EAAAf,cAAA,IAAAe,EAAA2C,YAAA5D,EAAAkB,EAAApB,EAAA,qBAAAhB,EAAA+E,oBAAA,SAAA9E,GAAA,IAAAD,EAAA,mBAAAC,GAAAA,EAAA+E,YAAA,QAAAhF,IAAAA,IAAAmC,GAAA,uBAAAnC,EAAA8E,aAAA9E,EAAAiF,MAAA,EAAAjF,EAAAkF,KAAA,SAAAjF,GAAA,OAAAE,OAAAgF,eAAAhF,OAAAgF,eAAAlF,EAAAmC,IAAAnC,EAAAmF,UAAAhD,EAAAlB,EAAAjB,EAAAe,EAAA,sBAAAf,EAAAG,UAAAD,OAAAqB,OAAAkB,GAAAzC,CAAA,EAAAD,EAAAqF,MAAA,SAAApF,GAAA,OAAAiD,QAAAjD,EAAA,EAAA0C,EAAAG,EAAA1C,WAAAc,EAAA4B,EAAA1C,UAAAU,GAAA,0BAAAd,EAAA8C,cAAAA,EAAA9C,EAAAsF,MAAA,SAAArF,EAAAC,EAAAG,EAAAE,EAAAG,QAAA,IAAAA,IAAAA,EAAA6E,SAAA,IAAA3E,EAAA,IAAAkC,EAAAxB,EAAArB,EAAAC,EAAAG,EAAAE,GAAAG,GAAA,OAAAV,EAAA+E,oBAAA7E,GAAAU,EAAAA,EAAAoD,OAAAb,MAAA,SAAAlD,GAAA,OAAAA,EAAAqD,KAAArD,EAAAQ,MAAAG,EAAAoD,MAAA,KAAArB,EAAAD,GAAAxB,EAAAwB,EAAA1B,EAAA,aAAAE,EAAAwB,EAAA9B,GAAA,0BAAAM,EAAAwB,EAAA,qDAAA1C,EAAAwF,KAAA,SAAAvF,GAAA,IAAAD,EAAAG,OAAAF,GAAAC,EAAA,WAAAG,KAAAL,EAAAE,EAAAsE,KAAAnE,GAAA,OAAAH,EAAAuF,UAAA,SAAAzB,IAAA,KAAA9D,EAAA2E,QAAA,KAAA5E,EAAAC,EAAAwF,MAAA,GAAAzF,KAAAD,EAAA,OAAAgE,EAAAvD,MAAAR,EAAA+D,EAAAV,MAAA,EAAAU,CAAA,QAAAA,EAAAV,MAAA,EAAAU,CAAA,GAAAhE,EAAAyC,OAAAA,EAAAhB,EAAArB,UAAA,CAAA4E,YAAAvD,EAAAkD,MAAA,SAAA3E,GAAA,QAAA2F,KAAA,OAAA3B,KAAA,OAAAN,KAAA,KAAAC,MAAA1D,EAAA,KAAAqD,MAAA,OAAAE,SAAA,UAAAD,OAAA,YAAA3B,IAAA3B,EAAA,KAAAsE,WAAA3B,QAAA6B,IAAAzE,EAAA,QAAAE,KAAA,WAAAA,EAAA0F,OAAA,IAAAvF,EAAAwB,KAAA,KAAA3B,KAAA0E,OAAA1E,EAAA2F,MAAA,WAAA3F,GAAAD,EAAA,EAAA6F,KAAA,gBAAAxC,MAAA,MAAArD,EAAA,KAAAsE,WAAA,GAAAG,WAAA,aAAAzE,EAAAZ,KAAA,MAAAY,EAAA2B,IAAA,YAAAmE,IAAA,EAAAnC,kBAAA,SAAA5D,GAAA,QAAAsD,KAAA,MAAAtD,EAAA,IAAAE,EAAA,cAAA8F,EAAA3F,EAAAE,GAAA,OAAAK,EAAAvB,KAAA,QAAAuB,EAAAgB,IAAA5B,EAAAE,EAAA8D,KAAA3D,EAAAE,IAAAL,EAAAqD,OAAA,OAAArD,EAAA0B,IAAA3B,KAAAM,CAAA,SAAAA,EAAA,KAAAgE,WAAAM,OAAA,EAAAtE,GAAA,IAAAA,EAAA,KAAAG,EAAA,KAAA6D,WAAAhE,GAAAK,EAAAF,EAAAgE,WAAA,YAAAhE,EAAAyD,OAAA,OAAA6B,EAAA,UAAAtF,EAAAyD,QAAA,KAAAwB,KAAA,KAAA7E,EAAAT,EAAAwB,KAAAnB,EAAA,YAAAM,EAAAX,EAAAwB,KAAAnB,EAAA,iBAAAI,GAAAE,EAAA,SAAA2E,KAAAjF,EAAA0D,SAAA,OAAA4B,EAAAtF,EAAA0D,UAAA,WAAAuB,KAAAjF,EAAA2D,WAAA,OAAA2B,EAAAtF,EAAA2D,WAAA,SAAAvD,GAAA,QAAA6E,KAAAjF,EAAA0D,SAAA,OAAA4B,EAAAtF,EAAA0D,UAAA,YAAApD,EAAA,UAAAqC,MAAA,kDAAAsC,KAAAjF,EAAA2D,WAAA,OAAA2B,EAAAtF,EAAA2D,WAAA,KAAAR,OAAA,SAAA5D,EAAAD,GAAA,QAAAE,EAAA,KAAAqE,WAAAM,OAAA,EAAA3E,GAAA,IAAAA,EAAA,KAAAK,EAAA,KAAAgE,WAAArE,GAAA,GAAAK,EAAA4D,QAAA,KAAAwB,MAAAtF,EAAAwB,KAAAtB,EAAA,oBAAAoF,KAAApF,EAAA8D,WAAA,KAAA3D,EAAAH,EAAA,OAAAG,IAAA,UAAAT,GAAA,aAAAA,IAAAS,EAAAyD,QAAAnE,GAAAA,GAAAU,EAAA2D,aAAA3D,EAAA,UAAAE,EAAAF,EAAAA,EAAAgE,WAAA,UAAA9D,EAAAvB,KAAAY,EAAAW,EAAAgB,IAAA5B,EAAAU,GAAA,KAAA6C,OAAA,YAAAS,KAAAtD,EAAA2D,WAAAnC,GAAA,KAAA+D,SAAArF,EAAA,EAAAqF,SAAA,SAAAhG,EAAAD,GAAA,aAAAC,EAAAZ,KAAA,MAAAY,EAAA2B,IAAA,gBAAA3B,EAAAZ,MAAA,aAAAY,EAAAZ,KAAA,KAAA2E,KAAA/D,EAAA2B,IAAA,WAAA3B,EAAAZ,MAAA,KAAA0G,KAAA,KAAAnE,IAAA3B,EAAA2B,IAAA,KAAA2B,OAAA,cAAAS,KAAA,kBAAA/D,EAAAZ,MAAAW,IAAA,KAAAgE,KAAAhE,GAAAkC,CAAA,EAAAgE,OAAA,SAAAjG,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAmE,aAAApE,EAAA,YAAAgG,SAAA/F,EAAAwE,WAAAxE,EAAAoE,UAAAG,EAAAvE,GAAAgC,CAAA,kBAAAjC,GAAA,QAAAD,EAAA,KAAAuE,WAAAM,OAAA,EAAA7E,GAAA,IAAAA,EAAA,KAAAE,EAAA,KAAAqE,WAAAvE,GAAA,GAAAE,EAAAiE,SAAAlE,EAAA,KAAAI,EAAAH,EAAAwE,WAAA,aAAArE,EAAAhB,KAAA,KAAAkB,EAAAF,EAAAuB,IAAA6C,EAAAvE,EAAA,QAAAK,CAAA,YAAA8C,MAAA,0BAAA8C,cAAA,SAAAnG,EAAAE,EAAAG,GAAA,YAAAmD,SAAA,CAAA3C,SAAA4B,EAAAzC,GAAA+D,WAAA7D,EAAA+D,QAAA5D,GAAA,cAAAkD,SAAA,KAAA3B,IAAA3B,GAAAiC,CAAA,GAAAlC,CAAA,UAAAoG,EAAAC,EAAApD,EAAAqD,EAAAC,EAAAC,EAAAC,EAAA7E,GAAA,QAAA8E,EAAAL,EAAAI,GAAA7E,GAAAnB,EAAAiG,EAAAjG,KAAA,OAAAd,GAAA,YAAA2G,EAAA3G,EAAA,CAAA+G,EAAApD,KAAAL,EAAAxC,GAAA8E,QAAAtC,QAAAxC,GAAA0C,KAAAoD,EAAAC,EAAA,UAAAG,EAAAC,EAAAC,GAAA,QAAAnG,EAAA,EAAAA,EAAAmG,EAAAhC,OAAAnE,IAAA,KAAAoG,EAAAD,EAAAnG,GAAAoG,EAAA3F,WAAA2F,EAAA3F,aAAA,EAAA2F,EAAA1F,cAAA,YAAA0F,IAAAA,EAAAzF,UAAA,GAAAlB,OAAAK,eAAAoG,GAAAhF,EAAAkF,EAAAL,IAAAA,WAAA,SAAAM,EAAAC,GAAA,cAAAhE,EAAA+D,IAAA,OAAAA,EAAA,OAAAA,EAAA,IAAAE,EAAAF,EAAApG,OAAAuG,aAAA,QAAAC,IAAAF,EAAA,KAAAG,EAAAH,EAAApF,KAAAkF,EAAAC,GAAA,yBAAAhE,EAAAoE,GAAA,OAAAA,EAAA,UAAAtD,UAAA,kEAAAkD,EAAAK,OAAAC,QAAAP,EAAA,CAAAQ,CAAA3F,EAAA,qBAAAoB,EAAAyD,GAAAA,EAAAY,OAAAZ,IAAAK,EAAA,KAAAlF,EAAA6E,CAAA,CAC0D,IAErCe,EAAY,WAC/B,SAAAA,EAAYC,GAAmB,IAADC,EAAA,KAAdC,EAAOC,UAAA/C,OAAA,QAAAsC,IAAAS,UAAA,GAAAA,UAAA,GAAG,CAAC,GAJ7B,SAAAC,EAAAC,GAAA,KAAAD,aAAAC,GAAA,UAAAhE,UAAA,qCAI8BiE,CAAA,KAAAP,GAC1BQ,KAAKC,QAAUR,EACfO,KAAKE,mBAAqB,KAC1BF,KAAKG,yBAA2B,KAChCH,KAAKI,kBAAoB,KACzBJ,KAAKK,UAAY,KACjB,IAVJC,EA4EWC,EAlEDC,EAAgBb,EAAQc,WAAa,EAC3CT,KAAKL,QAAUxH,OAAOuI,OAAO,CAE3BzD,KAAM,KAEN0D,YAAa,GAMbC,KAAM,KAENC,cAAc,EAEdC,iBAAiB,iBAAD9J,OAAmBwJ,EAAa,yBAEhDO,SAAU,KAEVN,UAAWD,EAGXQ,WAAY,GASZC,cAAe,KAafC,WAAY,iBAAM,EAAE,EAIpBC,WAAY,KAGZC,MAAO,IAGPC,aAAc,MACb1B,GAEHK,KAAKsB,aAAe,IAAIC,IAAJ,CAAmB,CACrCC,SAAU,kBAAM9B,EAAKO,OAAO,EAC5BwB,YAAY,EACZC,YAAa/B,EAAQgB,YAErBgB,SAAU,IACVlB,UAAWT,KAAKL,QAAQc,UACxBmB,KAAM,CACJpE,KAAMwC,KAAKL,QAAQsB,cACnBY,KA5ERvB,EA4EWvI,IAAAmF,MAAE,SAAA4E,EAAOC,GAAK,IAAAC,EAAA,OAAAjK,IAAAuB,MAAA,SAAA2I,GAAA,cAAAA,EAAAtE,KAAAsE,EAAAjG,MAAA,OAKd,OAJKgG,EAAe,WACnB,OAAO,IAAIzE,SAAQ,SAACtC,GAClByE,EAAKC,QAAQuB,WAAWa,EAAO9G,EACjC,GACF,EAACgH,EAAAtE,KAAA,EAAAsE,EAAAjG,KAAA,EAGcgG,IAAe,KAAD,SAAAC,EAAApG,OAAA,SAAAoG,EAAAvG,MAAA,cAAAuG,EAAAtE,KAAA,EAAAsE,EAAAC,GAAAD,EAAA,SAAAA,EAAApG,OAAA,SAAAoG,EAAAC,IAAA,yBAAAD,EAAAnE,OAAA,GAAAgE,EAAA,iBAR5BvB,EA5EX,eAAA4B,EAAA,KAAAC,EAAAxC,UAAA,WAAArC,SAAA,SAAAtC,EAAAqD,GAAA,IAAAD,EAAAiC,EAAA+B,MAAAF,EAAAC,GAAA,SAAA7D,EAAA9F,GAAA2F,EAAAC,EAAApD,EAAAqD,EAAAC,EAAAC,EAAA,OAAA/F,EAAA,UAAA+F,EAAA8D,GAAAlE,EAAAC,EAAApD,EAAAqD,EAAAC,EAAAC,EAAA,QAAA8D,EAAA,CAAA/D,OAAAY,EAAA,KAwFS,SAAAoD,GAAA,OAAAhC,EAAA8B,MAAA,KAAAzC,UAAA,GACD4C,OAAQ,SAACC,GACP,IAAMC,EAAUD,EAAKD,QACnB,SAACG,EAAMC,EAAKC,GACV,OAAOA,EAAIC,WAAU,SAACC,GAAG,OAAKA,EAAItK,QAAUkK,EAAKlK,KAAK,MAAMmK,CAC9D,IAGF,OAAIlD,EAAKC,QAAQwB,WACRzB,EAAKC,QAAQwB,WAAWuB,GAG1BA,CACT,GAEFM,YAAa,CACXhC,WAAYhB,KAAKL,QAAQqB,YAE3BiC,WAAY,CACVhD,QAAS,SAAC0C,EAAMf,GACTlC,EAAKC,QAAQ0B,cAIlB3B,EAAKC,QAAQ0B,aAAasB,EAAMf,EAAKnJ,MACvC,GAEFyK,OAAQ,CACNnE,MAAO,CACLoE,KAAM,WACJzD,EAAKW,UAAU+C,MAAMC,QAAU,MACjC,MAKNrD,KAAKsD,UAAYtD,KAAKC,QAAQsD,QAAQ,yBACtCvD,KAAKC,QAAQuD,GAAKxD,KAAKsB,aAIvB,IAAMmC,EAAkB,SAAC9M,GACvBA,EAAM8M,iBACR,EAMA,OALAzD,KAAKC,QAAQyD,iBAAiB,QAASD,GACvCzD,KAAKC,QAAQyD,iBAAiB,OAAQD,GAEtCzD,KAAK2D,kBAEG3D,KAAKL,QAAQiB,MACrB,IAAK,SACHZ,KAAK4D,mBAAmB5D,KAAKL,QAAQ1C,MACrC,MACF,IAAK,QACH+C,KAAK6D,kBAAkB7D,KAAKL,QAAQ1C,MAIxC,CAlJF,IAAA6C,EAAAgE,EAAAC,EAgTG,OAhTHjE,EAkJGN,GAlJHsE,EAkJG,EAAArF,IAAA,WAAAhG,MAED,SAASA,GACPuH,KAAKsB,aAAavC,MAAMtG,MAAQA,CAClC,GAAC,CAAAgG,IAAA,cAAAhG,MAED,SAAY9B,GACV,OAAQqJ,KAAKL,QAAQiB,MACrB,IAAK,SACHZ,KAAKgE,SAASrN,EAAMsN,OAAOC,UAAUzL,MAAM9B,EAAMsN,OAAOC,UAAUzF,MAClE,MACF,IAAK,SACHuB,KAAKmE,mBAAmBxN,GACxB,MACF,IAAK,QACHqJ,KAAKoE,kBAAkBzN,GAI3B,GAAC,CAAA8H,IAAA,oBAAAhG,MAED,SAAkB9B,GAEX,cADGA,EAAMU,MAEZ2I,KAAKqE,mBAAmB1N,EAAMsN,OAAOC,UAIzC,GAAC,CAAAzF,IAAA,qBAAAhG,MAED,SAAmB9B,GACjB,OAAQA,EAAMU,MACd,IAAK,YACH2I,KAAKsE,oBAAoB3N,EAAMsN,OAAOC,WACtC,MACF,IAAK,QACCvN,EAAMiI,SAAWoB,KAAKG,0BACxBH,KAAKuE,wBAEP,MACF,IAAK,QACkC,KAAjCvE,KAAKI,kBAAkB3H,OAAgB9B,EAAMiI,SAAWoB,KAAKC,UAAY,CAAC,SAAU,YAAa,UAAUuE,SAAS7N,EAAM8H,MAAS,cAAegG,KAAK9N,EAAM8H,MAC/JuB,KAAKuE,wBACIvE,KAAKL,QAAQkB,eACe,KAAjCb,KAAKI,kBAAkB3H,OAAgBuH,KAAKC,QAAQxH,MAAMoE,OAASmD,KAAKL,QAAQc,UAClFT,KAAKK,UAAU+C,MAAMC,QAAU,QAE/BrD,KAAKK,UAAU+C,MAAMC,QAAU,QAMvC,GAAC,CAAA5E,IAAA,oBAAAhG,MAED,SAAkBA,GAChB,IAAMiM,EAAcjO,SAASkO,cAAc,SAO3C,OANAD,EAAYzH,KAAO+C,KAAKL,QAAQ1C,KAChCyH,EAAYrN,KAAO,SACfoB,IACFiM,EAAYjM,MAAQA,GAEtBuH,KAAKsD,UAAUsB,QAAQF,GAChBA,CACT,GAAC,CAAAjG,IAAA,wBAAAhG,MAED,WACEuH,KAAKI,kBAAkB3H,MAAQ,GAC/BuH,KAAKC,QAAQU,YAAcX,KAAKL,QAAQgB,YACxCX,KAAKG,yBAAyBiD,MAAMC,QAAU,OAC9CrD,KAAKE,mBAAmBkD,MAAMC,QAAU,MAC1C,GAAC,CAAA5E,IAAA,sBAAAhG,MAED,SAAoByL,GAClBlE,KAAKI,kBAAkB3H,MAAQyL,EAAUzL,MAAMA,MAC/CuH,KAAKC,QAAQU,YAAc,GAC3BX,KAAKE,mBAAmB2E,UAAYX,EAAUzL,MAAMyL,EAAUzF,KAC9DuB,KAAKE,mBAAmBkD,MAAMC,QAAU,QACxCrD,KAAKG,yBAAyBiD,MAAMC,QAAU,QAC9CrD,KAAKgE,SAAS,GAChB,GAAC,CAAAvF,IAAA,qBAAAhG,MAED,SAAmByL,GAAY,IAADY,EAAA,KAC5B9E,KAAKgE,SAAS,IACd,IAAMe,EAAStO,SAASkO,cAAc,QACtCI,EAAOC,UAAUC,IAAI,QAAS,UAAW,8BAA+B,SACxEF,EAAOF,UAAYX,EAAUzL,MAAMyL,EAAUzF,KAC7C,IAAMyG,EAAiBzO,SAASkO,cAAc,QAC9CO,EAAeF,UAAUC,IAAI,yBAC7BC,EAAeL,UAAY,UAC3BK,EAAeC,aAAa,cAAejB,EAAUzL,MAAMA,OAC3DyM,EAAexB,iBAAiB,SAAS,SAAC0B,GACxC,IAAMV,EAAcI,EAAKxB,UAAU+B,cAAc,+BAADrO,OAAgCkN,EAAUzL,MAAMA,MAAK,OACjGiM,IACFA,EAAYY,SACZF,EAAIxG,OAAO2G,cAAcD,SAE7B,IACAP,EAAOS,YAAYN,GAEnB,IAAMO,EAAqBzF,KAAKsD,UAAU+B,cAAc,gBAClDK,EAAiBD,EAAmBJ,cAAc,wBACxDI,EAAmBE,aAAaZ,EAAQW,GACxC1F,KAAK4F,kBAAkB1B,EAAUzL,MAAMA,MACzC,GAAC,CAAAgG,IAAA,qBAAAhG,MAED,WAAsB,IAADoN,EAAA,KACnB7F,KAAKE,mBAAqBzJ,SAASkO,cAAc,QACjD3E,KAAKE,mBAAmB8E,UAAUC,IAAI,8BAA+B,UACrEjF,KAAKE,mBAAmBkD,MAAMC,QAAU,OACxCrD,KAAKE,mBAAmBwD,iBAAiB,SAAS,kBAAMmC,EAAK5F,QAAQ6F,OAAO,IAC5E9F,KAAKI,kBAAoBJ,KAAK4F,oBAE9B5F,KAAKG,yBAA2B1J,SAASkO,cAAc,QACvD3E,KAAKG,yBAAyB4F,UAAY,yBAC1C/F,KAAKG,yBAAyB0E,UAAY,UAC1C7E,KAAKG,yBAAyBiD,MAAMC,QAAU,OAC9CrD,KAAKG,yBAAyBuD,iBAAiB,QAAS1D,MAExDA,KAAKC,QAAQyD,iBAAiB,YAAa1D,MAC3CA,KAAKC,QAAQyD,iBAAiB,QAAS1D,MAEvCA,KAAKsD,UAAUqC,aAAa3F,KAAKG,yBAA0BH,KAAKC,SAChED,KAAKsD,UAAUqC,aAAa3F,KAAKE,mBAAoBF,KAAKC,SACtDD,KAAKL,QAAQoB,UACff,KAAKsE,oBAAoBtE,KAAKL,QAAQoB,SAE1C,GAAC,CAAAtC,IAAA,oBAAAhG,MAED,WAAqB,IAADuN,EAAA,KACZP,EAAqBhP,SAASkO,cAAc,OAClDc,EAAmBT,UAAUC,IAAI,eAEjC,IAAMS,EAAiBjP,SAASkO,cAAc,QAC9Ce,EAAeV,UAAUC,IAAI,mBAE7BQ,EAAmBD,YAAYE,GAC/B1F,KAAKsD,UAAUsB,QAAQa,GACvBC,EAAeF,YAAYxF,KAAKC,SAEhCD,KAAKC,QAAQyD,iBAAiB,YAAa1D,MAC3CyF,EAAmB/B,iBAAiB,SAAS,WAC3CsC,EAAK/F,QAAQ6F,OACf,IAEI9F,KAAKL,QAAQoB,UACff,KAAKL,QAAQoB,SAASnG,SAAQ,SAACsJ,GAC7B8B,EAAK3B,mBAAmBH,EAC1B,GAEJ,GAAC,CAAAzF,IAAA,kBAAAhG,MAED,WACEuH,KAAKK,UAAY5J,SAASkO,cAAc,OACxC3E,KAAKK,UAAU2E,UAAUC,IAAI,iBAC7BjF,KAAKK,UAAU+C,MAAMC,QAAU,OAC/BrD,KAAKK,UAAUwE,UAAY7E,KAAKL,QAAQmB,iBACxCd,KAAKsD,UAAUkC,YAAYxF,KAAKK,UAClC,MAhTF1B,EAAAmB,EAAA1H,UAAA0L,GAAAC,GAAApF,EAAAmB,EAAAiE,GAAA5L,OAAAK,eAAAsH,EAAA,aAAAzG,UAAA,IAgTGmG,CAAA,CA7S8B,wxBCJZyG,EAAU,WAC7B,SAAAA,EAAYC,GAAU,IAADxG,EAAA,kGAAAK,CAAA,KAAAkG,GACnBjG,KAAKmG,MAAQnG,KAAKoG,wBAClBpG,KAAKmG,MAAME,SAAS7P,EAAE,SACtBwJ,KAAKsG,QAAU,KAEfJ,EAAQK,MAAK,SAACC,EAAQC,GACpB/G,EAAKgH,SAASD,EAChB,GACF,WAsQC,SAtQAR,IAAA,EAAAxH,IAAA,WAAAhG,MAED,SAASgO,GAAS,IAAD3B,EAAA,KACX6B,EAAUnQ,EAAEiQ,GAEhBzG,KAAK4G,kBAAkBD,EAAS,MAEhC,IACI1J,EAAO+C,KAAKsG,QAAQrJ,KACpBxC,EAASuF,KAAKsG,QAAQ7L,OAEtBuF,KAAKsG,QAAQO,WACf5J,GAAQ,MAGVzG,EAAE,MAAOiE,GAAQ8L,MAAK,SAACO,EAASC,GAC9B,IAAItO,EAAQjC,EAAE,IAAKuQ,GAAKnF,KAAK,gBAC7BpL,EAAEuQ,GAAKnC,QAAQpO,EAAE,gBAADQ,OAVN,SAU4B,oBAAAA,OAAmBiG,EAAI,aAAAjG,OAAYyB,EAAK,QAChF,IAEAkO,EAAQjQ,GAAG,QAAS,KAAK,SAACC,GAExB,GADAA,EAAMC,kBACF+P,EAAQK,SAAS,YAArB,CAGA,IAAMC,EAAgBN,EAAQK,SAAS,mBAEnCxQ,EAAEsO,EAAKoC,iBAAiBvQ,IAAQqQ,SAAS,mBAAqBC,EAChEnC,EAAKqC,YAAYR,EAAS7B,EAAKoC,iBAAiBvQ,IACG,MAAzCmO,EAAKoC,iBAAiBvQ,GAAOyQ,QACvCtC,EAAKuC,aAAaV,EAAS7B,EAAKoC,iBAAiBvQ,GAAO2Q,YAExDxC,EAAKuC,aAAaV,EAAS7B,EAAKoC,iBAAiBvQ,GARnD,CAUF,IAEAgQ,EAAQjQ,GAAG,QAAS,SAAS,SAACC,GAC5BmO,EAAKuC,aAAaV,EAAS7B,EAAKoC,iBAAiBvQ,GACnD,IAEIqJ,KAAKsG,QAAQiB,UACfvH,KAAKwH,OAET,GAAC,CAAA/I,IAAA,UAAAhG,MAED,SAAQgO,EAAQhO,GACdjC,EAAEiQ,GAAQgB,YAAY,YAAahP,GACnCjC,EAAE,QAASiQ,GAAQiB,KAAK,YAAajP,EACvC,GAAC,CAAAgG,IAAA,QAAAhG,MAED,SAAMgO,GACJjQ,EAAE,iBAAkBiQ,GAAQtP,KAAK,GACnC,GAAC,CAAAsH,IAAA,OAAAhG,MAED,SAAKgO,GACH,OAAOjQ,EAAE,wCAAyCiQ,GAAQkB,KAAI,SAACnB,EAAQO,GACrE,IAAIa,EAAQpR,EAAE,IAAKuQ,GACnB,MAAO,CACLtO,MAAOjC,EAAE,QAASuQ,GAAKhE,MACvB8E,KAAMD,EAAMC,OACZvQ,IAAKsQ,EAAMF,KAAK,QAEpB,IAAGI,KACL,GAAC,CAAArJ,IAAA,OAAAhG,MAED,SAAKgO,EAAQsB,GAAY,IAADlC,EAAA,KACtB7F,KAAK4G,kBAAkBpQ,EAAEiQ,GAAS,MAClCjQ,EAAE+P,KAAKwB,GAAW,SAACvB,EAAQ5E,GACzBiE,EAAKmC,QAAQpG,EAAM,CAAEqG,aAAa,EAAOC,QAAQ,GACnD,IACIlI,KAAKsG,QAAQiB,UACfvH,KAAKwH,OAET,GAAC,CAAA/I,IAAA,wBAAAhG,MAED,WAME,OAAOjC,EAAE,6OAADQ,OAFW,4FAGyC,uLAG9D,GAAC,CAAAyH,IAAA,cAAAhG,MAED,SAAYkO,EAAS/H,GACnBoB,KAAK4G,kBAAkBD,EAAS/H,GAChCoB,KAAKmI,MAAM3R,EAAE,IAAKoI,GAAQ8I,KAAK,QACjC,GAAC,CAAAjJ,IAAA,oBAAAhG,MAED,SAAkBkO,EAAS/H,GACzB,IAAIwJ,GAAU,EACVxJ,IAAWpI,EAAEoI,GAAQoI,SAAS,mBAChCoB,EAAU5R,EAAEoI,IAGdoB,KAAKsG,QAAU,CACbG,OAAQE,EACR1J,KAAM0J,EAAQ/E,KAAK,eACnBnH,OAAQkM,EAAQ0B,KAAK,kBACrBxB,SAAUF,EAAQK,SAAS,mBAC3BO,SAAUZ,EAAQK,SAAS,oBAAsBL,EAAQK,SAAS,mBAClEpI,OAAQwJ,EAEZ,GAAC,CAAA3J,IAAA,QAAAhG,MAED,SAAMnB,GAAM,IAAD0O,EAAA,KACTxP,EAAEY,KAAKE,GAAKgE,MAAK,SAACgN,GAChB,IAAIC,EAAe/R,EAAE,6BAA8BwP,EAAKG,OACxDoC,EAAapR,KAAKmR,GAClBtC,EAAKwC,aAAaD,GAClBvC,EAAKyC,kBAAkBF,GACvBvC,EAAKG,MAAMzO,WAAW,OACxB,GACF,GAAC,CAAA+G,IAAA,eAAAhG,MAED,SAAaiQ,GAAU,IAADC,EAAA,KACpBnS,EAAE,IAAKkS,GAASnC,MAAK,SAACC,EAAQ3P,GAC5B,IAAI+Q,EAAQpR,EAAEK,GACd+Q,EAAMgB,OAAM,SAACjS,GAEX,GADAA,EAAMC,kBACFgR,EAAMhG,KAAK,UAAoC,KAAxBgG,EAAMhG,KAAK,SAAtC,CAIA,IAAIiH,EAAYjB,EAAMF,KAAK,QACvBmB,IACyC,qBAAhCjB,EAAMhG,KAAK,iBACpB+G,EAAKR,MAAMU,GAEXF,EAAKX,QACH,CAAE1Q,IAAKuR,EAAWpQ,MAAOmP,EAAMhG,KAAK,iBAAmB,GAAIiG,KAAMD,EAAMhG,KAAK,gBAAkB,KARpG,CAYF,GACF,GACF,GAAC,CAAAnD,IAAA,oBAAAhG,MAED,SAAkBiQ,GAAU,IAADI,EAAA,KACzBtS,EAAE,2CAA4CkS,GAASnC,MAAK,SAACC,EAAQuC,GACnE,IAAMC,EAAYxS,EAAEuS,GACpBA,EAASE,QAAqD,OAA3CH,EAAKI,iBAAiBF,EAAUjG,MACrD,IAAGoG,QAAO,SAACxS,GACT,IAAMqS,EAAYxS,EAAEG,EAAMiI,QACtBjI,EAAMiI,OAAOqK,QACfH,EAAKd,QACH,CAAE1Q,IAAK0R,EAAUpH,KAAK,cAAenJ,MAAOuQ,EAAUjG,OAAS,GAAI8E,KAAMmB,EAAUpH,KAAK,gBAAkB,IAC1G,CAAEsG,QAAQ,EAAOkB,OAAO,IAI1BN,EAAKzB,aAAayB,EAAKxC,QAAQG,OAAQqC,EAAKI,iBAAiBF,EAAUjG,OAE3E,GACF,GAAC,CAAAtE,IAAA,UAAAhG,MAED,SAAQmJ,GAAkB,IAAZyH,EAAIzJ,UAAA/C,OAAA,QAAAsC,IAAAS,UAAA,GAAAA,UAAA,GAAG,CAAC,EACdD,EAAUxH,OAAOuI,OAAO,CAAEuH,aAAa,EAAMC,QAAQ,EAAMkB,OAAO,GAAQC,GAE5EC,EAAWtJ,KAAKuJ,QAAQ3H,EAAKiG,MAC7B2B,EAAgB,KAOpB,IALKxJ,KAAKsG,QAAQ1H,QAAUe,EAAQuI,SAClClI,KAAKsG,QAAQ1H,OAASoB,KAAKkJ,iBAAiBtH,EAAKnJ,QAI/CuH,KAAKsG,QAAQ1H,QAAUe,EAAQuI,OAAQ,CACzC,IAAIrR,EAAOL,EAAE,IAAKwJ,KAAKsG,QAAQ1H,QAC/B/H,EAAK+K,KAAK,eAAgBA,EAAKnJ,OAC/B5B,EAAK6Q,KAAK,OAAQ9F,EAAKtK,KACvBkS,EAAgBxJ,KAAKsG,QAAQ1H,OACzBoB,KAAKsG,QAAQO,SACfhQ,EAAKM,KAAK,gBAADH,OAAiBsS,IAE1BzS,EAAKgR,KAAKyB,EAEd,KAAO,CACL,IAAIvK,EAAQ,SACR9B,EAAO+C,KAAKsG,QAAQrJ,KAEpB+C,KAAKsG,QAAQO,UACf5J,GAAQ,KACRuM,EAAgBhT,EAAE,qBAADQ,OAAsB+H,EAAK,oBAAA/H,OAAmBiG,EAAI,gBAAAjG,OAAe4K,EAAKtK,IAAG,yBAAAN,OAAwB4K,EAAKnJ,MAAK,yCAAAzB,OAAwCsS,EAAQ,gBAE5KE,EAAgBhT,EAAE,qBAADQ,OAAsB+H,EAAK,oBAAA/H,OAAmBiG,EAAI,gBAAAjG,OAAe4K,EAAKtK,IAAG,yBAAAN,OAAwB4K,EAAKnJ,MAAK,MAAAzB,OAAKsS,EAAQ,eAE3IE,EAAcnD,SAASrG,KAAKsG,QAAQ7L,QAE/BuF,KAAKsG,QAAQ1H,SAChBoB,KAAKsG,QAAQ1H,OAAS4K,EAE1B,CAGA,IAAIC,EAASjT,EAAE,QAASgT,GACxBC,EAAO/B,KAAK,QAAS9F,EAAKnJ,OAEtBuH,KAAKsG,QAAQiB,UACfvH,KAAKwH,QAGH7H,EAAQsI,cAEVwB,EAAOC,QAAQ,UACf1J,KAAK2J,gBAEDhK,EAAQyJ,OACVpJ,KAAK4J,SAGX,GAAC,CAAAnL,IAAA,QAAAhG,MAED,WACE,IAAMgC,EAASjE,EAAE,iBAAkBwJ,KAAKsG,QAAQG,QAChDhM,EAAOoP,WAAWC,MAAK,SAACC,EAAOC,GAAK,OAAKxT,EAAE,QAASuT,GAAOhH,MAAQvM,EAAE,QAASwT,GAAOjH,KAAK,IAAEkH,SAAS5D,SAAS5L,EAChH,GAAC,CAAAgE,IAAA,SAAAhG,MAED,WAEEuH,KAAKmG,MAAMzO,WAAW,SACtBsI,KAAKsG,QAAQ1H,OAAS,IACxB,GAAC,CAAAH,IAAA,eAAAhG,MAED,SAAakO,EAAS/H,GAAS,IAADsL,EAAA,KAC5B,GAAItL,EAAQ,CACVoB,KAAK4G,kBAAkBD,EAAS/H,GAEhC,IAAIuL,EAAc,IACdC,WAAaA,UAAUC,YACzBF,EAAc,GAEhBnK,KAAKsG,QAAQ1H,OAAO0L,QAAQH,GAAa,WAAO,IAADI,EACZ,QAAjCA,EAAAL,EAAK5D,QAAQ1H,OAAOyJ,KAAK,gBAAQ,IAAAkC,GAAjCA,EAAmCb,QAAQ,UAC3CQ,EAAK5D,QAAQ1H,OAAO0G,SACpB4E,EAAK5D,QAAQ1H,OAAS,IACxB,GACF,CACF,GAAC,CAAAH,IAAA,gBAAAhG,MAED,WACE,IAAI+R,EAASxK,KAAKsG,QAAQG,OAAO+D,SACjChU,EAAE,oBAAqBgU,GAAQC,YAAY,oBAC3CjU,EAAE,oBAAqBgU,GAAQC,YAAY,oBAC3CjU,EAAE,yBAA0BgU,GAAQC,YAAY,aAClD,GAAC,CAAAhM,IAAA,UAAAhG,MAED,SAAQiS,GACN,OAAOA,EAAIC,QAAQ,yBAAyB,SAAUC,GACpD,MAAM,KAAN5T,OAAY4T,EAAKC,WAAW,GAAE,IAChC,GACF,GAAC,CAAApM,IAAA,mBAAAhG,MAED,SAAiB9B,GACf,OAAOA,EAAMiI,OAAO0I,UACtB,GAAC,CAAA7I,IAAA,mBAAAhG,MAED,SAAiBA,GACf,OAAOjC,EAAE,sBAADQ,OAAuByB,EAAK,KAAKuH,KAAKsG,QAAQG,QAAQ+D,SAAS,IAAM,IAC/E,qFAACvE,CAAA,CA/Q4B,uCCEhB,SAAS6E,IACtBtU,EAAE,qBAAqB+P,MAAK,SAACC,EAAQuE,GACnC,IAAMC,EAAWxU,EAAE,QAAQkR,KAAK,SAAW,KACrCuD,EAAczU,EAAEuU,GAAMnJ,KAAK,cAAgB,GAC3CsJ,EAA0C,KAA/B1U,EAAEuU,GAAMnJ,KAAK,cACxBuJ,EAAgB3U,EAAEuU,GAAMK,YAAYC,MAAML,IAAaxU,EAAEuU,GAAMK,YAAYC,MAAML,GAAUM,OAC7FA,EAAS9U,EAAEuU,GAAMnJ,KAAK,gBAAkBuJ,GAAiB,aAE7D3U,EAAEuU,GAAMK,YAAY,CAClBE,OAAAA,EACAL,YAAAA,EACAD,SAAAA,EACAE,SAAAA,EACAK,0BAA0B,EAC1BC,UAAW,KACXC,WAAY,MAEhB,GACF,qECVe,SAASC,EAAQC,EAASC,EAAMC,GAC7C,IAAIC,EAAU,KAEd,OAAO,WAAmB,IAAD,IAAAC,EAAAnM,UAAA/C,OAANuF,EAAI,IAAA4J,MAAAD,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAJ7J,EAAI6J,GAAArM,UAAAqM,GACjBH,GACFI,aAAaJ,GAEfA,EAAUK,YAAW,WACnBL,EAAU,KACVM,QAAQ/J,MAAMuJ,EAAMD,EAASvJ,EAC/B,GAAGyJ,EACL,CACF,8uBCtBA,IAGqBQ,EAAc,WACjC,SAAAA,IAAe,IAAD3M,EAAA,kGAAAK,CAAA,KAAAsM,GACZrM,KAAKsM,eAAiB7V,SAAS8V,iBAAiB,0BAC3CvM,KAAKsM,iBAIVtM,KAAKwM,aAAe/V,SAAS8V,iBAAiB,gCAC9CvM,KAAKwM,aAAa5R,SAAQ,SAAC6R,GACJ,KAAjBA,EAAOhU,OACTgU,EAAOzH,UAAUC,IAAI,gBAEzB,IACAjF,KAAK0M,mBAGL1M,KAAKsM,eAAe1R,SAAQ,SAACmE,GAAK,OAAKA,EAAM2E,iBAAiB,SAAS,SAAC/M,GAAK,OAAK+I,EAAKiN,mBAAmBhW,EAAMiI,OAAO,GAAC,IACxHnI,SAAS8V,iBAAiB,kCAAkC3R,SAAQ,SAACmE,GACnEA,EAAM2E,iBAAiB,UAAU,SAAC/M,GAAK,OAAK+I,EAAKkN,oBAAoBjW,EAAMiI,OAAO,GACpF,IAGAnI,SAAS8V,iBAAiB,kCAAkC3R,SAAQ,SAACmE,GACnEW,EAAKkN,oBAAoB7N,EAC3B,IACF,WA2JC,SAzJDsN,KAAA,EAAA5N,IAAA,gBAAAhG,MAOA,SAAcoU,EAAYpS,GAAS,IAADqK,EAAA,KAChC+H,EAAWtG,MAAK,SAACuG,EAAO/D,IACE,KAAnBA,EAAStQ,OAAkC,IAAlBgC,EAAOoC,QAAqC,KAAnBkM,EAAStQ,OAAgBgC,EAAO+J,SAASuE,EAAStQ,UACvGsQ,EAASE,SAAU,EACnBnE,EAAK6H,mBAAmB5D,GACxBjE,EAAK8H,oBAAoB7D,GAE7B,GACF,GAEA,CAAAtK,IAAA,mBAAAhG,MAMA,SAAiBsU,GACfA,EAAQrW,GAAG,sBAAsB,WAC/BqW,EAAQ1E,KAAK,8CAA8C9B,MAAK,SAAC3D,EAAKoK,GACpEA,EAAKC,UAAW,CAClB,GACF,IAEAF,EAAQrW,GAAG,aAAa,WACtBqW,EAAQ1E,KAAK,8CAA8C9B,MAAK,SAAC3D,EAAKoK,GACpEA,EAAKC,UAAW,CAClB,GACF,GACF,GAEA,CAAAxO,IAAA,qBAAAhG,MAMA,SAAmBmG,GAEjB,IAAMsO,EAAetO,EAAO3H,QAAQqV,eAC9Ba,EAAcvO,EAAOqK,QACTxS,SAAS8V,iBAAiB,IAADvV,OAAKkW,EAAY,4BAElDtS,SAAQ,SAACmE,GACjBA,EAAMkK,QAAUkE,EAChBpO,EAAMqO,eAAgB,EACtBrO,EAAMiG,UAAUC,IAAI,gBACtB,GACF,GAEA,CAAAxG,IAAA,mBAAAhG,MAKA,WACEuH,KAAKwM,aAAa5R,SAAQ,SAAC6R,GACzB,IAAMY,EAAgBZ,EAAOxV,QAAQqV,eAC/BgB,EAAc7W,SAAS8V,iBAAiB,IAADvV,OACvCqW,EAAa,4BAEbE,EAAgB9W,SAAS8V,iBAAiB,IAADvV,OACzCqW,EAAa,oCAEbG,EAAsBxB,MAAMyB,KAAKH,GAAa9K,QAAO,SAACuG,GAAQ,OAAKA,EAASqE,aAAa,IAElE,IAAzBG,EAAc1Q,QAA+C,IAA/B2Q,EAAoB3Q,QACpD4P,EAAOxD,SAAU,EACjBwD,EAAOW,eAAgB,GACdG,EAAc1Q,SAAWyQ,EAAYzQ,QAAyC,IAA/B2Q,EAAoB3Q,QAC5E4P,EAAOxD,SAAU,EACjBwD,EAAOW,eAAgB,IAEvBX,EAAOxD,SAAU,EACjBwD,EAAOW,eAAgB,GAGzBE,EAAY1S,SAAQ,SAACmE,GACf0N,EAAOW,gBAAkBrO,EAAMqO,cACjCrO,EAAMiG,UAAUM,OAAO,iBAEvBvG,EAAMiG,UAAUC,IAAI,iBAEtB,IAAMyI,EAAa3O,EAAMuI,WAAWA,WAAWqG,mBAC3CD,GAAcA,EAAW1I,UAAU4I,SAAS,yBAC1C7O,EAAMqO,cACRM,EAAW1I,UAAUM,OAAO,kBAE5BoI,EAAW1I,UAAUC,IAAI,kBAG/B,GACF,GACF,GAEA,CAAAxG,IAAA,sBAAAhG,MAMA,SAAoBsG,GAClB,IAAM8O,EAAkBrX,EAAEuI,GAAO+O,QAAQ,wBAAwBpG,KAAK,MACtE,GAAKmG,EAAL,CAKA,IAAME,EAActX,SAAS4O,cAAc,yBAADrO,OACf6W,EAAe,MAEpCG,EAAqBvX,SAAS8V,iBAAiB,IAADvV,OAC9C6W,EAAe,gDAAA7W,OAA+C6W,EAAe,wCAE7EI,EAAkBxX,SAAS8V,iBAAiB,IAADvV,OAC3C6W,EAAe,wDAAA7W,OAAuD6W,EAAe,gDAErFK,EAAwBlC,MAAMyB,KAAKO,GAAoBxL,QAAO,SAACuG,GAAQ,OAAKA,EAASqE,aAAa,IAEzE,IAA3Ba,EAAgBpR,QAAiD,IAAjCqR,EAAsBrR,QACxDkR,EAAY9E,SAAU,EACtB8E,EAAYX,eAAgB,GACnBa,EAAgBpR,SAAWmR,EAAmBnR,QAA2C,IAAjCqR,EAAsBrR,QACvFkR,EAAY9E,SAAU,EACtB8E,EAAYX,eAAgB,IAE5BW,EAAY9E,SAAU,EACtB8E,EAAYX,eAAgB,GAG9BY,EAAmBpT,SAAQ,SAACuT,GACtB3D,OAAO4C,gBAAkBe,EAAQf,cACnCe,EAAQnJ,UAAUM,OAAO,iBAEzB6I,EAAQnJ,UAAUC,IAAI,iBAExB,IAAMyI,EAAaS,EAAQ7G,WAAWA,WAAWqG,mBAC7CD,GAAcA,EAAW1I,UAAU4I,SAAS,yBAC1CO,EAAQf,cACVM,EAAW1I,UAAUM,OAAO,kBAE5BoI,EAAW1I,UAAUC,IAAI,kBAG/B,IAEAjF,KAAK4M,oBAAoBmB,EAxCzB,MAFE/N,KAAK0M,kBA2CT,oFAACL,CAAA,CApLgC,6wDCSa,IAE3B+B,EAAmB,WACtC,SAAAA,EAAYC,gGAAOtO,CAAA,KAAAqO,GACjBpO,KAAKqO,MAAQA,EACbrO,KAAKsO,GAAKtO,KAAKqO,MAAM3G,KAAK,OAAS1H,KAAKuO,UACxCvO,KAAKwO,SAAU,EACfxO,KAAKyO,cAAe,EACpBzO,KAAK0O,kBAAoB,IAAIrC,EAC7BrM,KAAK2O,cAAgBC,OAAOD,eAAiB,IAAI1I,EAAAA,EAAWzP,EAAE,iBAE9DwJ,KAAK6O,sBACL7O,KAAK8O,cAAgBpD,EAAQ1L,KAAMA,KAAK8O,cAAcC,KAAK/O,OAC3DA,KAAKgP,cAAgBtD,EAAQ1L,KAAMA,KAAKgP,cAAcD,KAAK/O,OAC3DA,KAAKiP,YAAcjP,KAAKiP,YAAYF,KAAK/O,MAErC4O,OAAOM,QAAQC,gBACjBnP,KAAKoP,kBAAmB,GAExBpP,KAAKoP,kBAAmB,EACxBR,OAAOM,QAAQC,gBAAkBnP,KAAKsO,GAE1C,WAgUC,SA9TDF,IAAA,EAAA3P,IAAA,mBAAAhG,MAKA,WACMuH,KAAKwO,UACPxO,KAAKwO,SAAU,EACfxO,KAAKqO,MAAMgB,IAAI,SAAU,gBAAiBrP,KAAK8O,eAC/C9O,KAAKqO,MAAMgB,IAAI,SAAUrP,KAAKgP,gBAE9BM,EAAAA,EAAAA,IAAmB,WAADtY,OAAYgJ,KAAKsO,KAEvC,GAEA,CAAA7P,IAAA,iBAAAhG,MAKA,WAAkB,IAADiH,EAAA,KACf,GAAIM,KAAKqO,MAAMxR,OAAS,IAAMmD,KAAKwO,QAAS,CAC1CxO,KAAKwO,SAAU,EACf,IAAIe,EAAQ,EAERC,EAAmBhZ,EAAEwJ,KAAKqO,MAAM9K,QAAQ,YAAYiH,SAASnC,KAAK,SAASX,KAAK,SACpD,IAA5B8H,EAAiB3S,QAAgBmD,KAAKqO,MAAMzM,KAAK,gBACnD4N,EAAmBxP,KAAKqO,MAAMzM,KAAK,eAErC5B,KAAKqO,MAAM3X,GAAG,SAAU,sFAAuFsJ,KAAK8O,eACpH9O,KAAKqO,MAAM3X,GAAG,SAAUsJ,KAAKgP,eAE7BhP,KAAKyP,mBAAqB,KAC1BzP,KAAKqO,MAAM3X,GAAG,mBAAmB,SAACsB,GAC5B0H,EAAK+P,oBACP/P,EAAK+P,mBAAmBC,QAE1BhQ,EAAK+P,mBAAqBzX,EAAE2X,cAAc1L,OAAO,IACjDsL,GAAS,GACG,GAAKC,EAAiB3S,OAAS,IAAM2S,EAAiBxI,SAAS,sBACzEwI,EAAiBI,SAAS,oBAE9B,IAEA5P,KAAKqO,MAAM3X,GAAG,gBAAgB,YAC5B6Y,GAAS,IACI,GAAKC,EAAiB3S,OAAS,GAC1C2S,EAAiB/E,YAAY,oBAEjC,IAEAzK,KAAKqO,MAAM3X,GAAG,cAAc,YAC1B6Y,GAAS,IACI,GAAKC,EAAiB3S,OAAS,GAC1C2S,EAAiB/E,YAAY,qBAE/B/K,EAAK2O,MAAMhG,KAAK,sBAAsBuH,SAAS,OACjD,IAEA5P,KAAK0O,kBAAkBmB,iBAAiB7P,KAAKqO,QAE7CyB,EAAAA,EAAAA,IAAiB,WAAD9Y,OAAYgJ,KAAKsO,KAAM,SAACyB,GACtCrQ,EAAKuP,YAAYc,EACnB,GACF,CACF,GAEA,CAAAtR,IAAA,sBAAAhG,MAKA,WACE,IAA+DuX,EAAAC,EAA3BjQ,KAAKkQ,uBAAsB,GAAxDC,EAAWH,EAAA,GAAEI,EAAYJ,EAAA,GAChCI,EAAaC,MAAQF,GACrBG,EAAAA,EAAAA,IAAa,KAAMF,EACrB,GAEA,CAAA3R,IAAA,eAAAhG,MAMA,WAA+B,IAAlB8X,IAAQ3Q,UAAA/C,OAAA,QAAAsC,IAAAS,UAAA,KAAAA,UAAA,GACbmQ,GAAeS,EAAAA,EAAAA,MACjBC,EAAO,GAQX,OALEA,EADEV,GAAgBA,EAAaM,MACxBN,EAAaM,MAEbzB,OAAO8B,SAASC,SAAW/B,OAAO8B,SAASE,OAAShC,OAAO8B,SAASG,KAGzEN,EACK3B,OAAO8B,SAASI,OAASL,EAE3BA,CACT,GAEA,CAAAhS,IAAA,6BAAAhG,MAMA,WAEE,IAAIsY,EAAeC,mBAAmBhR,KAAKiR,gBAAgBC,MAAM,wCAGjE,OAAIH,EACmBA,EAAaI,QAAO,SAACC,EAAKC,GAC7C,IAA+EC,EAAArB,EAAjDoB,EAAOH,MAAM,qCAAoC,GAAtEzS,EAAG6S,EAAA,GAAEC,EAAKD,EAAA,GAAE7Y,EAAK6Y,EAAA,GAS1B,OARIC,GACGH,EAAI3S,KACP2S,EAAI3S,GAAO,IAEb2S,EAAI3S,GAAKjC,KAAK/D,IAEd2Y,EAAI3S,GAAOhG,EAEN2Y,CACT,GAAG,CAAC,GAKC,IACT,GAEA,CAAA3S,IAAA,2BAAAhG,MAKA,WACE,IACMyY,EADMlR,KAAKiR,eACCC,MAAM,iBAEpBM,EADexR,KAAKqO,MAAMhG,KAAK,mBACZA,KAAK,iBAAiBzG,KAAK,SAMlD,OAJIsP,IACFM,EAAQN,EAAM,IAGTM,CACT,GAEA,CAAA/S,IAAA,aAAAhG,MAKA,WAAc,IAADqM,EAAA,KACX9E,KAAKqO,MAAMhG,KAAK,wBAAwB9B,MAAK,SAACuG,EAAO7M,GACnDA,EAAQgJ,QAAUhJ,EAAQmN,eAAgB,CAC5C,IACApN,KAAKqO,MAAMhG,KAAK,qBAAqBX,KAAK,WAAW,GACrD1H,KAAKqO,MAAMhG,KAAK,gBAAgB9B,MAAK,SAACC,EAAQC,GAC5C3B,EAAK6J,cAAc8C,MAAMhL,EAC3B,IAIAzG,KAAKqO,MAAMhG,KAAK,oCAAoC9B,MAAK,WAEvD/P,EAAEwJ,MAAM,GAAGiJ,SAAU,CACvB,GACF,GAEA,CAAAxK,IAAA,cAAAhG,MAMA,SAAYsX,GAAe,IAADlK,EAAA,KACxB7F,KAAKyO,cAAe,EACpBzO,KAAK0R,aAEL,IAAMC,EAAe3R,KAAK4R,6BACpBC,EAAe7R,KAAK8R,2BAE1B9R,KAAKqO,MAAMhG,KAAK,sBAAsBtF,IAAI8O,GAEtCF,GACexZ,OAAOqF,KAAKmU,GAGpB/W,SAAQ,SAACmX,GAChB,IAAItZ,EAAQkZ,EAAaI,GAEzB,GAAI/F,MAAMgG,QAAQvZ,GAAQ,CACxB,IAAIoU,EAAahH,EAAKwI,MAAMhG,KAAK,qCAADrR,OAAsC+a,EAAS,UAC/ElM,EAAK6I,kBAAkBuD,cAAcpF,EAAYpU,EACnD,MACEoN,EAAKwI,MAAMhG,KAAK,kBAADrR,OAAmB+a,EAAS,QAAOxL,MAAK,SAACuG,EAAO7M,GAC7D,OAAQA,EAAQ5I,MAChB,IAAK,SACH,MACF,IAAK,QACL,IAAK,WACH4I,EAAQgJ,QAAUxQ,IAAUwH,EAAQxH,MACpC,MACF,QACEwH,EAAQxH,MAAQA,EAEpB,GAEJ,IAIFjC,EAAE,eAAgBwJ,KAAKqO,OAAO9H,MAAK,SAACC,EAAQC,GAC1C,IAAIyL,EAAcnC,EAAatJ,EAAO6H,IAClC4D,GACFrM,EAAK8I,cAAcwD,KAAK1L,EAAQyL,EAEpC,IAGIlS,KAAKoP,kBACPgD,MAAMC,KAAKrS,KAAKqO,MAAM,GAAI,SAAU,CAAEZ,KAAM,QAG9CzN,KAAKyO,cAAe,CACtB,GAEA,CAAAhQ,IAAA,gBAAAhG,MAOA,WACOuH,KAAKyO,cAImCwB,EAA3BjQ,KAAKkQ,uBAAsB,GAA/B,KACDlQ,KAAKiR,cAAa,IAM/BmB,MAAMC,KAAKrS,KAAKqO,MAAM,GAAI,SAC5B,GAEA,CAAA5P,IAAA,gBAAAhG,MAOA,SAAc6Z,GACZ,IAAMC,EAAcD,EAAG3C,cAAc1L,OACrC,IAAIsO,GAAoC,QAArBA,EAAY9E,KAA/B,CAIA,IAAuD+E,EAAAvC,EAA3BjQ,KAAKkQ,uBAAsB,GAAhDuC,EAAOD,EAAA,GAAEE,EAAQF,EAAA,IAExBG,EAAAA,EAAAA,IAAUF,EAASC,GACnB1S,KAAK4S,aAAaH,EALlB,CAMF,GAEA,CAAAhU,IAAA,uBAAAhG,MAKA,WAAwB,IAADuN,EAAA,KACf6M,EAAa7S,KAAKqO,MAAM3G,KAAK,UAC7BoL,EAAS9S,KAAKqO,MAAMhG,KAAK,yBAAyBA,KAAK,yDAAyD0K,YAElHtC,EAAO,GACPV,EAAe,CAAC,EAapB,OAVEU,EADEoC,EAAWG,QAAQ,KAAO,EACxB,GAAAhc,OAAM6b,EAAU,KAAA7b,OAAI8b,GAEpB,GAAA9b,OAAM6b,EAAU,KAAA7b,OAAI8b,GAI1Btc,EAAE,eAAgBwJ,KAAKqO,OAAO9H,MAAK,SAACC,EAAQC,GAC1CsJ,EAAatJ,EAAO6H,IAAMtI,EAAK2I,cAAcsE,KAAKxM,EACpD,IAEO,CAACgK,EAAMV,EAChB,GAEA,CAAAtR,IAAA,UAAAhG,MAKA,WACE,MAAM,eAANzB,QAAsB,IAAIkc,MAAOC,qBAAoB,KAAAnc,OAAIoc,KAAKC,MAAsB,IAAhBD,KAAKE,UAC3E,GAEA,CAAA7U,IAAA,eAAAhG,MAMA,SAAa8a,GACX,GAAK3E,OAAO4E,eAAZ,CAIA,UAAMC,EAAWzT,KAAKqO,MAAM3G,KAAK,UACjC8L,eAAeE,QAAQ,iBAAkBC,KAAKC,aAAU,CAAC,IAAYL,SAAXE,kGAH1D,CAIF,qFAACrF,CAAA,CApVqC,sBCXtC,SAASyF,GACTA,EAAOvT,GAAG8K,YAAYC,MAAMyI,GAAK,CAC/BC,KAAM,CAAC,UAAW,aAAW,eAAa,cAAY,cAAe,UAAW,YAAa,WAC7FC,UAAW,CAAC,MAAO,SAAO,SAAO,SAAO,MAAO,MAAO,MAAO,OAC7DC,QAAS,CAAC,KAAM,QAAM,QAAM,QAAM,KAAM,KAAM,KAAM,MACpDC,OAAQ,CAAC,SAAU,UAAW,WAAS,YAAU,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACtHC,YAAa,CAAC,MAAO,OAAQ,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,MAAO,MAAO,OAC7FC,MAAO,OAEV,CATC,CASAP,ioBCZFrd,GAAE,WACAA,EAAE,uBAAuBE,GAAG,qBAAqB,SAACC,GAChDH,EAAEG,EAAMiI,QAAQ0G,QAClB,GACF,gECDA9O,GAAE,WACA,IAAM6d,EAAoB7d,EAAE,gBACtB8d,EAAcD,EAAkB3M,KAAK,kBAEvC6M,EAAkB,KAClBD,IACFC,EAAkB,wBAAAvd,OAAasd,EAAW,WAI5C,IAAIE,EAAS,GACbH,EAAkB3d,GAAG,kBAAkB,SAASC,GACzB,OAAjBA,EAAMsN,SAKyC,MADrCtN,EAAMiI,OAAO6V,QACfC,QAAQ/d,EAAMsN,OAAO6I,MAAQ,EAAG,KACxC0H,EAAS7d,EAAMsN,OAAO6I,OAG5B,IAGA,IAuBI6H,EAAU,IAAIC,IAAJ,CAAY,CACxBlL,QAAS,IACTjP,OAAQ,SAAUoN,EAAMgN,IAzBP,SAAShN,EAAMgN,GAChCre,EAAEse,KAAK,OAAQ,CAAC/S,MAAM,mBAAD/K,OAAqB6Q,EAAI,gBAE5C1M,MAAK,SAAC4Z,GACJ,IAAInT,EAAOmT,EAASnT,KAAKoT,UAAY,CAAC,EACtCH,EAAGjT,EACL,IAAGqT,MAAK,WACNJ,EAAG,GACL,IAAGK,QAAO,WAGR,IAAMC,EAAU3e,EAAEme,EAAQrO,QAAQrG,SAASuK,SAC3C2K,EAAQvF,SAAS,aAGAuF,EAAQ9M,KAAK,sBAErB+M,WAAW,QACtB,GACJ,CAOIC,CAAaxN,GAAM,SAACmN,GAAQ,OAAKH,EAAGG,EAAS,GAC/C,EACAM,cAAc,EACdC,cAAe,KACfC,SAAU,OACVjB,gBAAiBA,EACjBkB,OAAQ,SAAC9S,GAAI,OAAKA,EAAK1F,IAAI,EAC3ByY,eAAgB,SAAS/S,GACvB,GAAoB,qBAATA,EACT,OAAO,KAET,GAAI3C,KAAK2V,MAAMC,kBAAkB5V,KAAKsG,QAAQrG,SAAU,CAEtD,GAAIzJ,EAAEwJ,KAAKsG,QAAQrG,SAAS+G,SAAS,aAAc,CACjD,IACI6O,EADkBrf,EAAEwJ,KAAKsG,QAAQrG,SAASuK,SAAS1C,IAAI,GAC/B2M,QAC5BoB,EAAMC,WAAWtB,EAAS,EAAE,IAADxd,OAAM2L,EAAKoT,SAAS9Y,KAAI,KAAK+Y,MAAMC,QAAQC,KAEtE,IAAIC,EAAW3B,EAAS7R,EAAKoT,SAAS9Y,KAAKJ,OAAS,EAEhDb,EAAO,EAWX,OATEA,EADE6Z,EAAMO,YAAcD,EACfA,EAEAN,EAAMO,YAAc,EAG7BjK,YAAW,WACT0J,EAAMQ,aAAara,EAAM,EAC3B,GAAG,KAEI,EACT,CACA,MAAM,kCAANhF,OAAyC2L,EAAKoT,SAAS9Y,KAAI,UAC7D,CACA,MAAM,IAANjG,OAAW2L,EAAKoT,SAAS9Y,KAC3B,EACAqZ,iBAAkB,SAAS3T,GAEzB,MADO,WAAA3L,OAAc2L,EAAKoT,SAAS9Y,KAAI,YAEzC,IAOFkP,YAAW,WACTkI,EAAkB9N,MAAK,SAACuG,EAAOnK,GAC7B,IAAI4T,EAAY/f,EAAE,aAAcmM,GAC5B4T,EAAU1Z,OAAS,EACrB8X,EAAQ6B,OAAOD,GAEf5B,EAAQ6B,OAAO7T,EAEnB,GACF,GAAG,KAGH0R,EAAkB3d,GAAG,WAAW,SAACC,GAG/Bge,EAAQY,cAAgB5e,EAAMiI,OAAO0I,UACvC,IACA+M,EAAkB3d,GAAG,YAAY,SAACC,GAChC,IAAIwe,EAAU3e,EAAEG,EAAMiI,QAAQ4L,SAE1B2K,EAAQnO,SAAS,cACnBmO,EAAQ1K,YAAY,YAExB,IACA4J,EAAkB3d,GAAG,SAAS,SAACC,GAC7B,IAAIwe,EAAU3e,EAAEG,EAAMiI,QAAQ4L,SAE1BmK,EAAQ8B,UAEKjgB,EAAE,sBACR6P,SAAS8O,GAElBA,EAAQvF,SAAS,cAEjBuF,EAAQ1K,YAAY,YAExB,GACF,gECtIAjU,GAAE,WACA,IAAMkgB,EAAoBlgB,EAAE,gBACtB8d,EAAcoC,EAAkBhP,KAAK,kBAEvC6M,EAAkB,KAClBD,IACFC,EAAkB,wBAAAvd,OAAasd,EAAW,WAI5C,IAAIE,EAAS,GACbkC,EAAkBhgB,GAAG,kBAAkB,SAACC,GACjB,OAAjBA,EAAMsN,SAKyC,MADrCtN,EAAMiI,OAAO6V,QACfC,QAAQ/d,EAAMsN,OAAO6I,MAAQ,EAAG,KACxC0H,EAAS7d,EAAMsN,OAAO6I,OAG5B,IAQA,IAiCI6H,EAAU,IAAIC,IAAJ,CAAY,CACxBlL,QAAS,IAETjP,OApCe,SAASkc,EAAU9K,GAAO,IAADnM,EAAA,KACpCoM,EAAU,KACd,OAAO,WAAc,IAAD,IAAAC,EAAAnM,UAAA/C,OAATuF,EAAI,IAAA4J,MAAAD,GAAAE,EAAA,EAAAA,EAAAF,EAAAE,IAAJ7J,EAAI6J,GAAArM,UAAAqM,GACb,IAAMN,EAAUjM,EAChBwM,aAAaJ,GACbA,EAAUK,YAAW,kBAAMwK,EAAStU,MAAMsJ,EAASvJ,EAAK,GAAEyJ,EAC5D,CACF,CA6BUlK,EAAS,SAAUkG,EAAMgN,IA1BhB,SAAShN,EAAMgN,GAChC,IAAI9S,EAAK,4BAAA/K,OAA+B6Q,EAAI,0EAC5CrR,EAAEse,KAAK,OAAQ,CAAC/S,MAAOA,IACrB5G,MAAK,SAAC4Z,GACJ,IAAInT,EAAOmT,EAASnT,KAAKgV,OAAS,CAAC,EACnC/B,EAAGjT,EACL,IAAGqT,MAAK,WACNJ,EAAG,GACL,IAAGK,QAAO,WAGR,IAAMC,EAAU3e,EAAEme,EAAQrO,QAAQrG,SAASuK,SAC3C2K,EAAQvF,SAAS,aAGAuF,EAAQ9M,KAAK,sBAErB+M,WAAW,QACtB,GACJ,CAQIC,CAAaxN,GAAM,SAAC+O,GAAK,OAAK/B,EAAG+B,EAAM,GACzC,GAAG,KACHtB,cAAc,EACdC,cAAe,KACfsB,aAAa,EACbC,cAAe,EACftB,SAAU,WACVuB,YAAa,YACbxC,gBAAiBA,EACjBkB,OAAQ,SAAC9S,GAAI,OAAKA,EAAKqU,SAAWrU,EAAK1F,IAAI,EAC3CyY,eAAgB,SAAS/S,GACvB,GAAoB,qBAATA,EACT,OAAO,KAET,GAAI3C,KAAK2V,MAAMC,kBAAkB5V,KAAKsG,QAAQrG,SAAU,CAEtD,GAAIzJ,EAAEwJ,KAAKsG,QAAQrG,SAAS+G,SAAS,aAAc,CACjD,IACI6O,EADkBrf,EAAEwJ,KAAKsG,QAAQrG,SAASuK,SAAS1C,IAAI,GAC/B2M,QAC5BoB,EAAMC,WAAWtB,EAAS,EAAE,GAADxd,OAAK2L,EAAKoT,SAASiB,SAAQ,KAAKhB,MAAMC,QAAQC,KAEzE,IAAIC,EAAW3B,EAAS7R,EAAKoT,SAASiB,SAASna,OAAS,EAEpDb,EAAO,EAWX,OATEA,EADE6Z,EAAMO,YAAcD,EACfA,EAEAN,EAAMO,YAAc,EAG7BjK,YAAW,WACT0J,EAAMQ,aAAara,EAAM,EAC3B,GAAG,KAEI,EACT,CACA,MAAM,iCAANhF,OAAwC2L,EAAKoT,SAASiB,SAAQ,UAChE,CACA,OAAOrU,EAAKoT,SAASiB,QACvB,EACAV,iBAAkB,SAAS3T,GACzB,IAAIsU,EAAM,GACV,GAAIrI,OAAOM,SAAwC,cAA7BvM,EAAKoT,SAASmB,WAA4B,CAC9D,IAAMC,EAAavI,OAAOM,QAAQkI,OAAOtP,IAAI,cAE7CmP,EAAG,0BAAAjgB,OAA6B2L,EAAKoT,SAASsB,aAAY,iDAAArgB,OAAgDmgB,EAAS,gCACrH,CACA,MAAM,4BAANngB,OAAmC2L,EAAKoT,SAASmB,WAAU,qDAAAlgB,OAClB2L,EAAKoT,SAASuB,UAAS,mDAAAtgB,OACpD2L,EAAKoT,SAASiB,SAAQ,8BAAAhgB,OACvB2L,EAAKoT,SAAS9Y,KAAI,sBAAAjG,OACzBigB,EAAG,iBAET,IAGEM,EAAc,SAASC,GAEzBA,EAAS9gB,GAAG,WAAW,SAACC,GAEtBge,EAAQY,cAAgB5e,EAAMiI,OAAO0I,UACvC,IACAkQ,EAAS9gB,GAAG,YAAY,SAACC,GACvB,IAAIwe,EAAU3e,EAAEG,EAAMiI,QAAQ4L,SAE1B2K,EAAQnO,SAAS,cACnBmO,EAAQ1K,YAAY,YAExB,IACA+M,EAAS9gB,GAAG,SAAS,SAACC,GACpB,IAAIwe,EAAU3e,EAAEG,EAAMiI,QAAQ4L,SAE1BmK,EAAQ8B,UAEKjgB,EAAE,sBACR6P,SAAS8O,GAGlBA,EAAQvF,SAAS,cAEjBuF,EAAQ1K,YAAY,YAExB,GACF,EAEA8M,EAAYb,GAIZlgB,EAAEC,UAAUC,GAAG,2BAA2B,SAACC,EAAOsJ,GAC3CA,IAGL0U,EAAQ6B,OAAOvW,GAGX0U,EAAQ8C,OAAShhB,SAASihB,KAAK9J,SAAS+G,EAAQ8C,OAClD9C,EAAQgB,MAAMgC,cAAcD,KAAKlS,YAAYmP,EAAQ8C,MAEvDF,EAAY/gB,EAAEyJ,IAChB,IAOAkM,YAAW,WACTuK,EAAkBnQ,MAAK,SAACuG,EAAOnK,GAC7B,IAAI4T,EAAY/f,EAAE,aAAcmM,GAC5B4T,EAAU1Z,OAAS,EACrB8X,EAAQ6B,OAAOD,GAEf5B,EAAQ6B,OAAO7T,EAEnB,GACF,GAAG,IACL,gECxLAnM,GAAE,WACA,IAAIohB,GAAwB,EACtBC,EAAgBrhB,EAAE,iBAClBshB,EAAmBC,SAASF,EAAcjW,KAAK,mBAAoB,IACnEoW,EAA0BH,EAAcjW,KAAK,8BAC7CqW,EAAgBJ,EAAcjW,KAAK,kBACnCsW,EAAWH,SAASF,EAAcjW,KAAK,4BAA6B,IACpEuW,EAAwBN,EAAcjW,KAAK,2BAC7CwW,EAASC,MAAQpT,IAAI6S,EAAkB,WACvCQ,EAAaD,MACXE,EAAyB/hB,EAAE,oBAC7BgiB,EAAoBH,MAGlBI,EAAsBJ,MAAQpT,IAAIkT,EAAuB,WAU/D,GAPAI,EAAuB7hB,GAAG,SAAS,WACjCmhB,EAAcngB,WAAW,SAEzBlB,EAAE,mBAAmBkiB,IAAI,UAAW,QACpCF,EAAoBH,KACtB,KAEIzb,MAAMsb,IAGLJ,EAAL,CAIA,IAQMa,EAAW,SAACC,GACXA,IAGLR,EAASC,MAAQpT,IAAI2T,EAAwB,WAC/C,EAaMC,EAAY,WAChB,OAAOriB,EAAEY,KAAK,CACZmE,OAAQ,OACRjE,IAAK2gB,EACLa,YAAa,0BAEjB,EAMMC,EAAeC,aAAY,WAC/B,IAL2BC,EAKrBC,EAAsC9F,KAAK+F,OAAOd,MAAUG,GAAqB,OAEtB,UAA/ChiB,EAAE,iBAAiBgU,SAASkO,IAAI,aAChCQ,GA5DU,MA6D1BV,EAAoBH,MATKY,EApDC,KAqDpBZ,MAAUC,GAAc,IAAOW,GAUnCJ,IAKkBzF,KAAK+F,OAAOf,EAASC,OAAW,KAClC,MAIhBA,MAAUI,EACZI,IAxCKriB,EAAEY,KAAK,CACZmE,OAAQ,MACRjE,IAAK0gB,EACLc,YAAa,mBACbM,QAAS,CACP,eAAgB5iB,EAAE,yBAAyBkR,KAAK,cAuClCvM,MAAK,SAACkW,GACtB,IAAMgI,EAA6BhI,EAAOiI,kBAC1CX,EAASU,GAEJzB,EAEMyB,GAA8B,GACvCxB,EAAcxP,KAAK,2BAA2B,GAAGO,QACxCyQ,GAA8B,KACvCxB,EAAcngB,WAAW,QAJzBmhB,GAMJ,IACF,GAAGX,GAEH1hB,EAAEC,UAAU8iB,WAAU,WACpBjB,EAAaD,KACf,IACA7hB,EAAEC,UAAU+iB,QAAO,WACjBlB,EAAaD,KACf,IACA7hB,EAAEC,UAAUgjB,UAAS,WACnBnB,EAAaD,KACf,IAIA7hB,EAAEC,UAAUC,GAAG,iBAAiB,WAC9BiiB,EAASb,EACX,IAEAthB,EAAEC,UAAUijB,cAAa,SAACC,EAAQC,EAAMC,GAClCA,GAAYA,EAASviB,MAAQ0gB,GAGjCW,EAASb,EACX,IAEAlJ,OAAOlL,iBAAiB,gBAAgB,WACtCoW,cAAcf,EAEhB,IAEAnK,OAAOM,QAAQ6K,qBAlGc,WAC3BnC,GAAwB,CAC1B,EAiGAhJ,OAAOM,QAAQ8K,sBAvGe,WAC5BpC,GAAwB,CAC1B,CAJA,CA0GF,4/BC3HE,SAASphB,GAET,SAASyjB,IACP,OAAO,IAAI/G,KAAKA,KAAKgH,IAAG7X,MAAR6Q,KAAYtT,WAC9B,CAOA,IAAIua,EAAa,SAASla,EAASN,GACjC,IAAIya,EAAOpa,KAEXA,KAAKC,QAAUzJ,EAAEyJ,GACjBD,KAAKqa,cAAgClb,GAApBQ,EAAQ0a,UAA+B1a,EAAQ0a,SAChEra,KAAKqG,SAAW1G,EAAQ0G,UAAY,OACpCrG,KAAKsa,YAAc3a,EAAQ2a,YAC3Bta,KAAKgL,SAAWrL,EAAQqL,UAAYhL,KAAKC,QAAQ2B,KAAK,kBAAoB,KAC1E5B,KAAKgL,SAAWhL,KAAKgL,YAAYK,EAAQrL,KAAKgL,SAAWhL,KAAKgL,SAASuP,MAAM,KAAK,GAClFva,KAAKgL,SAAWhL,KAAKgL,YAAYK,EAAQrL,KAAKgL,SAAW,KACzDhL,KAAKwa,MAAQnP,EAAMrL,KAAKgL,UAAUyP,MAAO,EACzCza,KAAKsL,OAASoP,EAASC,YAAYhb,EAAQ2L,QAAUtL,KAAKC,QAAQ2B,KAAK,gBAAkByJ,EAAMrL,KAAKgL,UAAUM,QAAU,cACxHtL,KAAK4a,WAAajb,EAAQ2L,QAAUtL,KAAKC,QAAQ2B,KAAK,gBAAkByJ,EAAMrL,KAAKgL,UAAUM,QAAU,aACvGtL,KAAK6a,UAAW,EAChB7a,KAAK8a,QAAU9a,KAAKC,QAAQ8a,GAAG,SAC/B/a,KAAKgb,YAAYhb,KAAKC,QAAQ8a,GAAG,UAAW/a,KAAKC,QAAQoI,KAAK,qBAC9DrI,KAAKib,SAAWjb,KAAKgb,WAAahb,KAAKC,QAAQoI,KAAK,SAASxL,OAC7DmD,KAAKuL,yBAA2B5L,EAAQ4L,yBACxCvL,KAAKkb,SAAWvb,EAAQub,UAAY,WAAY,EAC5Clb,KAAKgb,WAAuC,IAA1Bhb,KAAKgb,UAAUne,SACnCmD,KAAKgb,WAAY,GAEnBhb,KAAKmb,UAAYxb,EAAQwb,WAAanb,KAAKC,QAAQ2B,KAAK,gBAAiB,EACzE5B,KAAKob,WAAaV,EAASC,YAAYhb,EAAQyb,YAAcpb,KAAKC,QAAQ2B,KAAK,gBAAkB,uBACjG5B,KAAKqb,WAAa1b,EAAQ0b,YAAcrb,KAAKC,QAAQ2B,KAAK,gBAAkB,EAC5E5B,KAAKsb,eAAiB3b,EAAQ2b,gBAAkBtb,KAAKC,QAAQ2B,KAAK,oBAAsB,eACxF5B,KAAKiL,YAActL,EAAQsL,aAAe,KAC1CjL,KAAKub,YAAc5b,EAAQ4b,aAAe,KAC1Cvb,KAAKwL,UAAY7L,EAAQ6L,WAAS,aAAAxU,OAAiBgJ,KAAKub,YAAW,KAAAvkB,OAAIgJ,KAAKub,YAAW,kCACvFvb,KAAKyL,WAAa9L,EAAQ8L,YAAU,aAAAzU,OAAiBgJ,KAAKub,YAAW,KAAAvkB,OAAIgJ,KAAKub,YAAW,oCACzFvb,KAAKwb,UAAY7b,EAAQ6b,WAAS,aAAAxkB,OAAiBgJ,KAAKub,YAAW,KAAAvkB,OAAIgJ,KAAKub,YAAW,YAAAvkB,OAAWgJ,KAAKub,YAAW,qBAGlHvb,KAAKyb,QAAU,EACX,YAAa9b,EACfK,KAAKyb,QAAU9b,EAAQ8b,QACd,YAAazb,KAAKC,QAAQ2B,SACnC5B,KAAKyb,QAAUzb,KAAKC,QAAQ2B,KAAK,aAEnC5B,KAAKyb,QAAUf,EAASgB,gBAAgB1b,KAAKyb,SAE7Czb,KAAK2b,QAAUjB,EAASkB,MAAM/e,OAAS,EACnC,YAAa8C,EACfK,KAAK2b,QAAUhc,EAAQgc,QACd,YAAa3b,KAAKC,QAAQ2B,SACnC5B,KAAK2b,QAAU3b,KAAKC,QAAQ2B,KAAK,aAEnC5B,KAAK2b,QAAUjB,EAASgB,gBAAgB1b,KAAK2b,SAE7C3b,KAAK6b,cAAgB,QACjB,cAAelc,EACjBK,KAAK6b,cAAgBlc,EAAQmc,UACpB,cAAe9b,KAAKC,QAAQ2B,SACrC5B,KAAK6b,cAAgB7b,KAAKC,QAAQ2B,KAAK,eAEzC5B,KAAK6b,cAAgBnB,EAASgB,gBAAgB1b,KAAK6b,eACnD7b,KAAK+b,SAAW/b,KAAK6b,cAEf,YAAalc,GAAc,YAAaA,GAAcK,KAAKC,QAAQ2B,KAAK,aAAkB5B,KAAKC,QAAQ2B,KAAK,cAChH5B,KAAKkL,UAAW,EACZ,aAAcvL,IAChBK,KAAKkL,SAAWvL,EAAQuL,UAEL,GAAjBlL,KAAKkL,UACPlL,KAAKyb,QAAU,EACfzb,KAAK2b,QAAU,IAEf3b,KAAKyb,QAAU,EACfzb,KAAK2b,QAAU,IAInB3b,KAAKgc,YAAa,EACd,eAAgBrc,EAClBK,KAAKgc,WAAarc,EAAQqc,WACjB,mBAAoBhc,KAAKC,QAAQ2B,SAC1C5B,KAAKgc,WAAahc,KAAKC,QAAQ2B,KAAK,qBAItC5B,KAAKyG,OAASjQ,EAAEkkB,EAASuB,SAASjc,KAAKwL,UAAWxL,KAAKyL,WAAYzL,KAAKwb,YACtEnV,SAASrG,KAAK6a,SAAW7a,KAAKC,QAAUD,KAAKqG,UAC7C3P,GAAG,CACDkS,MAAOpS,EAAE0lB,MAAMlc,KAAK4I,MAAO5I,MAC3Bmc,UAAW3lB,EAAE0lB,MAAMlc,KAAKmc,UAAWnc,QAEnCA,KAAKsa,YACPta,KAAKyG,OAAO4B,KAAK,sBAAsB+T,OAEvCpc,KAAKyG,OAAO4B,KAAK,sBAAsBgU,OAGrCrc,KAAK6a,SACP7a,KAAKyG,OAAOmJ,SAAS,qBAErB5P,KAAKyG,OAAOmJ,SAAS,qCAEnB5P,KAAKwa,QACPxa,KAAKyG,OAAOmJ,SAAS,kBAErB5P,KAAKyG,OAAO4B,KAAK,gBAAgB9B,MAAK,WACpC/P,EAAEwJ,MAAMwK,SAAS5F,QAAQpO,EAAEwJ,MAAMsc,SAAS,UAC1C9lB,EAAEwJ,MAAMwK,SAAS+R,OAAO/lB,EAAEwJ,MAAMsc,SAAS,SAC3C,IACAtc,KAAKyG,OAAO4B,KAAK,gBAAgBZ,YAAY,cAG/CjR,EAAEC,UAAUC,GAAG,aAAa,SAASsB,GAC/BoiB,EAAKU,SAAW9iB,EAAE4G,SAAWwb,EAAKna,QAAQ,IAKuD,IAAjGzJ,EAAEwB,EAAE4G,QAAQ2E,QAAQ,kEAAkE1G,QACxFud,EAAKiC,MAET,IAEArc,KAAKwc,WAAY,EACb,cAAe7c,EACjBK,KAAKwc,UAAY7c,EAAQ6c,UAChB,kBAAmBxc,KAAKC,QAAQ2B,SACzC5B,KAAKwc,UAAYxc,KAAKC,QAAQ2B,KAAK,mBAGrC5B,KAAKyc,oBAAqB,EACtB,uBAAwB9c,EAC1BK,KAAKyc,mBAAqB9c,EAAQ8c,mBACzB,2BAA4Bzc,KAAKC,QAAQ2B,SAClD5B,KAAKyc,mBAAqBzc,KAAKC,QAAQ2B,KAAK,6BAG9C5B,KAAK0c,SAAY/c,EAAQ+c,UAAY1c,KAAKC,QAAQ2B,KAAK,oBAAqB,EAC5E5B,KAAK2c,eAAkBhd,EAAQgd,gBAAkB3c,KAAKC,QAAQ2B,KAAK,0BAA2B,EAE9F5B,KAAK4c,eAAgB,EACjB,kBAAmBjd,EACrBK,KAAK4c,cAAgBjd,EAAQid,cACpB,sBAAuB5c,KAAKC,QAAQ2B,SAC7C5B,KAAK4c,cAAgB5c,KAAKC,QAAQ2B,KAAK,wBAErC5B,KAAK4c,eACR5c,KAAKyG,OAAO4B,KAAK,kBAChBX,KAAK,WAAW,SAAShP,EAAGqK,GAC1B,OAAOgV,SAAShV,GAAO,CACzB,IAEF/C,KAAK6c,WAAcld,EAAQkd,WAAa7c,KAAKC,QAAQ2B,KAAK,mBAAqByJ,EAAMrL,KAAKgL,UAAU6R,WAAa,GAAK,EACtH7c,KAAK8c,SAAY9c,KAAK6c,UAAY,GAAK,EACvC7c,KAAK+c,WAAaC,IAClBhd,KAAKid,QAAUD,IACfhd,KAAKkd,mBAAqB,GAC1Bld,KAAKmd,cAAgB,GACrBnd,KAAKod,aAAazd,EAAQod,WAAa/c,KAAKC,QAAQ2B,KAAK,mBACzD5B,KAAKqd,WAAW1d,EAAQsd,SAAWjd,KAAKC,QAAQ2B,KAAK,iBACrD5B,KAAKsd,sBAAsB3d,EAAQud,oBAAsBld,KAAKC,QAAQ2B,KAAK,+BAC3E5B,KAAKud,iBAAiB5d,EAAQwd,eAAiBnd,KAAKC,QAAQ2B,KAAK,mBAEzC,MAApB5B,KAAKiL,cACPjL,KAAKwd,KAAOxd,KAAKyd,SAAW/C,EAASgD,UAAU1d,KAAKiL,YAAajL,KAAKsL,OAAQtL,KAAKgL,UACnFhL,KAAK2d,YAGP3d,KAAK4d,UACL5d,KAAK6d,aACL7d,KAAK8d,SAEL9d,KAAK+d,WAED/d,KAAK6a,UACP7a,KAAKoc,OAGPpc,KAAKge,eACP,EAEA7D,EAAW/hB,UAAY,CACrB4E,YAAamd,EAEb8D,QAAS,GACTD,cAAe,WACbhe,KAAKke,gBACDle,KAAK8a,QACF9a,KAAKyc,mBAORzc,KAAKie,QAAU,CACb,CAACje,KAAKC,QAAS,CACb6F,MAAQ9F,KAAKqa,SAAY7jB,EAAE0lB,MAAMlc,KAAKoc,KAAMpc,MAAQ,WAAY,EAChEme,MAAO3nB,EAAE0lB,MAAMlc,KAAK8d,OAAQ9d,MAC5Boe,QAAS5nB,EAAE0lB,MAAMlc,KAAKoe,QAASpe,MAC/B4I,MAAQ5I,KAAKC,QAAQyH,KAAK,YAAelR,EAAE0lB,MAAMlc,KAAKoc,KAAMpc,MAAQ,WAAY,KAXpFA,KAAKie,QAAU,CACb,CAACje,KAAKC,QAAS,CACb6F,MAAQ9F,KAAKqa,SAAY7jB,EAAE0lB,MAAMlc,KAAKoc,KAAMpc,MAAQ,WAAY,KAc/DA,KAAKgb,WAAahb,KAAKib,SAC9Bjb,KAAKie,QAAU,CAEb,CAACje,KAAKC,QAAQoI,KAAK,SAAU,CAC3BvC,MAAQ9F,KAAKqa,SAAY7jB,EAAE0lB,MAAMlc,KAAKoc,KAAMpc,MAAQ,WAAY,EAChEme,MAAO3nB,EAAE0lB,MAAMlc,KAAK8d,OAAQ9d,MAC5Boe,QAAS5nB,EAAE0lB,MAAMlc,KAAKoe,QAASpe,QAEjC,CAACA,KAAKgb,UAAW,CACfpS,MAAOpS,EAAE0lB,MAAMlc,KAAKoc,KAAMpc,SAGrBA,KAAKC,QAAQ8a,GAAG,OACzB/a,KAAK6a,UAAW,EAEhB7a,KAAKie,QAAU,CACb,CAACje,KAAKC,QAAS,CACb2I,MAAOpS,EAAE0lB,MAAMlc,KAAKoc,KAAMpc,SAK5BA,KAAKuL,2BACPvL,KAAKie,QAAQje,KAAKie,QAAQphB,QAAU,CAClCmD,KAAKC,QAAS,CACZoe,SAAU,SAASrmB,GACjBA,EAAEpB,iBACFoB,EAAEyL,kBACFjN,EAAEwJ,MAAMmD,MACV,KAKN,IAAK,IAAI1D,EAAI6S,EAAI5Z,EAAI,EAAGA,EAAIsH,KAAKie,QAAQphB,OAAQnE,IAC/C+G,EAAKO,KAAKie,QAAQvlB,GAAG,GACrB4Z,EAAKtS,KAAKie,QAAQvlB,GAAG,GACrB+G,EAAG/I,GAAG4b,EAEV,EACA4L,cAAe,WACb,IAAK,IAAIze,EAAI6S,EAAI5Z,EAAI,EAAGA,EAAIsH,KAAKie,QAAQphB,OAAQnE,IAC/C+G,EAAKO,KAAKie,QAAQvlB,GAAG,GACrB4Z,EAAKtS,KAAKie,QAAQvlB,GAAG,GACrB+G,EAAG4P,IAAIiD,GAETtS,KAAKie,QAAU,EACjB,EAEA7B,KAAM,SAASpkB,GACbgI,KAAKyG,OAAO2V,OACZpc,KAAKse,OAASte,KAAKgb,UAAYhb,KAAKgb,UAAUuD,cAAgBve,KAAKC,QAAQse,cAC3Eve,KAAK8d,SACL9d,KAAKwe,QACLhoB,EAAEoY,QAAQlY,GAAG,SAAUF,EAAE0lB,MAAMlc,KAAKwe,MAAOxe,OACvChI,IACFA,EAAEyL,kBACFzL,EAAEpB,kBAEJoJ,KAAKC,QAAQyJ,QAAQ,CACnBrS,KAAM,OACNmmB,KAAMxd,KAAKwd,MAEf,EAEAnB,KAAM,SAASrkB,GACTgI,KAAK6a,UACJ7a,KAAKyG,OAAOsU,GAAG,cACpB/a,KAAKyG,OAAO4V,OACZ7lB,EAAEoY,QAAQS,IAAI,SAAUrP,KAAKwe,OAC7Bxe,KAAK+b,SAAW/b,KAAK6b,cACrB7b,KAAK+d,WACA/d,KAAK8a,SACRtkB,EAAEC,UAAU4Y,IAAI,YAAarP,KAAKqc,MAIlCrc,KAAKgc,aAEKhc,KAAK8a,SAAW9a,KAAKC,QAAQ8C,OAC3B/C,KAAKib,UAAYjb,KAAKC,QAAQoI,KAAK,SAAStF,QAGzD/C,KAAK2d,WACN3d,KAAKC,QAAQyJ,QAAQ,CACnBrS,KAAM,OACNmmB,KAAMxd,KAAKwd,OAEf,EAEAlY,OAAQ,WACNtF,KAAKke,gBACLle,KAAKyG,OAAOnB,gBACLtF,KAAKC,QAAQ2B,OAAO6c,UAC7B,EAEAC,QAAS,WACP,IAAIpkB,EAAI0F,KAAK2e,aACb,OAAO,IAAIzL,KAAK5Y,EAAEskB,UAAqC,IAAxBtkB,EAAEukB,oBACnC,EAEAF,WAAY,WACV,OAAO3e,KAAKwd,IACd,EAEAsB,QAAS,SAASxkB,GAChB0F,KAAK+e,WAAW,IAAI7L,KAAK5Y,EAAEskB,UAAqC,IAAxBtkB,EAAEukB,qBAC5C,EAEAE,WAAY,SAASzkB,GACnB0F,KAAKwd,KAAOljB,EACZ0F,KAAK2d,UACP,EAEAA,SAAU,WACR,IAAIqB,EAAYhf,KAAKif,mBAChBjf,KAAK8a,QAMR9a,KAAKC,QAAQ8C,IAAIic,IALbhf,KAAKgb,WACPhb,KAAKC,QAAQoI,KAAK,SAAStF,IAAIic,GAEjChf,KAAKC,QAAQ2B,KAAK,OAAQod,GAI9B,EAEAC,iBAAkB,SAAS3T,GAGzB,YAFenM,IAAXmM,IACHA,EAAStL,KAAKsL,QACRoP,EAASwE,WAAWlf,KAAKwd,KAAMlS,EAAQtL,KAAKgL,SACrD,EAEAoS,aAAc,SAASL,GACrB/c,KAAK+c,UAAYA,IAAcC,IAC3Bhd,KAAK+c,aAAeC,MACtBhd,KAAK+c,UAAYrC,EAASgD,UAAU1d,KAAK+c,UAAW/c,KAAKsL,OAAQtL,KAAKgL,WAExEhL,KAAK8d,SACL9d,KAAKmf,iBACP,EAEA9B,WAAY,SAASJ,GACnBjd,KAAKid,QAAUA,GAAWD,IACtBhd,KAAKid,UAAYD,MACnBhd,KAAKid,QAAUvC,EAASgD,UAAU1d,KAAKid,QAASjd,KAAKsL,OAAQtL,KAAKgL,WAEpEhL,KAAK8d,SACL9d,KAAKmf,iBACP,EAEA7B,sBAAuB,SAASJ,GAC9Bld,KAAKkd,mBAAqBA,GAAsB,GAC3C1mB,EAAEwb,QAAQhS,KAAKkd,sBAClBld,KAAKkd,mBAAqBld,KAAKkd,mBAAmB3C,MAAM,SAE1Dva,KAAKkd,mBAAqB1mB,EAAEmR,IAAI3H,KAAKkd,oBAAoB,SAAS5iB,GAChE,OAAOyd,SAASzd,EAAG,GACrB,IACA0F,KAAK8d,SACL9d,KAAKmf,iBACP,EAEA5B,iBAAkB,SAASJ,GACzBnd,KAAKmd,cAAgBA,GAAiB,GACjC3mB,EAAEwb,QAAQhS,KAAKmd,iBAClBnd,KAAKmd,cAAgBnd,KAAKmd,cAAc5C,MAAM,SAEhDva,KAAKmd,cAAgB3mB,EAAEmR,IAAI3H,KAAKmd,eAAe,SAAS7iB,GACtD,OAAOogB,EAASgD,UAAUpjB,EAAG0F,KAAKsL,OAAQtL,KAAKgL,UAAUoU,SAC3D,IACApf,KAAK8d,SACL9d,KAAKmf,iBACP,EAEAX,MAAO,WACL,IAAIxe,KAAK6a,SAAT,CACA,IAAIwE,EAAW,GACfrf,KAAKC,QAAQ6N,UAAUnG,KAAI,WACK,QAA1BnR,EAAEwJ,MAAM0Y,IAAI,YACd2G,EAAS7iB,KAAKub,SAASvhB,EAAEwJ,MAAM0Y,IAAI,YAEvC,IACA,IAAI4G,EAASD,EAASvV,MAAK,SAASlR,EAAG2mB,GAAK,OAAO3mB,EAAI2mB,CAAG,IAAG7hB,MAAQ,GACjE8hB,EAAUxf,KAAKgb,UAAYhb,KAAKgb,UAAYhb,KAAKC,QACjDwf,EAASD,EAAQC,SACjBnB,EAASkB,EAAQjB,cAAgBxG,SAASyH,EAAQ9G,IAAI,eACtDgH,EAAQF,EAAQG,aAAe5H,SAASyH,EAAQ9G,IAAI,gBACpDkH,EAAgBH,EAAOI,IAAMvB,EAC7BwB,EAAaL,EAAOM,KACxB/f,KAAKyG,OAAOgE,YAAY,oCAExB,IAAIuV,EAAcxpB,EAAEoY,QAAQqR,YAAcR,EAAOI,IAAM7f,KAAKyG,OAAO8X,cAC/D2B,EAAiBN,EAAgB5f,KAAKyG,OAAO8X,cAAiB/nB,EAAEoY,QAAQqR,YAAczpB,EAAEoY,QAAQ0P,UAE/F4B,GAAiBF,GACpBJ,EAAgBH,EAAOI,IAAM7f,KAAKyG,OAAO8X,cACzCve,KAAKyG,OAAOmJ,SAAS,oBAIhBsQ,GAAgB1pB,EAAEoY,QAAQqR,UAAUR,EAAOI,KAChD7f,KAAKyG,OAAOmJ,SAAS,sBAKnB6P,EAAOM,KAAO/f,KAAKyG,OAAOiZ,SAAWlpB,EAAEoY,QAAQ8Q,UACjDI,EAAcL,EAAOM,KAAOL,EAAS1f,KAAKyG,OAAOiZ,SAEnD1f,KAAKyG,OAAOiS,IAAI,CACdmH,IAAKD,EACLG,KAAMD,EACNR,OAAQA,GArCiB,CAuC7B,EAEAxB,OAAQ,WACN,IAAIN,EACA2C,GAAW,EACXC,EAAapgB,KAAK8a,QAAU9a,KAAKC,QAAQ8C,MAAQ/C,KAAKC,QAAQ2B,KAAK,SAAW5B,KAAKC,QAAQoI,KAAK,SAAStF,MACzGnD,WAAaA,UAAU/C,SAAmC,kBAAjB+C,UAAU,IAAmBA,UAAU,aAAcsT,OAChGsK,EAAO5d,UAAU,GACjBugB,GAAW,GAGX3C,EAAOxd,KAAK8a,QAAU9a,KAAKC,QAAQ8C,MAAQ/C,KAAKC,QAAQ2B,KAAK,SAAW5B,KAAKC,QAAQoI,KAAK,SAAStF,MAGrG/C,KAAKwd,KAAO9C,EAASgD,UAAUF,EAAMxd,KAAKsL,OAAQtL,KAAKgL,UAEnDmV,EACFngB,KAAK2d,WACkB,IAAdyC,GACTpgB,KAAKC,QAAQyJ,QAAQ,CACnBrS,KAAM,aACNmmB,KAAM,OAINxd,KAAKwd,KAAOxd,KAAK+c,UACnB/c,KAAKyd,SAAW,IAAIvK,KAAKlT,KAAK+c,UAAUqC,WAC/Bpf,KAAKwd,KAAOxd,KAAKid,QAC1Bjd,KAAKyd,SAAW,IAAIvK,KAAKlT,KAAKid,QAAQmC,WAEtCpf,KAAKyd,SAAW,IAAIvK,KAAKlT,KAAKwd,KAAK4B,WAErCpf,KAAKqgB,MACP,EAEAzC,QAAS,WACP,IAAI0C,EAAStgB,KAAK6c,UACd1lB,EAAO,OACX,GAAI6I,KAAK4c,cAAe,CACtB,IAAI2D,EAAO,6BACXppB,GAAQopB,EACRvgB,KAAKyG,OAAO4B,KAAK,yCAAyCzD,QAAQ2b,EACpE,CACA,KAAOD,EAAStgB,KAAK6c,UAAY,GAC/B1lB,GAAI,mBAAAH,OAAuBqU,EAAMrL,KAAKgL,UAAUiJ,QAASqM,IAAY,GAAE,SAEzEnpB,GAAQ,QACR6I,KAAKyG,OAAO4B,KAAK,0BAA0BkU,OAAOplB,EACpD,EAEA0mB,WAAY,WAGV,IAFA,IAAI1mB,EAAO,GACPuB,EAAI,EACDA,EAAI,IACTvB,GAAI,uBAAAH,OAA2BqU,EAAMrL,KAAKgL,UAAUmJ,YAAYzb,KAAI,WAEtEsH,KAAKyG,OAAO4B,KAAK,yBAAyBlR,KAAKA,EACjD,EAEAkpB,KAAM,WACJ,GAAiB,MAAbrgB,KAAKwd,MAAiC,MAAjBxd,KAAKyd,SAA9B,CAIA,IAAInjB,EAAI,IAAI4Y,KAAKlT,KAAKyd,SAAS2B,WAC3BoB,EAAOlmB,EAAEmmB,iBACTC,EAAQpmB,EAAEqmB,cACVC,EAAWtmB,EAAEqkB,aACbkC,EAAQvmB,EAAEwmB,cACVC,EAAUzmB,EAAE0mB,gBACZC,EAAYjhB,KAAK+c,aAAeC,IAAWhd,KAAK+c,UAAU0D,kBAAoBzD,IAC9EkE,EAAalhB,KAAK+c,aAAeC,IAAWhd,KAAK+c,UAAU4D,eAAiB3D,IAC5EmE,EAAUnhB,KAAKid,UAAYD,IAAWhd,KAAKid,QAAQwD,iBAAmBzD,IACtEoE,EAAWphB,KAAKid,UAAYD,IAAWhd,KAAKid,QAAQ0D,cAAgB3D,IACpEqE,EAAcrhB,KAAKwd,MAAQvD,EAAQja,KAAKwd,KAAKiD,iBAAkBzgB,KAAKwd,KAAKmD,cAAe3gB,KAAKwd,KAAKmB,cAAcS,UAChHhL,EAAQ,IAAIlB,KACE7H,EAAMrL,KAAKgL,UAAUsW,aAAejW,EAAMkW,GAAGD,YAI/DthB,KAAKyG,OAAO4B,KAAK,mCACfR,KAAK,GAAD7Q,OAAIqU,EAAMrL,KAAKgL,UAAUkJ,OAAOwM,GAAM,KAAA1pB,OAAIwpB,IAChDxgB,KAAKyG,OAAO4B,KAAK,oCACfR,KAAK,GAAD7Q,OAAI4pB,EAAQ,KAAA5pB,OAAIqU,EAAMrL,KAAKgL,UAAUkJ,OAAOwM,GAAM,KAAA1pB,OAAIwpB,IAC5DxgB,KAAKyG,OAAO4B,KAAK,sCACfR,KAAK,GAAD7Q,OAAI4pB,EAAQ,KAAA5pB,OAAIqU,EAAMrL,KAAKgL,UAAUkJ,OAAOwM,GAAM,KAAA1pB,OAAIwpB,IAG5DxgB,KAAKyG,OAAO4B,KAAK,kBACfR,KAAKwD,EAAMrL,KAAKgL,UAAUoJ,OAC1BoN,QAAyB,IAAlBxhB,KAAK0c,UACd1c,KAAKmf,kBACLnf,KAAK6d,aACL,IAAI4D,EAAYxH,EAAQuG,EAAME,EAAQ,EAAG,GAAI,EAAG,EAAG,EAAG,GAClDgB,EAAMhH,EAASiH,eAAeF,EAAUhB,iBAAkBgB,EAAUd,eACxEc,EAAU1C,WAAW2C,GACrBD,EAAU1C,WAAW2C,GAAOD,EAAUG,YAAc5hB,KAAK6c,UAAY,GAAK,GAC1E,IAAIgF,EAAY,IAAI3O,KAAKuO,EAAUrC,WACnCyC,EAAU9C,WAAW8C,EAAUlD,aAAe,IAC9CkD,EAAYA,EAAUzC,UAGtB,IAFA,IACI0C,EADA3qB,EAAO,GAEJsqB,EAAUrC,UAAYyC,GAAW,CACtC,GAAIJ,EAAUG,aAAe5hB,KAAK6c,YAChC1lB,EAAKqF,KAAK,QACNwD,KAAK4c,eAAe,CAEtB,IAAIhkB,EAAI,IAAIsa,KAAKuO,EAAUhB,iBAAkBgB,EAAUd,cAAec,EAAU9C,aAAe8C,EAAUM,SAAW,IAAM/hB,KAAK6c,WAAa7c,KAAK6c,UAAY,EAAI,GAAK,IAClK0C,EAAI,IAAIrM,KAAKta,EAAEopB,cAAe,EAAG,GACjCC,MAAcrpB,EAAI2mB,GAAK,MAAQ,EAAI,KACvCpoB,EAAKqF,KAAK,kBAADxF,OAAmBirB,EAAO,SACrC,CAEFH,EAAO,IAAA9qB,OAAOgJ,KAAKkb,SAASuG,GAAU,KAClCA,EAAUhB,iBAAmBD,GAASiB,EAAUhB,kBAAoBD,GAAQiB,EAAUd,cAAgBD,EACxGoB,GAAW,QACFL,EAAUhB,iBAAmBD,GAASiB,EAAUhB,kBAAoBD,GAAQiB,EAAUd,cAAgBD,KAC/GoB,GAAW,QAGT9hB,KAAK2c,gBACG8E,EAAUhB,kBAAoBrM,EAAM4N,eACpCP,EAAUd,eAAiBvM,EAAM8N,YACjCT,EAAU9C,cAAgBvK,EAAMsK,YAC1CoD,GAAW,UAETT,GAAeI,EAAUrC,WAAaiC,IACxCS,GAAW,YAETL,EAAUrC,UAAYpf,KAAK+c,WAAa0E,EAAUrC,UAAYpf,KAAKid,UACI,IAA/DzmB,EAAE2rB,QAAQV,EAAUG,YAAa5hB,KAAKkd,sBACkB,IAAxD1mB,EAAE2rB,QAAQV,EAAUrC,UAAWpf,KAAKmd,kBAC9C2E,GAAW,aAEb3qB,EAAKqF,KAAK,iBAADxF,OAAkB8qB,EAAO,MAAA9qB,OAAKyqB,EAAU9C,aAAY,UACzD8C,EAAUG,aAAe5hB,KAAK8c,SAChC3lB,EAAKqF,KAAK,SAEZilB,EAAU1C,WAAW0C,EAAU9C,aAAe,EAChD,CACA3e,KAAKyG,OAAO4B,KAAK,0BAA0B+Z,QAAQ7F,OAAOplB,EAAKkrB,KAAK,KAEpElrB,EAAO,GACP,IAAK,IAAIuB,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAE3BopB,EAAU,IADNQ,EAASrI,EAAQuG,EAAME,EAAOE,EAAUloB,IAGhC0mB,UAAY,KAAWpf,KAAK+c,WAAauF,EAAOlD,UAAYpf,KAAKid,QAC3E6E,GAAW,YACFjB,GAASnoB,IAClBopB,GAAW,WAEb3qB,EAAKqF,KAAK,oBAADxF,OAAqB8qB,EAAO,MAAA9qB,OAAK0B,EAAC,cAC7C,CACAsH,KAAKyG,OAAO4B,KAAK,wBAAwBlR,KAAKA,EAAKkrB,KAAK,KAExDlrB,EAAO,GACP,IAASuB,EAAI,EAAGA,EAAI,GAAIA,GAAKsH,KAAKqb,WAAY,CAC5C,IAAIiH,EACJR,EAAU,IADNQ,EAASrI,EAAQuG,EAAME,EAAOE,EAAUC,EAAOnoB,IAExC0mB,UAAYpf,KAAK+c,WAAauF,EAAOlD,UAAYpf,KAAKid,QAC/D6E,GAAW,YACF1O,KAAKC,MAAM0N,EAAU/gB,KAAKqb,aAAejI,KAAKC,MAAM3a,EAAIsH,KAAKqb,cACtEyG,GAAW,WAEb3qB,EAAKqF,KAAK,sBAADxF,OAAuB8qB,EAAO,MAAA9qB,OAAK6pB,EAAK,KAAA7pB,OAAI0B,EAAI,GAAE,IAAA1B,OAAO0B,GAAMA,EAAC,WAC3E,CACAsH,KAAKyG,OAAO4B,KAAK,0BAA0BlR,KAAKA,EAAKkrB,KAAK,KAG1D,IAAIE,EAAcviB,KAAKwd,MAAQxd,KAAKwd,KAAKiD,iBACrCvM,EAASlU,KAAKyG,OAAO4B,KAAK,sBAC5BA,KAAK,YACLR,KAAK2Y,GACLgC,MACAna,KAAK,QAAQoC,YAAY,UACvB8X,GAAeA,GAAe/B,GAChCtM,EAAOuO,GAAGziB,KAAKwd,KAAKmD,eAAe/Q,SAAS,WAE1C4Q,EAAOS,GAAaT,EAAOW,IAC7BjN,EAAOtE,SAAS,YAEd4Q,GAAQS,GACV/M,EAAOrW,MAAM,EAAGqjB,GAAYtR,SAAS,YAEnC4Q,GAAQW,GACVjN,EAAOrW,MAAMujB,EAAW,GAAGxR,SAAS,YAGtCzY,EAAO,GACPqpB,EAAiC,GAA1BzI,SAASyI,EAAO,GAAI,IAC3B,IAAIkC,EAAW1iB,KAAKyG,OAAO4B,KAAK,qBAC9BA,KAAK,YACLR,KAAK,GAAD7Q,OAAIwpB,EAAI,KAAAxpB,OAAIwpB,EAAO,IACvBgC,MACAna,KAAK,MACPmY,GAAQ,EACR,IAAS9nB,GAAK,EAAGA,EAAI,GAAIA,IACvBvB,GAAI,oBAAAH,QAA8B,GAAN0B,GAAgB,IAALA,EAAU,OAAS,IAAE1B,OAAGurB,GAAe/B,EAAO,UAAY,IAAExpB,OAAGwpB,EAAOS,GAAaT,EAAOW,EAAU,YAAc,GAAE,MAAAnqB,OAAKwpB,EAAI,WACpKA,GAAQ,EAEVkC,EAASvrB,KAAKA,EA3Id,CA4IF,EAEAgoB,gBAAiB,WACf,IAAI7kB,EAAI,IAAI4Y,KAAKlT,KAAKyd,UAClB+C,EAAOlmB,EAAEmmB,iBACTC,EAAQpmB,EAAEqmB,cACVe,EAAMpnB,EAAEqkB,aACRgE,EAAOroB,EAAEwmB,cACb,OAAQ9gB,KAAK+b,UACb,KAAK,EACC/b,KAAK+c,aAAeC,KAAYwD,GAAQxgB,KAAK+c,UAAU0D,kBAAoBC,GAAS1gB,KAAK+c,UAAU4D,eAAiBe,GAAO1hB,KAAK+c,UAAU4B,cAAgBgE,GAAQ3iB,KAAK+c,UAAU+D,cACnL9gB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,WAGd5iB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,YAGZ5iB,KAAKid,UAAYD,KAAYwD,GAAQxgB,KAAKid,QAAQwD,kBAAoBC,GAAS1gB,KAAKid,QAAQ0D,eAAiBe,GAAO1hB,KAAKid,QAAQ0B,cAAgBgE,GAAQ3iB,KAAKid,QAAQ6D,cACxK9gB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,WAGd5iB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,YAGhB,MACF,KAAK,EACC5iB,KAAK+c,aAAeC,KAAYwD,GAAQxgB,KAAK+c,UAAU0D,kBAAoBC,GAAS1gB,KAAK+c,UAAU4D,eAAiBe,GAAO1hB,KAAK+c,UAAU4B,aAC5I3e,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,WAGd5iB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,YAGZ5iB,KAAKid,UAAYD,KAAYwD,GAAQxgB,KAAKid,QAAQwD,kBAAoBC,GAAS1gB,KAAKid,QAAQ0D,eAAiBe,GAAO1hB,KAAKid,QAAQ0B,aACnI3e,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,WAGd5iB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,YAGhB,MACF,KAAK,EACC5iB,KAAK+c,aAAeC,KAAYwD,GAAQxgB,KAAK+c,UAAU0D,kBAAoBC,GAAS1gB,KAAK+c,UAAU4D,cACrG3gB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,WAGd5iB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,YAGZ5iB,KAAKid,UAAYD,KAAYwD,GAAQxgB,KAAKid,QAAQwD,kBAAoBC,GAAS1gB,KAAKid,QAAQ0D,cAC9F3gB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,WAGd5iB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,YAGhB,MACF,KAAK,EACL,KAAK,EACC5iB,KAAK+c,aAAeC,KAAYwD,GAAQxgB,KAAK+c,UAAU0D,iBACzDzgB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,WAGd5iB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,YAGZ5iB,KAAKid,UAAYD,KAAYwD,GAAQxgB,KAAKid,QAAQwD,iBACpDzgB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,WAGd5iB,KAAKyG,OAAO4B,KAAK,SAASqQ,IAAI,CAC5BkK,WAAY,YAKpB,EAEAha,MAAO,SAAS5Q,GACdA,EAAEyL,kBACFzL,EAAEpB,kBAEEJ,EAAEwB,EAAE4G,QAAQoI,SAAS,qBAAuBxQ,EAAEwB,EAAE4G,QAAQ4L,SAASxD,SAAS,sBAC5EhH,KAAKqc,OAGP,IAAIzd,EAASpI,EAAEwB,EAAE4G,QAAQ2E,QAAQ,gBACjC,GAAqB,GAAjB3E,EAAO/B,OAAa,CACtB,GAAI+B,EAAOmc,GAAG,aAOZ,YANA/a,KAAKC,QAAQyJ,QAAQ,CACnBrS,KAAM,aACNmmB,KAAMxd,KAAKyd,SACXV,UAAW/c,KAAK+c,UAChBE,QAASjd,KAAKid,UAKlB,OAAQre,EAAO,GAAGikB,SAASC,eAC3B,IAAK,KACH,OAAQlkB,EAAO,GAAGmH,WAClB,IAAK,cACH/F,KAAK+d,SAAS,GACd,MACF,IAAK,OACL,IAAK,OACH,IAAIgF,EAAMrI,EAASkB,MAAM5b,KAAK+b,UAAUiH,SAAkC,QAAvBpkB,EAAO,GAAGmH,WAAuB,EAAI,GACxF,OAAQ/F,KAAK+b,UACb,KAAK,EACH/b,KAAKyd,SAAWzd,KAAKijB,SAASjjB,KAAKyd,SAAUsF,GAC7C,MACF,KAAK,EACH/iB,KAAKyd,SAAWzd,KAAKkjB,SAASljB,KAAKyd,SAAUsF,GAC7C,MACF,KAAK,EACH/iB,KAAKyd,SAAWzd,KAAKmjB,UAAUnjB,KAAKyd,SAAUsF,GAC9C,MACF,KAAK,EACL,KAAK,EACH/iB,KAAKyd,SAAWzd,KAAKojB,SAASpjB,KAAKyd,SAAUsF,GAG/C/iB,KAAKqgB,OACL,MACF,IAAK,QACH,IAAI7C,EAAO,IAAItK,KACfsK,EAAOvD,EAAQuD,EAAKwE,cAAexE,EAAK0E,WAAY1E,EAAKkB,UAAWlB,EAAK6F,WAAY7F,EAAK8F,aAAc9F,EAAK+F,cAE7GvjB,KAAK+b,SAAW/b,KAAK6b,cACrB7b,KAAK+d,SAAS,GACd/d,KAAKwjB,SAAShG,GAGhB,MACF,IAAK,OACH,IAAK5e,EAAOmc,GAAG,aAAc,CAC3B,GAAInc,EAAOmc,GAAG,UACZ,GAAqB,IAAjB/a,KAAKyb,QAAe,CACtB,IAAIiF,EAAQ9hB,EAAO4L,SAASnC,KAAK,QAAQyE,MAAMlO,IAAW,EACtD4hB,EAAOxgB,KAAKyd,SAASgD,iBACrBiB,EAAM,EACNb,EAAQ7gB,KAAKyd,SAASqD,cACtBC,EAAU/gB,KAAKyd,SAASuD,gBACxB/H,EAAUjZ,KAAKyd,SAASgG,gBAC5BzjB,KAAKwjB,SAASvJ,EAAQuG,EAAME,EAAOgB,EAAKb,EAAOE,EAAS9H,EAAS,GACnE,KAAO,CACLjZ,KAAKyd,SAASsB,WAAW,GACrB2B,EAAQ9hB,EAAO4L,SAASnC,KAAK,QAAQyE,MAAMlO,GAC/CoB,KAAKyd,SAASiG,YAAYhD,GAC1B1gB,KAAKC,QAAQyJ,QAAQ,CACnBrS,KAAM,cACNmmB,KAAMxd,KAAKyd,UAEf,MACK,GAAI7e,EAAOmc,GAAG,SACnB,GAAqB,IAAjB/a,KAAKyb,QAAe,CAClB+E,EAAOzI,SAASnZ,EAAOiJ,OAAQ,KAAO,EACtC6Y,EAAQ,EACRgB,EAAM,EACNb,EAAQ7gB,KAAKyd,SAASqD,cACtBC,EAAU/gB,KAAKyd,SAASuD,gBACxB/H,EAAUjZ,KAAKyd,SAASgG,gBAC5BzjB,KAAKwjB,SAASvJ,EAAQuG,EAAME,EAAOgB,EAAKb,EAAOE,EAAS9H,EAAS,GACnE,KAAO,CACLjZ,KAAKyd,SAASsB,WAAW,GACrByB,EAAOzI,SAASnZ,EAAOiJ,OAAQ,KAAO,EAC1C7H,KAAKyd,SAASkG,eAAenD,GAC7BxgB,KAAKC,QAAQyJ,QAAQ,CACnBrS,KAAM,aACNmmB,KAAMxd,KAAKyd,UAEf,MACK,GAAI7e,EAAOmc,GAAG,SAAU,CACzB8F,EAAQ9I,SAASnZ,EAAOiJ,OAAQ,KAAO,EACvC2Y,EAAOxgB,KAAKyd,SAASgD,iBACrBC,EAAQ1gB,KAAKyd,SAASkD,cACtBe,EAAM1hB,KAAKyd,SAASkB,aACpBoC,EAAU/gB,KAAKyd,SAASuD,gBACxB/H,EAAUjZ,KAAKyd,SAASgG,gBAC5BzjB,KAAKwjB,SAASvJ,EAAQuG,EAAME,EAAOgB,EAAKb,EAAOE,EAAS9H,EAAS,GACnE,MAAO,GAAIra,EAAOmc,GAAG,WAAY,CAC3BgG,EAAUhJ,SAASnZ,EAAOiJ,OAAO+b,OAAOhlB,EAAOiJ,OAAOmL,QAAQ,KAAO,GAAI,KAAO,EAChFwN,EAAOxgB,KAAKyd,SAASgD,iBACrBC,EAAQ1gB,KAAKyd,SAASkD,cACtBe,EAAM1hB,KAAKyd,SAASkB,aACpBkC,EAAQ7gB,KAAKyd,SAASqD,cACtB7H,EAAUjZ,KAAKyd,SAASgG,gBAC5BzjB,KAAKwjB,SAASvJ,EAAQuG,EAAME,EAAOgB,EAAKb,EAAOE,EAAS9H,EAAS,GACnE,CAGA,GAAqB,GAAjBjZ,KAAK+b,SAAe,CAGtB,IAAI8H,EAAc7jB,KAAK+b,SACvB/b,KAAK+d,UAAU,GACf/d,KAAKqgB,OACDwD,GAAe7jB,KAAK+b,UAAY/b,KAAKwc,WACvCxc,KAAKqc,MAET,MACErc,KAAKqgB,OACDrgB,KAAKwc,WACPxc,KAAKqc,MAGX,CACA,MACF,IAAK,KAGH,GAAIzd,EAAOmc,GAAG,UAAYnc,EAAOmc,GAAG,aAAc,CAC5C2G,EAAM3J,SAASnZ,EAAOiJ,OAAQ,KAAO,EACrC2Y,EAAOxgB,KAAKyd,SAASgD,iBACrBC,EAAQ1gB,KAAKyd,SAASkD,cACtBE,EAAQ7gB,KAAKyd,SAASqD,cACtBC,EAAU/gB,KAAKyd,SAASuD,gBACxB/H,EAAUjZ,KAAKyd,SAASgG,gBACxB7kB,EAAOmc,GAAG,QACE,IAAV2F,GACFA,EAAQ,GACRF,GAAQ,GAERE,GAAS,EAEF9hB,EAAOmc,GAAG,UACN,IAAT2F,GACFA,EAAQ,EACRF,GAAQ,GAERE,GAAS,GAGb1gB,KAAKwjB,SAASvJ,EAAQuG,EAAME,EAAOgB,EAAKb,EAAOE,EAAS9H,EAAS,GACnE,CAGI4K,EAAc7jB,KAAK+b,SAGvB/b,KAAK+d,UAAU,GAGf/d,KAAKqgB,OACDwD,GAAe7jB,KAAK+b,UAAY/b,KAAKwc,WACvCxc,KAAKqc,OAIX,CACF,EAEAmH,SAAU,SAAShG,EAAMsG,GAYvB,IAAI7jB,EAVC6jB,GAAkB,QAATA,IACb9jB,KAAKwd,KAAOA,GACRsG,GAAkB,QAATA,IACb9jB,KAAKyd,SAAWD,GACjBxd,KAAKqgB,OACLrgB,KAAK2d,WACL3d,KAAKC,QAAQyJ,QAAQ,CACnBrS,KAAM,aACNmmB,KAAMxd,KAAKwd,OAGTxd,KAAK8a,QACP7a,EAAUD,KAAKC,QACND,KAAKgb,YACd/a,EAAUD,KAAKC,QAAQoI,KAAK,UAE1BpI,IACFA,EAAQkJ,SACJnJ,KAAKwc,UAIb,EAEAyG,SAAU,SAASzF,EAAMuF,GACvB,IAAKA,EAAM,OAAOvF,EAClB,IAAIuG,EAAW,IAAI7Q,KAAKsK,EAAK4B,WAG7B,OAFA2D,EAAMA,EAAM,EAAI,GAAK,EACrBgB,EAASC,YAAYD,EAASjD,cAAgBiC,GACvCgB,CACT,EAEAb,SAAU,SAAS1F,EAAMuF,GACvB,IAAKA,EAAM,OAAOvF,EAClB,IAAIuG,EAAW,IAAI7Q,KAAKsK,EAAK4B,WAG7B,OAFA2D,EAAMA,EAAM,EAAI,GAAK,EACrBgB,EAAShF,WAAWgF,EAASpF,aAAeoE,GACrCgB,CACT,EAEAZ,UAAW,SAAS3F,EAAMuF,GACxB,IAAKA,EAAM,OAAOvF,EAClB,IAIIyG,EAAWxf,EAJXsf,EAAW,IAAI7Q,KAAKsK,EAAK4B,WACzBsC,EAAMqC,EAASpF,aACf+B,EAAQqD,EAASpD,cACjBuD,EAAM9Q,KAAK+Q,IAAIpB,GAGnB,GADAA,EAAMA,EAAM,EAAI,GAAK,EACV,GAAPmB,EACFzf,GAAe,GAARse,EAGH,WACA,OAAOgB,EAASpD,eAAiBD,CACnC,EAGE,WACA,OAAOqD,EAASpD,eAAiBsD,CACnC,EACFA,EAAYvD,EAAQqC,EACpBgB,EAASL,YAAYO,IAEjBA,EAAY,GAAKA,EAAY,MAChCA,GAAaA,EAAY,IAAM,QAC3B,CAEL,IAAK,IAAIvrB,EAAI,EAAGA,EAAIwrB,EAAKxrB,IAExBqrB,EAAW/jB,KAAKmjB,UAAUY,EAAUhB,GAErCkB,EAAYF,EAASpD,cACrBoD,EAAShF,WAAW2C,GACpBjd,EAAO,WACL,OAAOwf,GAAaF,EAASpD,aAC/B,CACF,CAGA,KAAOlc,KACLsf,EAAShF,aAAa2C,GACtBqC,EAASL,YAAYO,GAEvB,OAAOF,CACT,EAEAX,SAAU,SAAS5F,EAAMuF,GACvB,OAAO/iB,KAAKmjB,UAAU3F,EAAY,GAANuF,EAC9B,EAEAqB,gBAAiB,SAAS5G,GACxB,OAAOA,GAAQxd,KAAK+c,WAAaS,GAAQxd,KAAKid,OAChD,EAEAmB,QAAS,SAASpmB,GAChB,IAAKgI,KAAKyc,mBACR,OAAO,EAET,GAAIzc,KAAKyG,OAAOsU,GAAG,kBACA,IAAb/iB,EAAEqsB,SACLrkB,KAAKoc,WAFR,CAKA,IACS2G,EACLuB,EAASC,EAqEPtkB,EAvEFukB,GAAc,EAGlB,OAAQxsB,EAAEqsB,SACV,KAAK,GAsDL,KAAK,GACHrkB,KAAKqc,OACLrkB,EAAEpB,iBACF,MArDF,KAAK,GACL,KAAK,GACH,IAAKoJ,KAAKyc,mBAAqB,MAC/BsG,EAAmB,IAAb/qB,EAAEqsB,SAAiB,EAAI,EACzBrsB,EAAEysB,SACJH,EAAUtkB,KAAKojB,SAASpjB,KAAKwd,KAAMuF,GACnCwB,EAAcvkB,KAAKojB,SAASpjB,KAAKyd,SAAUsF,IAClC/qB,EAAE0sB,UACXJ,EAAUtkB,KAAKmjB,UAAUnjB,KAAKwd,KAAMuF,GACpCwB,EAAcvkB,KAAKmjB,UAAUnjB,KAAKyd,SAAUsF,MAE5CuB,EAAU,IAAIpR,KAAKlT,KAAKwd,KAAK4B,YACrBL,WAAW/e,KAAKwd,KAAKmB,aAAeoE,IAC5CwB,EAAc,IAAIrR,KAAKlT,KAAKyd,SAAS2B,YACzBL,WAAW/e,KAAKyd,SAASkB,aAAeoE,IAElD/iB,KAAKokB,gBAAgBE,KACvBtkB,KAAKwd,KAAO8G,EACZtkB,KAAKyd,SAAW8G,EAChBvkB,KAAK2d,WACL3d,KAAK8d,SACL9lB,EAAEpB,iBACF4tB,GAAc,GAEhB,MACF,KAAK,GACL,KAAK,GACH,IAAKxkB,KAAKyc,mBAAqB,MAC/BsG,EAAmB,IAAb/qB,EAAEqsB,SAAiB,EAAI,EACzBrsB,EAAEysB,SACJH,EAAUtkB,KAAKojB,SAASpjB,KAAKwd,KAAMuF,GACnCwB,EAAcvkB,KAAKojB,SAASpjB,KAAKyd,SAAUsF,IAClC/qB,EAAE0sB,UACXJ,EAAUtkB,KAAKmjB,UAAUnjB,KAAKwd,KAAMuF,GACpCwB,EAAcvkB,KAAKmjB,UAAUnjB,KAAKyd,SAAUsF,MAE5CuB,EAAU,IAAIpR,KAAKlT,KAAKwd,KAAK4B,YACrBL,WAAW/e,KAAKwd,KAAKmB,aAAqB,EAANoE,IAC5CwB,EAAc,IAAIrR,KAAKlT,KAAKyd,SAAS2B,YACzBL,WAAW/e,KAAKyd,SAASkB,aAAqB,EAANoE,IAElD/iB,KAAKokB,gBAAgBE,KACvBtkB,KAAKwd,KAAO8G,EACZtkB,KAAKyd,SAAW8G,EAChBvkB,KAAK2d,WACL3d,KAAK8d,SACL9lB,EAAEpB,iBACF4tB,GAAc,GAEhB,MAKF,KAAK,EACHxkB,KAAKqc,OAGP,GAAImI,EACFxkB,KAAKC,QAAQyJ,QAAQ,CACnBrS,KAAM,aACNmmB,KAAMxd,KAAKwd,OAGTxd,KAAK8a,QACP7a,EAAUD,KAAKC,QACND,KAAKgb,YACd/a,EAAUD,KAAKC,QAAQoI,KAAK,UAE1BpI,GACFA,EAAQkJ,QA/EZ,CAkFF,EAEA4U,SAAU,SAASgF,GAEjB,GAAIA,EAAK,CACP,IAAI4B,EAAcvR,KAAKwR,IAAI,EAAGxR,KAAKyR,IAAInK,EAASkB,MAAM/e,OAAS,EAAGmD,KAAK+b,SAAWgH,IAC9E4B,GAAe3kB,KAAKyb,SAAWkJ,GAAe3kB,KAAK2b,UACrD3b,KAAK+b,SAAW4I,EAEpB,CAYA3kB,KAAKyG,OAAO4B,KAAK,QAAQgU,OAAO7Z,OAAO,eAADxL,OAAgB0jB,EAASkB,MAAM5b,KAAK+b,UAAU+F,UAAWpJ,IAAI,UAAW,SAC9G1Y,KAAKmf,iBACP,EAEA2F,eAAgB,SAAStH,GACvBxd,KAAKwd,KAAOA,EACZxd,KAAKyd,SAAWD,EAChBxd,KAAKqgB,MACP,EAEA1jB,MAAO,SAAS3E,GACdgI,KAAKwjB,SAAS,KAAM,OACtB,GAGFhtB,EAAE8J,GAAG8K,YAAc,SAAS2Z,GAC1B,IAAI3iB,EAAO4J,MAAK3J,WAAC,EAAGzC,WAEpB,OADAwC,EAAK4iB,QACEhlB,KAAKuG,MAAK,WACf,IAMsE0e,EANlEC,EAAQ1uB,EAAEwJ,MACV4B,EAAOsjB,EAAMtjB,KAAK,cAClBjC,EAA4B,WAAlB3E,EAAO+pB,IAAuBA,GACvCnjB,GACHsjB,EAAMtjB,KAAK,aAAeA,EAAO,IAAIuY,EAAWna,KAAMxJ,EAAE2uB,OAAO,CAAC,EAAG3uB,EAAE8J,GAAG8K,YAAYga,SAAUzlB,KAE1E,kBAAXolB,GAA+C,oBAAjBnjB,EAAKmjB,MAC5CE,EAAArjB,GAAKmjB,GAAO1iB,MAAA4iB,EAAAI,EAAIjjB,GAEpB,GACF,EAEA5L,EAAE8J,GAAG8K,YAAYga,SAAW,CAC1BlK,SAAU,SAASsC,GACjB,MAAO,EACT,GAEFhnB,EAAE8J,GAAG8K,YAAYtL,YAAcqa,EAC/B,IAAI9O,EAAQ7U,EAAE8J,GAAG8K,YAAYC,MAAQ,CACnC,GAAM,CACJ0I,KAAM,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,WAAY,UACrFC,UAAW,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC7DC,QAAS,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,MACpDC,OAAQ,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OAAQ,SAAU,YAAa,UAAW,WAAY,YACvHC,YAAa,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAC3FC,MAAO,QACPkN,YAAa,YAIb5G,EAAW,CACbkB,MAAO,CAAC,CACNkG,QAAS,UACTwD,OAAQ,QACRtC,QAAS,GACR,CACDlB,QAAS,QACTwD,OAAQ,OACRtC,QAAS,GACR,CACDlB,QAAS,OACTwD,OAAQ,QACRtC,QAAS,GACR,CACDlB,QAAS,SACTwD,OAAQ,WACRtC,QAAS,GACR,CACDlB,QAAS,QACTwD,OAAQ,WACRtC,QAAS,KAEXuC,WAAY,SAAS/E,GACnB,OAAUA,EAAO,IAAM,GAAOA,EAAO,MAAQ,GAAQA,EAAO,MAAQ,CACtE,EACAmB,eAAgB,SAASnB,EAAME,GAC7B,MAAO,CAAC,GAAKhG,EAAS6K,WAAW/E,GAAQ,GAAK,GAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAIE,EAC7F,EACA8E,WAAY,qCACZC,eAAgB,yCAChB9K,YAAa,SAASrP,GAGpB,IAAIoa,EAAapa,EAAOX,QAAQ3K,KAAKwlB,WAAY,MAAMjL,MAAM,MACzDoL,EAAQra,EAAO4F,MAAMlR,KAAKwlB,YAC9B,IAAKE,IAAeA,EAAW7oB,SAAW8oB,GAA0B,IAAjBA,EAAM9oB,OACvD,MAAM,IAAIxB,MAAM,wBAGlB,OADA2E,KAAK4a,WAAatP,EACX,CACLoa,WAAYA,EACZC,MAAOA,EAEX,EACAjI,UAAW,SAASF,EAAMlS,EAAQN,GAChC,GAAIwS,aAAgBtK,KAAO,OAAO,IAAIA,KAAKsK,EAAK4B,UAAuC,IAA3B5B,EAAKqB,qBAUjE,GATI,4BAA4Bpa,KAAK+Y,KACnClS,EAAStL,KAAK2a,YAAY,eAExB,gDAAgDlW,KAAK+Y,KACvDlS,EAAStL,KAAK2a,YAAY,qBAExB,iEAAiElW,KAAK+Y,KACxElS,EAAStL,KAAK2a,YAAY,wBAExB,wCAAwClW,KAAK+Y,GAAO,CACtD,IAEUuF,EAFN6C,EAAU,oBACVD,EAAQnI,EAAKtM,MAAM,sBAEvBsM,EAAO,IAAItK,KACX,IAAK,IAAIxa,EAAI,EAAGA,EAAIitB,EAAM9oB,OAAQnE,IAGhC,OAFAmtB,EAAOD,EAAQE,KAAKH,EAAMjtB,IAC1BqqB,EAAMhL,SAAS8N,EAAK,IACZA,EAAK,IACb,IAAK,IACHrI,EAAKuB,WAAWvB,EAAKmB,aAAeoE,GACpC,MACF,IAAK,IACHvF,EAAOuI,eAAe3tB,UAAU+qB,UAAUtpB,KAAKksB,eAAe3tB,UAAWolB,EAAMuF,GAC/E,MACF,IAAK,IACHvF,EAAKuB,WAAWvB,EAAKmB,aAAqB,EAANoE,GACpC,MACF,IAAK,IACHvF,EAAOuI,eAAe3tB,UAAUgrB,SAASvpB,KAAKksB,eAAe3tB,UAAWolB,EAAMuF,GAIlF,OAAO9I,EAAQuD,EAAKiD,iBAAkBjD,EAAKmD,cAAenD,EAAKmB,aAAcnB,EAAKsD,cAAetD,EAAKwD,gBAAiBxD,EAAKiG,gBAC9H,CACIkC,EAAQnI,GAAQA,EAAKtM,MAAMlR,KAAKylB,iBAAmB,GACnDjI,EAAO,IAAItK,KADf,IA0CInQ,EAAKijB,EAAUH,EAxCfI,EAAS,CAAC,EACVC,EAAgB,CAAC,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,OAAQ,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,MAC3FC,EAAc,CACZC,GAAI,SAAS9rB,EAAGE,GACd,OAAOF,EAAE0pB,YAAYxpB,EACvB,EACAV,EAAG,SAASQ,EAAGE,GACb,OAAOF,EAAE0pB,YAAYxpB,EACvB,EACA6rB,GAAI,SAAS/rB,EAAGE,GACd,OAAOF,EAAEgsB,cAAc9rB,EACzB,EACA9B,EAAG,SAAS4B,EAAGE,GACb,OAAOF,EAAEgsB,cAAc9rB,EACzB,EACA+rB,GAAI,SAASjsB,EAAGE,GACd,OAAOF,EAAEksB,cAAchsB,EACzB,EACAP,EAAG,SAASK,EAAGE,GACb,OAAOF,EAAEksB,cAAchsB,EACzB,EACAisB,KAAM,SAASnsB,EAAGE,GAChB,OAAOF,EAAEqpB,eAAenpB,EAC1B,EACAksB,GAAI,SAASpsB,EAAGE,GACd,OAAOF,EAAEqpB,eAAe,IAAOnpB,EACjC,EACAmsB,EAAG,SAASrsB,EAAGE,GAEb,IADAA,GAAK,EACEA,EAAI,GAAIA,GAAK,GAGpB,IAFAA,GAAK,GACLF,EAAEopB,YAAYlpB,GACPF,EAAEqmB,eAAiBnmB,GACzBF,EAAEykB,WAAWzkB,EAAEqkB,aAAe,GAC/B,OAAOrkB,CACT,EACAA,EAAG,SAASssB,EAAGpsB,GACb,OAAOosB,EAAE7H,WAAWvkB,EACtB,GAMN,GAHA2rB,EAAYU,EAAIV,EAAYW,GAAKX,EAAYY,GAAKZ,EAAYQ,EAC9DR,EAAYa,GAAKb,EAAY7rB,EAC7BkjB,EAAOvD,EAAQuD,EAAKwE,cAAexE,EAAK0E,WAAY1E,EAAKkB,UAAW,EAAG,EAAG,GACtEiH,EAAM9oB,QAAUyO,EAAOqa,MAAM9oB,OAAQ,CAC9BnE,EAAI,EAAb,IAAK,IAAWuuB,EAAM3b,EAAOqa,MAAM9oB,OAAQnE,EAAIuuB,EAAKvuB,IAAK,CAGvD,GAFAqK,EAAMgV,SAAS4N,EAAMjtB,GAAI,IACzBmtB,EAAOva,EAAOqa,MAAMjtB,GAChBkE,MAAMmG,GACR,OAAQ8iB,GACR,IAAK,KACHG,EAAWxvB,EAAE6U,EAAML,GAAUkJ,QAAQ1R,QAAO,WAC1C,IAAImkB,EAAI3mB,KAAKnC,MAAM,EAAG8nB,EAAMjtB,GAAGmE,QAE/B,OAAO8pB,GADChB,EAAMjtB,GAAGmF,MAAM,EAAG8oB,EAAE9pB,OAE9B,IACAkG,EAAMvM,EAAE2rB,QAAQ6D,EAAS,GAAI3a,EAAML,GAAUkJ,QAAU,EACvD,MACF,IAAK,IACH8R,EAAWxvB,EAAE6U,EAAML,GAAUmJ,aAAa3R,QAAO,WAC/C,IAAImkB,EAAI3mB,KAAKnC,MAAM,EAAG8nB,EAAMjtB,GAAGmE,QAE/B,OAAO8pB,GADChB,EAAMjtB,GAAGmF,MAAM,EAAG8oB,EAAE9pB,OAE9B,IACAkG,EAAMvM,EAAE2rB,QAAQ6D,EAAS,GAAI3a,EAAML,GAAUmJ,aAAe,EAIhE8R,EAAOJ,GAAQ9iB,CACjB,CACK,IAAW9I,EAAhB,IAASvB,EAAI,EAAMA,EAAIwtB,EAAcrpB,OAAQnE,KAC3CuB,EAAIisB,EAAcxtB,MACTutB,IAAWrpB,MAAMqpB,EAAOhsB,KAChCksB,EAAYlsB,GAAGujB,EAAMyI,EAAOhsB,GAEjC,CACA,OAAOujB,CACT,EACA0B,WAAY,SAAS1B,EAAMlS,EAAQN,GACjC,GAAY,MAARwS,EACF,MAAO,GAET,IAAIza,EAAM,CACRjJ,EAAG0jB,EAAKsD,cACRpoB,EAAG8kB,EAAKwD,gBACR/mB,EAAGujB,EAAKiG,gBACRnpB,EAAGkjB,EAAKmB,aACRgI,EAAGnJ,EAAKmD,cAAgB,EACxBkG,EAAGxb,EAAML,GAAUmJ,YAAYqJ,EAAKmD,eACpCmG,GAAIzb,EAAML,GAAUkJ,OAAOsJ,EAAKmD,eAChC+F,GAAIlJ,EAAKiD,iBAAiByG,WAAWC,UAAU,GAC/CV,KAAMjJ,EAAKiD,kBAEb1d,EAAIqjB,IAAMrjB,EAAIjJ,EAAI,GAAK,IAAM,IAAMiJ,EAAIjJ,EACvCiJ,EAAIsjB,IAAMtjB,EAAIrK,EAAI,GAAK,IAAM,IAAMqK,EAAIrK,EACvCqK,EAAIwjB,IAAMxjB,EAAI9I,EAAI,GAAK,IAAM,IAAM8I,EAAI9I,EACvC8I,EAAIikB,IAAMjkB,EAAIzI,EAAI,GAAK,IAAM,IAAMyI,EAAIzI,EACvCyI,EAAIgkB,IAAMhkB,EAAI4jB,EAAI,GAAK,IAAM,IAAM5jB,EAAI4jB,EACnCnJ,EAAO,GAEX,IAFA,IACI4J,EAAO5wB,EAAE2uB,OAAO,GAAI7Z,EAAOoa,YACtBhtB,EAAI,EAAGuuB,EAAM3b,EAAOqa,MAAM9oB,OAAQnE,EAAIuuB,EAAKvuB,IAC9C0uB,EAAKvqB,QACR2gB,EAAKhhB,KAAK4qB,EAAKpC,SAChBxH,EAAKhhB,KAAKuG,EAAIuI,EAAOqa,MAAMjtB,KAE7B,OAAO8kB,EAAK6E,KAAK,GACnB,EACA3G,gBAAiB,SAASK,GACxB,OAAQA,GACR,KAAK,EACL,IAAK,SACHA,EAAW,EACX,MACF,KAAK,EACL,IAAK,OACHA,EAAW,EACX,MACF,KAAK,EACL,IAAK,QACHA,EAAW,EACX,MACF,KAAK,EACL,IAAK,MACHA,EAAW,EACX,MACF,KAAK,EACL,IAAK,OACHA,EAAW,EAIb,OAAOA,CACT,EACAsL,aAAc,SAAS7b,EAAWC,GAAa,MAAQ,GAAAzU,OAAG,gCAE/BA,OAAGwU,EAAS,SAC/B,4CAA+C,oBAAAxU,OAC3ByU,EAAU,SAJiB,eAMpC,EACnB6b,aAAc,gDACdC,aAAc,8DAEhB7M,SAAoB,SAASlP,EAAWC,EAAY+P,GAAY,MAAQ,GAAAxkB,OAAG,4FAEnCA,OACtC0jB,EAAS2M,aAAa7b,EAAWC,IAAWzU,OAC3C0jB,EAAS4M,cAAYtwB,OACrB0jB,EAAS6M,aAAY,YALgD,uCAQhC,mCAAAvwB,OAEhC0jB,EAAS2M,aAAa7b,EAAWC,IAAWzU,OAC3C0jB,EAAS4M,cAAYtwB,OACrB0jB,EAAS6M,aAAY,YAZ0C,sCAejC,mCAAAvwB,OAE/B0jB,EAAS2M,aAAa7b,EAAWC,GAAW,mBAAAzU,OAE5C0jB,EAAS6M,aAAY,YAnB2C,wCAsB/B,kCAAAvwB,OAEjC0jB,EAAS2M,aAAa7b,EAAWC,IAAWzU,OAC3C0jB,EAAS4M,cAAYtwB,OACrB0jB,EAAS6M,aAAY,YA1B0C,uCA6BhC,kCAAAvwB,OAEhC0jB,EAAS2M,aAAa7b,EAAWC,IAAWzU,OAC3C0jB,EAAS4M,cAAYtwB,OACrB0jB,EAAS6M,aAAY,YAExB,SAAQ,2EAAAvwB,OACmEwkB,EAAS,QACpF,QAAS,GAEfhlB,EAAE8J,GAAG8K,YAAYsP,SAAWA,CAE9B,CAx4CE,CAw4CA9L,OAAOiF,uCCh5CC7Z,wOAAAA,EAAyT,WAAqC,OAAmB,SAAS9B,EAAEF,EAAEK,EAAEJ,GAAG,SAASM,EAAEG,EAAEsB,GAAG,IAAI3B,EAAEK,GAAG,CAAC,IAAIV,EAAEU,GAAG,CAAmE,GAAGM,EAAE,OAAOA,EAAEN,GAAE,GAAI,IAAIE,EAAE,IAAIyC,MAAM,uBAAuB3C,EAAE,KAAK,MAAME,EAAE4uB,KAAK,mBAAmB5uB,CAAC,CAAC,IAAIyB,EAAEhC,EAAEK,GAAG,CAAC+uB,QAAQ,CAAC,GAAGzvB,EAAEU,GAAG,GAAGmB,KAAKQ,EAAEotB,SAAQ,SAASvvB,GAAoB,OAAOK,EAAlBP,EAAEU,GAAG,GAAGR,IAAeA,EAAE,GAAEmC,EAAEA,EAAEotB,QAAQvvB,EAAEF,EAAEK,EAAEJ,EAAE,CAAC,OAAOI,EAAEK,GAAG+uB,OAAO,CAAC,IAAI,IAAIzuB,OAAE,EAAoCN,EAAE,EAAEA,EAAET,EAAE4E,OAAOnE,IAAIH,EAAEN,EAAES,IAAI,OAAOH,CAAC,CAA7b,CAA2c,CAAC,EAAE,CAAC,SAASmvB,EAAQC,EAAOF,GACv1B,aAEAtvB,OAAOK,eAAeivB,EAAS,aAAc,CAC3ChvB,OAAO,IAETgvB,EAAiB,aAAI,EAErBC,EAAQ,WAER,IAAIE,EAAiBC,EAAuBH,EAAQ,oBAEhDI,EAAqBD,EAAuBH,EAAQ,wBAEpDK,EAAgBF,EAAuBH,EAAQ,mBAE/CM,EAAiBH,EAAuBH,EAAQ,oBAEpD,SAASG,EAAuBI,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,EAAO,CAEhG,SAAShY,EAAepN,EAAKnK,GAAK,OAMlC,SAAyBmK,GAAO,GAAImJ,MAAMgG,QAAQnP,GAAM,OAAOA,CAAK,CAN3BslB,CAAgBtlB,IAIzD,SAA+BA,EAAKnK,GAAK,IAAI0vB,EAAO,GAAQC,GAAK,EAAUzB,GAAK,EAAW0B,OAAKnpB,EAAW,IAAM,IAAK,IAAiCopB,EAA7BC,EAAK3lB,EAAIlK,OAAOE,cAAmBwvB,GAAME,EAAKC,EAAGxsB,QAAQV,QAAoB8sB,EAAK5rB,KAAK+rB,EAAG9vB,QAAYC,GAAK0vB,EAAKvrB,SAAWnE,GAA3D2vB,GAAK,GAAkE,CAAE,MAAO/lB,GAAOskB,GAAK,EAAM0B,EAAKhmB,CAAK,CAAC,QAAW,IAAW+lB,GAAsB,MAAhBG,EAAW,QAAWA,EAAW,QAAK,CAAC,QAAW,GAAI5B,EAAI,MAAM0B,CAAI,CAAE,CAAE,OAAOF,CAAM,CAJvVK,CAAsB5lB,EAAKnK,IAE5F,WAA8B,MAAM,IAAIoD,UAAU,uDAAyD,CAFT4sB,EAAoB,CAUtH,SAAS/pB,EAAkBC,EAAQC,GAAS,IAAK,IAAInG,EAAI,EAAGA,EAAImG,EAAMhC,OAAQnE,IAAK,CAAE,IAAIoG,EAAaD,EAAMnG,GAAIoG,EAAW3F,WAAa2F,EAAW3F,aAAc,EAAO2F,EAAW1F,cAAe,EAAU,UAAW0F,IAAYA,EAAWzF,UAAW,GAAMlB,OAAOK,eAAeoG,EAAQE,EAAWL,IAAKK,EAAa,CAAE,CAI5T,IAkfI6pB,EAhfJ,WACE,SAAS/T,EAAQgU,GACf,IAyE+B3wB,EAzE3ByH,EAAQM,KAER6oB,EAAcD,EAAKnuB,OACnBA,OAAyB,IAAhBouB,EAAyB,KAAOA,EACzCC,EAAcF,EAAKG,OACnBA,OAAyB,IAAhBD,EAAyB,KAAOA,EACzCE,EAAmBJ,EAAK7R,YACxBA,OAAmC,IAArBiS,EAA8B,YAAcA,EAC1DC,EAAeL,EAAKlf,QACpBA,OAA2B,IAAjBuf,EAA0B,IAAMA,EAC1CC,EAAwBN,EAAKO,iBAC7BA,OAA6C,IAA1BD,GAA2CA,EAC9DE,EAAsBR,EAAKlT,eAC3BA,OAAyC,IAAxB0T,EAAiC,KAAOA,EACzDC,EAAwBT,EAAKtS,iBAC7BA,OAA6C,IAA1B+S,EAAmC,KAAOA,EAC7DC,EAAcV,EAAKnT,OACnBA,OAAyB,IAAhB6T,EAAyB,MAAQA,EAC1CC,EAAgBX,EAAKpT,SACrBA,OAA6B,IAAlB+T,EAA2B,QAAUA,EAChDC,EAAkBZ,EAAKa,WACvBA,OAAiC,IAApBD,EAA6B,KAAOA,EACjDE,EAAqBd,EAAKrT,cAC1BA,OAAuC,IAAvBmU,EAAgC,KAAOA,EACvDC,EAAuBf,EAAKrU,gBAC5BA,OAA2C,IAAzBoV,EAAkC,KAAOA,EAC3DC,EAAwBhB,EAAKiB,oBAC7BA,OAAgD,IAA1BD,GAA0CA,EAChEE,EAAmBlB,EAAK/R,YACxBA,OAAmC,IAArBiT,GAAsCA,EACpDC,EAAwBnB,EAAKoB,kBAC7BA,OAA8C,IAA1BD,EAAmC,KAAOA,EAC9DE,EAAoBrB,EAAKtT,aACzBA,OAAqC,IAAtB2U,GAAsCA,EACrDC,EAAwBtB,EAAKuB,kBAC7BA,OAA8C,IAA1BD,GAA2CA,EAC/DE,EAAkBxB,EAAKyB,WACvBA,OAAiC,IAApBD,EAA6B,CAAC,EAAIA,EAC/CE,EAAqB1B,EAAK9R,cAC1BA,OAAuC,IAAvBwT,EAAgC,KAAOA,EAqB3D,GAtEJ,SAAyBzqB,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIhE,UAAU,oCAAwC,CAmDpJiE,CAAgBC,KAAM4U,GAEtB5U,KAAKmpB,iBAAmBA,EACxBnpB,KAAKuqB,aAAe,EACpBvqB,KAAKsG,QAAU,CAAC,EAChBtG,KAAKwqB,YAAa,EAClBxqB,KAAKyW,UAAW,EAChBzW,KAAKuV,cAAgBA,EACrBvV,KAAK6W,YAAcA,EACnB7W,KAAKgqB,kBAAoBA,EACzBhqB,KAAKsV,aAAeA,EACpBtV,KAAKyqB,kBAAmB,EACxBzqB,KAAKmqB,kBAAoBA,EAErBnqB,KAAKmpB,mBACPzf,EAAU,GACVmN,GAAc,GAGZpc,EACFuF,KAAKypB,WAAa,CAAC,CAEjB/f,QAASA,EAETqf,OAAQA,EAERhS,YAAaA,EAEbrB,gBAAiBA,GAAkBd,EAAQ8V,uBAAuB3b,KAAK/O,MAEvEsW,kBAAmBA,GAAoB1B,EAAQ+V,yBAAyB5b,KAAK/O,MAE7EuU,iBAA2Btc,EAQzBsc,EAPiB,oBAANtc,EACFA,EAAE8W,KAAKrP,GAGT6U,GAAmB,WACxB,MAAO,EACT,EAAExF,KAAKrP,IAGT+V,OAAQA,EAERD,SAAUA,EAEV/a,OAAQA,EACRovB,oBAAqBA,EACrBQ,WAAYA,EACZvT,cAAeA,QAEZ,KAAI2S,EA0BT,MAAM,IAAIpuB,MAAM,sCAzBZ2E,KAAKmpB,kBAAkByB,QAAQC,KAAK,8DACxC7qB,KAAKypB,WAAaA,EAAW9hB,KAAI,SAAUhF,GACzC,MAAO,CACL+G,QAAS/G,EAAK+G,SAAWA,EACzBqf,OAAQpmB,EAAKomB,QAAUA,EACvBhS,YAAapU,EAAKoU,aAAeA,EACjCrB,gBAAiB/S,EAAK+S,gBAAkBd,EAAQ8V,uBAAuB3b,KAAKrP,GAC5E4W,kBAAmB3T,EAAK2T,kBAAoB1B,EAAQ+V,yBAAyB5b,KAAKrP,GAElF6U,gBAAiB,SAAUtc,GACzB,MAAiB,oBAANA,EACFA,EAAE8W,KAAKrP,GAGT,IACT,CANiB,CAMf6U,GACFkB,OAAQ9S,EAAK8S,QAAUA,EACvBD,SAAU7S,EAAK6S,UAAYA,EAC3B/a,OAAQkI,EAAKlI,OACbovB,oBAAqBlnB,EAAKknB,oBAC1BQ,WAAY1nB,EAAK0nB,YAAcA,EAC/BvT,cAAenU,EAAKmU,eAAiBA,EAEzC,GAGF,CAEA,IAAIiR,EAAuB,QAAE/nB,MAC7B,IAAI4nB,EAAwB,QAAE5nB,MAC9B,IAAI8nB,EAA4B,QAAE9nB,MAClC,IAAIgoB,EAAwB,QAAEhoB,KAChC,CAnIF,IAAsBF,EAAagE,EAAYC,EAif7C,OAjfoBjE,EAqIP8U,EArIgC7Q,EA0dzC,CAAC,CACHtF,IAAK,wBACLhG,MAAO,SAA+BkK,GACpC,MAAoB,qBAATA,EAA6B,KAEpC3C,KAAK2V,MAAMC,kBAAkB5V,KAAKsG,QAAQrG,SACrC,kCAAoCD,KAAKsG,QAAQmjB,WAAW/f,QAAU/G,EAAKoT,SAAS/V,KAAKsG,QAAQmjB,WAAWjU,WAAa,UAG3HxV,KAAKsG,QAAQmjB,WAAW/f,QAAU/G,EAAKoT,SAAS/V,KAAKsG,QAAQmjB,WAAWjU,SACjF,GACC,CACD/W,IAAK,0BACLhG,MAAO,SAAiCqyB,GACtC,OAAOA,EAAUC,MACnB,GACC,CACDtsB,IAAK,aACLhG,MAAO,WACL,MAAO,CAAC,WAAY,QACtB,KA9e+BqL,EAqIX,CAAC,CACrBrF,IAAK,WACLhG,MAAO,WACL,OAAOuH,KAAKypB,WAAW9hB,KAAI,SAAUyP,GACnC,OAAOA,EAAO1N,OAChB,GACF,GACC,CACDjL,IAAK,SACLhG,MAAO,SAAgBgH,GACrB,IAAKA,EACH,MAAM,IAAIpE,MAAM,kDASlB,GALsB,qBAAXwY,QAA0BpU,aAAcoU,SACjDpU,EAAKA,EAAGqI,OAINrI,EAAGzC,cAAgBguB,UAAYvrB,EAAGzC,cAAgBiuB,gBAAkBxrB,EAAGzC,cAAgBgP,MAGzF,IAFA,IAAInP,EAAS4C,EAAG5C,OAEPnE,EAAI,EAAGA,EAAImE,IAAUnE,EAC5BsH,KAAKkrB,QAAQzrB,EAAG/G,SAGlBsH,KAAKkrB,QAAQzrB,EAEjB,GACC,CACDhB,IAAK,UACLhG,MAAO,SAAiBgH,GAClBA,EAAG0rB,aAAa,iBAClBP,QAAQC,KAAK,gCAAkCprB,EAAGojB,UAGpD7iB,KAAKorB,eAAe3rB,GACpBO,KAAKkD,OAAO6L,KAAKtP,GACjBA,EAAG0F,aAAa,gBAAgB,EAClC,GACC,CACD1G,IAAK,iBACLhG,MAAO,SAAwBwH,GAC7B,IAAwD,IAApD2U,EAAQyW,aAAarY,QAAQ/S,EAAQ4iB,UAAkB,CACzD,IAAI5iB,EAAQqrB,gBAGV,MAAM,IAAIjwB,MAAM,4BAA8B4E,EAAQ4iB,UAFtD5iB,EAAQqrB,iBAAkB,CAI9B,CACF,GACC,CACD7sB,IAAK,aACLhG,MAAO,WACL,IAAI8yB,EAAUvrB,KAAK2V,MAAMgC,cAAchT,cAAc,OACjD6mB,EAAKxrB,KAAK2V,MAAMgC,cAAchT,cAAc,MAMhD,OALA4mB,EAAQxlB,UAAY,oBACpBwlB,EAAQpmB,aAAa,gBAAgB,QACrCqmB,EAAGrmB,aAAa,KAAK,WACrBomB,EAAQ/lB,YAAYgmB,GAEhBxrB,KAAKuV,cACAvV,KAAKuV,cAAc/P,YAAY+lB,GAGjCvrB,KAAK2V,MAAMgC,cAAcD,KAAKlS,YAAY+lB,EACnD,GACC,CACD9sB,IAAK,cACLhG,MAAO,SAAqBwH,EAASwrB,GACnC,IAAI3mB,EAAS9E,KAGb,IAAIA,KAAKyW,UAAYzW,KAAKsG,QAAQrG,UAAYA,GAAWD,KAAKsG,QAAQolB,cAAgB1rB,KAAK2rB,2BAA3F,CAIA3rB,KAAK2rB,2BAA6B3rB,KAAKsG,QAAQolB,YAE1C1rB,KAAKyX,OACRzX,KAAKyX,KAAOzX,KAAK4rB,aACjB3rB,EAAQ4rB,YAAc7rB,KAAKyX,KAC3BzX,KAAK8rB,WAAW/c,KAAK/O,KAAKyX,OAG5BzX,KAAKyW,UAAW,EAChBzW,KAAKuqB,aAAe,EAEfvqB,KAAKsG,QAAQolB,cAChB1rB,KAAKsG,QAAQolB,YAAc,IAG7B,IAAIK,EAAgB,SAAuBtxB,GAEzC,GAAKqK,EAAO2R,SAAZ,CAIA,IAAIuV,EAAQlnB,EAAO8L,OAAOpO,OAAOsC,EAAOwB,QAAQolB,YAAajxB,EAAQ,CACnEwxB,IAAKnnB,EAAOwB,QAAQmjB,WAAWY,WAAW4B,KAAO,SACjDnX,KAAMhQ,EAAOwB,QAAQmjB,WAAWY,WAAWvV,MAAQ,UACnDoX,KAAMpnB,EAAOwB,QAAQmjB,WAAWY,WAAW6B,KAC3CC,QAAS,SAAiB1sB,GACxB,GAAgD,kBAArCqF,EAAOwB,QAAQmjB,WAAWhU,OACnC,OAAOhW,EAAGqF,EAAOwB,QAAQmjB,WAAWhU,QAC/B,GAAgD,oBAArC3Q,EAAOwB,QAAQmjB,WAAWhU,OAC1C,OAAO3Q,EAAOwB,QAAQmjB,WAAWhU,OAAOhW,EAAIqF,EAAOwB,QAAQolB,aAE3D,MAAM,IAAIrwB,MAAM,+DAEpB,IAGEyJ,EAAOwB,QAAQmjB,WAAW3S,gBAC5BkV,EAAQA,EAAMnuB,MAAM,EAAGiH,EAAOwB,QAAQmjB,WAAW3S,gBAGnDhS,EAAOwB,QAAQ8lB,cAAgBJ,EAE/B,IAAIR,EAAK1mB,EAAO2S,KAAKpS,cAAc,MAInC,GAFAP,EAAO6Q,MAAM0W,oBAAoBZ,IAE5BO,EAAMnvB,OAAQ,CACjB,IAAIyvB,EAAe,IAAIC,YAAY,mBAAoB,CACrDtoB,OAAQa,EAAO2S,OAWjB,OARA3S,EAAOwB,QAAQrG,QAAQusB,cAAcF,QAEoB,oBAA9CxnB,EAAOwB,QAAQmjB,WAAWlV,kBAAmCzP,EAAOwB,QAAQmjB,WAAWlV,oBAAsBzP,EAAOwB,QAAQmjB,WAAWlV,gBAChJzP,EAAO2nB,WAE8C,oBAA9C3nB,EAAOwB,QAAQmjB,WAAWlV,gBAAiCiX,EAAG3mB,UAAYC,EAAOwB,QAAQmjB,WAAWlV,kBAAoBiX,EAAG3mB,UAAYC,EAAOwB,QAAQmjB,WAAWlV,gBAI5K,CAEAiX,EAAG3mB,UAAY,GAEf,IAAI6nB,EAAW5nB,EAAO6Q,MAAMgC,cAAcgV,yBAE1CX,EAAMpxB,SAAQ,SAAU+H,EAAMmK,GAC5B,IAAI8f,EAAK9nB,EAAO6Q,MAAMgC,cAAchT,cAAc,MAClDioB,EAAGznB,aAAa,OAAQ,UACxBynB,EAAGznB,aAAa,aAAc2H,GAC9B8f,EAAGlpB,iBAAiB,aAAa,SAAU1L,GACzC,IACI60B,EAAwB5c,EADDnL,EAAOgoB,cAAc90B,EAAE4G,QACe,GAE7DkO,GADK+f,EAAsB,GACnBA,EAAsB,IAEd,IAAhB70B,EAAE+0B,WACJjoB,EAAO5B,OAAO8pB,YAAYlgB,EAE9B,IAEIhI,EAAOylB,eAAiBzd,IAC1B8f,EAAG7mB,UAAYjB,EAAOwB,QAAQmjB,WAAW1S,aAG3C6V,EAAG/nB,UAAYC,EAAOwB,QAAQmjB,WAAWnT,iBAAiB3T,GAC1D+pB,EAASlnB,YAAYonB,EACvB,IACApB,EAAGhmB,YAAYknB,EArEf,CAsEF,EAE8C,oBAAnC1sB,KAAKsG,QAAQmjB,WAAWhvB,OACjCuF,KAAKsG,QAAQmjB,WAAWhvB,OAAOuF,KAAKsG,QAAQolB,YAAaK,GAEzDA,EAAc/rB,KAAKsG,QAAQmjB,WAAWhvB,OAhGxC,CAkGF,GACC,CACDgE,IAAK,gBACLhG,MAAO,SAAuBgH,GAC5B,IAAKA,EAAI,MAAO,GAChB,IAAIqN,EAAQrN,EAAGwtB,aAAa,cAC5B,OAAQngB,EAA4C,CAACrN,EAAIqN,GAAzC9M,KAAK8sB,cAAcrtB,EAAG6H,WACxC,GACC,CACD7I,IAAK,wBACLhG,MAAO,SAA+BwH,EAASitB,GACzCjtB,IAAYxJ,SAAS02B,eACvBntB,KAAKotB,gBAAgBntB,GAGvBD,KAAKsG,QAAQmjB,WAAazpB,KAAKypB,WAAWyD,GAAmB,GAC7DltB,KAAKsG,QAAQ+mB,iBAAkB,EAC/BrtB,KAAKsG,QAAQrG,QAAUA,EACnBA,EAAQ2V,kBAAmB5V,KAAKstB,mBAAmBttB,KAAKsG,QAAQmjB,WAAW/f,SAAc1J,KAAKutB,cAActtB,EAASD,KAAKsG,QAAQmjB,WAAW/f,SACjJ1J,KAAKwtB,YAAYvtB,EACnB,GAEC,CACDxB,IAAK,kBACLhG,MAAO,SAAyBgH,GAG9B,GAFAA,EAAGqG,QAE+B,oBAAvB8I,OAAO6e,cAA8D,oBAAxBh3B,SAASi3B,YAA4B,CAC3F,IAAI/X,EAAQlf,SAASi3B,cACrB/X,EAAMgY,mBAAmBluB,GACzBkW,EAAMiY,UAAS,GACf,IAAIC,EAAMjf,OAAO6e,eACjBI,EAAIC,kBACJD,EAAIE,SAASpY,EACf,MAAO,GAA4C,oBAAjClf,SAASihB,KAAKsW,gBAAgC,CAC9D,IAAIC,EAAYx3B,SAASihB,KAAKsW,kBAC9BC,EAAUC,kBAAkBzuB,GAC5BwuB,EAAUL,UAAS,GACnBK,EAAUE,QACZ,CACF,GAEC,CACD1vB,IAAK,qBACLhG,MAAO,SAA4BoP,GACjC,IAAIgmB,EAAKlY,GAETA,GADAkY,EAAMjf,OAAO6e,gBACDW,WAAW,IACjBC,iBACN,IAAIC,EAAW73B,SAAS83B,eAAe1mB,GACvC8N,EAAM6Y,WAAWF,GACjB3Y,EAAMgY,mBAAmBW,GACzB3Y,EAAMiY,UAAS,GACfC,EAAIC,kBACJD,EAAIE,SAASpY,EACf,GAEC,CACDlX,IAAK,gBACLhG,MAAO,SAAuBg2B,EAAU5mB,GACtC,IAAI6mB,EAAYD,EAASxO,UACrB0O,EAAWF,EAASG,eACpBC,EAAQJ,EAASh2B,MAAM0uB,UAAU,EAAGwH,GACpCG,EAAOL,EAASh2B,MAAM0uB,UAAUsH,EAASM,aAAcN,EAASh2B,MAAMoE,QAC1E4xB,EAASh2B,MAAQo2B,EAAQhnB,EAAOinB,EAChCH,GAAsB9mB,EAAKhL,OAC3B4xB,EAASG,eAAiBD,EAC1BF,EAASM,aAAeJ,EACxBF,EAAS3oB,QACT2oB,EAASxO,UAAYyO,CACvB,GACC,CACDjwB,IAAK,WACLhG,MAAO,WACDuH,KAAKyX,OACPzX,KAAKyX,KAAKrU,MAAM4rB,QAAU,iBAC1BhvB,KAAKyW,UAAW,EAChBzW,KAAKuqB,aAAe,EACpBvqB,KAAKsG,QAAU,CAAC,EAEpB,GACC,CACD7H,IAAK,oBACLhG,MAAO,SAA2BqU,EAAO6C,GAEvC,GAAqB,kBADrB7C,EAAQiL,SAASjL,MACgBlQ,MAAMkQ,GAAvC,CACA,IAAInK,EAAO3C,KAAKsG,QAAQ8lB,cAActf,GAClCpE,EAAU1I,KAAKsG,QAAQmjB,WAAW/T,eAAe/S,GACrC,OAAZ+F,GAAkB1I,KAAKivB,YAAYvmB,EAASiH,EAAehN,EAHV,CAIvD,GACC,CACDlE,IAAK,cACLhG,MAAO,SAAqBiQ,EAASiH,EAAehN,GAClD3C,KAAK2V,MAAMuZ,mBAAmBxmB,GAAS,GAAM,EAAMiH,EAAehN,EACpE,GACC,CACDlE,IAAK,UACLhG,MAAO,SAAiBgxB,EAAY0F,EAAWxkB,GAC7C,GAAiC,oBAAtB8e,EAAWhvB,OACpB,MAAM,IAAIY,MAAM,oDAIhBouB,EAAWhvB,OAHDkQ,EAGUwkB,EAFA1F,EAAWhvB,OAAOzD,OAAOm4B,EAIjD,GACC,CACD1wB,IAAK,SACLhG,MAAO,SAAgBy0B,EAAiBiC,EAAWxkB,GACjD,IAAImC,EAAQiL,SAASmV,GACrB,GAAqB,kBAAVpgB,EAAoB,MAAM,IAAIzR,MAAM,yDAC/C,IAAIouB,EAAazpB,KAAKypB,WAAW3c,GAEjC9M,KAAKovB,QAAQ3F,EAAY0F,EAAWxkB,EACtC,GACC,CACDlM,IAAK,gBACLhG,MAAO,SAAuB02B,EAAWxkB,GACvC,IAAI3K,KAAKyW,SAGP,MAAM,IAAIpb,MAAM,iEAFhB2E,KAAKovB,QAAQpvB,KAAKsG,QAAQmjB,WAAY0F,EAAWxkB,EAIrD,GACC,CACDlM,IAAK,SACLhG,MAAO,SAAgBgH,GACrB,IAAKA,EACH,MAAM,IAAIpE,MAAM,kDASlB,GALsB,qBAAXwY,QAA0BpU,aAAcoU,SACjDpU,EAAKA,EAAGqI,OAINrI,EAAGzC,cAAgBguB,UAAYvrB,EAAGzC,cAAgBiuB,gBAAkBxrB,EAAGzC,cAAgBgP,MAGzF,IAFA,IAAInP,EAAS4C,EAAG5C,OAEPnE,EAAI,EAAGA,EAAImE,IAAUnE,EAC5BsH,KAAKqvB,QAAQ5vB,EAAG/G,SAGlBsH,KAAKqvB,QAAQ5vB,EAEjB,GACC,CACDhB,IAAK,UACLhG,MAAO,SAAiBgH,GACtB,IAAIoG,EAAS7F,KAEbA,KAAKkD,OAAOosB,OAAO7vB,GAEfA,EAAGosB,aACL7rB,KAAK8rB,WAAWwD,OAAO7vB,EAAGosB,aAG5B1f,YAAW,WACT1M,EAAG8vB,gBAAgB,gBACnB1pB,EAAO4Q,UAAW,EAEdhX,EAAGosB,aACLpsB,EAAGosB,YAAYvmB,QAEnB,GACF,MAzd0E3G,EAAkBmB,EAAY1H,UAAW0L,GAAiBC,GAAapF,EAAkBmB,EAAaiE,GAif3K6Q,CACT,CA9eA,GAifA6S,EAAiB,QAAIkB,EACrBhB,EAAOF,QAAUA,EAAO,OAExB,EAAE,CAAC,kBAAkB,EAAE,sBAAsB,EAAE,iBAAiB,EAAE,kBAAkB,EAAE,UAAU,IAAI,EAAE,CAAC,SAASC,EAAQC,EAAOF,GAC/H,aASA,SAAS9oB,EAAkBC,EAAQC,GAAS,IAAK,IAAInG,EAAI,EAAGA,EAAImG,EAAMhC,OAAQnE,IAAK,CAAE,IAAIoG,EAAaD,EAAMnG,GAAIoG,EAAW3F,WAAa2F,EAAW3F,aAAc,EAAO2F,EAAW1F,cAAe,EAAU,UAAW0F,IAAYA,EAAWzF,UAAW,GAAMlB,OAAOK,eAAeoG,EAAQE,EAAWL,IAAKK,EAAa,CAAE,CAP5T3G,OAAOK,eAAeivB,EAAS,aAAc,CAC3ChvB,OAAO,IAETgvB,EAAiB,aAAI,EAQrB,IAgVIkB,EA9UJ,WACE,SAAS6G,EAAc7a,IATzB,SAAyB9U,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIhE,UAAU,oCAAwC,CAUpJiE,CAAgBC,KAAMwvB,GAEtBxvB,KAAK2U,QAAUA,EACf3U,KAAK2U,QAAQzR,OAASlD,IACxB,CAVF,IAAsBF,EAAagE,EAAYC,EA+U7C,OA/UoBjE,EAYP0vB,EAZgCzrB,EAmTzC,CAAC,CACHtF,IAAK,OACLhG,MAAO,WACL,MAAO,CAAC,CACNgG,IAAK,EACLhG,MAAO,OACN,CACDgG,IAAK,EACLhG,MAAO,UACN,CACDgG,IAAK,GACLhG,MAAO,SACN,CACDgG,IAAK,GACLhG,MAAO,UACN,CACDgG,IAAK,GACLhG,MAAO,SACN,CACDgG,IAAK,GACLhG,MAAO,MACN,CACDgG,IAAK,GACLhG,MAAO,QAEX,KA5U+BqL,EAYL,CAAC,CAC3BrF,IAAK,OACLhG,MAAO,SAAcwH,GACnBA,EAAQwvB,aAAezvB,KAAKoe,QAAQrP,KAAK9O,EAASD,MAClDC,EAAQyvB,WAAa1vB,KAAKme,MAAMpP,KAAK9O,EAASD,MAC9CC,EAAQ0vB,WAAa3vB,KAAKjB,MAAMgQ,KAAK9O,EAASD,MAC9CC,EAAQyD,iBAAiB,UAAWzD,EAAQwvB,cAAc,GAC1DxvB,EAAQyD,iBAAiB,QAASzD,EAAQyvB,YAAY,GACtDzvB,EAAQyD,iBAAiB,QAASzD,EAAQ0vB,YAAY,EACxD,GACC,CACDlxB,IAAK,SACLhG,MAAO,SAAgBwH,GACrBA,EAAQ2vB,oBAAoB,UAAW3vB,EAAQwvB,cAAc,GAC7DxvB,EAAQ2vB,oBAAoB,QAAS3vB,EAAQyvB,YAAY,GACzDzvB,EAAQ2vB,oBAAoB,QAAS3vB,EAAQ0vB,YAAY,UAClD1vB,EAAQwvB,oBACRxvB,EAAQyvB,kBACRzvB,EAAQ0vB,UACjB,GACC,CACDlxB,IAAK,UACLhG,MAAO,SAAiBoH,EAAUlJ,GAC5BkJ,EAASgwB,iBAAiBl5B,KAC5BkJ,EAAS8U,QAAQ8B,UAAW,EAC5B5W,EAAS8U,QAAQ8X,YAGnB,IAAIxsB,EAAUD,KACdH,EAASiwB,cAAe,EACxBN,EAAchyB,OAAO5C,SAAQ,SAAUrC,GACjCA,EAAEkG,MAAQ9H,EAAM0tB,UAClBxkB,EAASiwB,cAAe,EACxBjwB,EAASkwB,YAAYx3B,EAAEE,MAAMqqB,eAAensB,EAAOsJ,GAEvD,GACF,GACC,CACDxB,IAAK,QACLhG,MAAO,SAAeoH,EAAUlJ,GAC9BkJ,EAAS2qB,YAAa,EACtB3qB,EAASse,MAAMtkB,KAAKmG,KAAMH,EAAUlJ,EACtC,GACC,CACD8H,IAAK,QACLhG,MAAO,SAAeoH,EAAUlJ,GAC9B,IAAIge,EAAU9U,EAAS8U,QAEvB,GAAIA,EAAQ8C,MAAQ9C,EAAQ8C,KAAK7J,SAASjX,EAAMiI,QAAS,CACvD,IAAIguB,EAAKj2B,EAAMiI,OAIf,IAHAjI,EAAMC,iBACND,EAAM8M,kBAE+B,OAA9BmpB,EAAG/J,SAASC,eAGjB,KAFA8J,EAAKA,EAAGtlB,aAEGslB,IAAOjY,EAAQ8C,KACxB,MAAM,IAAIpc,MAAM,qDAI0C8D,GAA1DytB,EAAGoD,uBAAuB,4BAA4B,KACxDrb,EAAQsb,kBAAkBrD,EAAGK,aAAa,cAAet2B,GACzDge,EAAQ8X,WAEZ,MAAW9X,EAAQrO,QAAQrG,UAAY0U,EAAQrO,QAAQ+mB,kBACrD1Y,EAAQrO,QAAQ+mB,iBAAkB,EAClClhB,YAAW,WACT,OAAOwI,EAAQ8X,UACjB,IAEJ,GACC,CACDhuB,IAAK,QACLhG,MAAO,SAAeoH,EAAUlJ,GAM9B,GALIkJ,EAAS2qB,aACX3qB,EAAS2qB,YAAa,GAGxB3qB,EAASqwB,gBAAgBlwB,MACH,KAAlBrJ,EAAM0tB,QAAV,CAEA,IAAKxkB,EAAS8U,QAAQkC,aAAehX,EAAS8U,QAAQ8V,iBAIpD,OAHA5qB,EAAS8U,QAAQ8V,kBAAmB,EACpC5qB,EAASiwB,cAAe,OACxBjwB,EAASkwB,YAAmB,MAAEp5B,EAAOqJ,MAIvC,IAAKH,EAAS8U,QAAQ8B,SACpB,GAAI5W,EAAS8U,QAAQwU,iBACnBtpB,EAASkwB,YAAYI,YAAYx5B,EAAOqJ,KAAM,QACzC,CACL,IAAIqkB,EAAUxkB,EAASuwB,WAAWvwB,EAAUG,KAAMrJ,GAClD,GAAIiG,MAAMynB,KAAaA,EAAS,OAChC,IAAI3a,EAAU7J,EAAS8U,QAAQ0b,WAAWhoB,MAAK,SAAUqB,GACvD,OAAOA,EAAQmB,WAAW,KAAOwZ,CACnC,IAEuB,qBAAZ3a,GACT7J,EAASkwB,YAAYI,YAAYx5B,EAAOqJ,KAAM0J,EAElD,GAGG7J,EAAS8U,QAAQrO,QAAQoD,SAAW7J,EAAS8U,QAAQwU,oBAA+C,IAA1BtpB,EAASiwB,cAA0BjwB,EAAS8U,QAAQ8B,UAA8B,IAAlB9f,EAAM0tB,UACnJxkB,EAAS8U,QAAQ6Y,YAAYxtB,MAAM,EA1BL,CA4BlC,GACC,CACDvB,IAAK,mBACLhG,MAAO,SAA0B9B,GAC/B,IAAKqJ,KAAK2U,QAAQ8B,SAAU,OAAO,EAEnC,GAAgD,IAA5CzW,KAAK2U,QAAQrO,QAAQolB,YAAY7uB,OAAc,CACjD,IAAIyzB,GAAkB,EAItB,OAHAd,EAAchyB,OAAO5C,SAAQ,SAAUrC,GACjC5B,EAAM0tB,UAAY9rB,EAAEkG,MAAK6xB,GAAkB,EACjD,KACQA,CACV,CAEA,OAAO,CACT,GACC,CACD7xB,IAAK,aACLhG,MAAO,SAAoBoH,EAAUJ,EAAI9I,GACvC,IAEIge,EAAU9U,EAAS8U,QACnBjW,EAAOiW,EAAQgB,MAAM4a,gBAAe,EAAO5b,EAAQ8V,kBAAkB,EAAM9V,EAAQkC,YAAalC,EAAQwU,kBAE5G,QAAIzqB,GACKA,EAAK8xB,mBAAmB3lB,WAAW,EAI9C,GACC,CACDpM,IAAK,kBACLhG,MAAO,SAAyBgH,GAC9BO,KAAK2U,QAAQrO,QAAQrG,QAAUR,EAC/B,IAAIf,EAAOsB,KAAK2U,QAAQgB,MAAM4a,gBAAe,EAAOvwB,KAAK2U,QAAQ8V,kBAAkB,EAAMzqB,KAAK2U,QAAQkC,YAAa7W,KAAK2U,QAAQwU,kBAE5HzqB,IACFsB,KAAK2U,QAAQrO,QAAQmqB,aAAe/xB,EAAKgyB,oBACzC1wB,KAAK2U,QAAQrO,QAAQolB,YAAchtB,EAAKgtB,YACxC1rB,KAAK2U,QAAQrO,QAAQqqB,eAAiBjyB,EAAKkyB,sBAE/C,GACC,CACDnyB,IAAK,YACLhG,MAAO,WACL,IAAIiH,EAAQM,KAEZ,MAAO,CACLmwB,YAAa,SAAqBn4B,EAAGyH,EAAIiK,GACvC,IAAIiL,EAAUjV,EAAMiV,QACpBA,EAAQrO,QAAQoD,QAAUA,EAC1B,IAAImnB,EAAiBlc,EAAQ8U,WAAWphB,MAAK,SAAU1F,GACrD,OAAOA,EAAK+G,UAAYA,CAC1B,IACAiL,EAAQrO,QAAQmjB,WAAaoH,EACzBlc,EAAQ6V,YAAY7V,EAAQ6Y,YAAY/tB,GAAI,EAClD,EACAqxB,MAAO,SAAe94B,EAAGyH,GAEnBC,EAAMiV,QAAQ8B,UAAY/W,EAAMiV,QAAQrO,QAAQ8lB,gBAClDp0B,EAAEpB,iBACFoB,EAAEyL,kBACF0I,YAAW,WACTzM,EAAMiV,QAAQsb,kBAAkBvwB,EAAMiV,QAAQ4V,aAAcvyB,GAE5D0H,EAAMiV,QAAQ8X,UAChB,GAAG,GAEP,EACAsE,OAAQ,SAAgB/4B,EAAGyH,GACrBC,EAAMiV,QAAQ8B,WAChBze,EAAEpB,iBACFoB,EAAEyL,kBACF/D,EAAMiV,QAAQ8B,UAAW,EAEzB/W,EAAMiV,QAAQ8X,WAElB,EACAuE,IAAK,SAAah5B,EAAGyH,GAEnBC,EAAMqwB,YAAYe,MAAM94B,EAAGyH,EAC7B,EACAwxB,MAAO,SAAej5B,EAAGyH,GACnBC,EAAMiV,QAAQ8B,WACZ/W,EAAMiV,QAAQwV,kBAChBzqB,EAAMqwB,YAAYe,MAAM94B,EAAGyH,GACjBC,EAAMiV,QAAQkC,cACxB7e,EAAEyL,kBACF0I,YAAW,WACTzM,EAAMiV,QAAQ8X,WAEd/sB,EAAMiV,QAAQ8B,UAAW,CAC3B,GAAG,IAGT,EACAya,GAAI,SAAYl5B,EAAGyH,GAEjB,GAAIC,EAAMiV,QAAQ8B,UAAY/W,EAAMiV,QAAQrO,QAAQ8lB,cAAe,CACjEp0B,EAAEpB,iBACFoB,EAAEyL,kBACF,IAAI0tB,EAAQzxB,EAAMiV,QAAQrO,QAAQ8lB,cAAcvvB,OAC5CkE,EAAWrB,EAAMiV,QAAQ4V,aAEzB4G,EAAQpwB,GAAYA,EAAW,GACjCrB,EAAMiV,QAAQ4V,eAEd7qB,EAAMstB,eACgB,IAAbjsB,IACTrB,EAAMiV,QAAQ4V,aAAe4G,EAAQ,EAErCzxB,EAAMstB,cAENttB,EAAMiV,QAAQ8C,KAAKwI,UAAYvgB,EAAMiV,QAAQ8C,KAAK2Z,aAEtD,CACF,EACAC,KAAM,SAAcr5B,EAAGyH,GAErB,GAAIC,EAAMiV,QAAQ8B,UAAY/W,EAAMiV,QAAQrO,QAAQ8lB,cAAe,CACjEp0B,EAAEpB,iBACFoB,EAAEyL,kBACF,IAAI0tB,EAAQzxB,EAAMiV,QAAQrO,QAAQ8lB,cAAcvvB,OAAS,EACrDkE,EAAWrB,EAAMiV,QAAQ4V,aAEzB4G,EAAQpwB,GACVrB,EAAMiV,QAAQ4V,eAEd7qB,EAAMstB,eACGmE,IAAUpwB,IACnBrB,EAAMiV,QAAQ4V,aAAe,EAE7B7qB,EAAMstB,cAENttB,EAAMiV,QAAQ8C,KAAKwI,UAAY,EAEnC,CACF,EACA,OAAU,SAAiBjoB,EAAGyH,GACxBC,EAAMiV,QAAQ8B,UAAY/W,EAAMiV,QAAQrO,QAAQolB,YAAY7uB,OAAS,EACvE6C,EAAMiV,QAAQ8X,WACL/sB,EAAMiV,QAAQ8B,UACvB/W,EAAMiV,QAAQ6Y,YAAY/tB,EAE9B,EAEJ,GACC,CACDhB,IAAK,cACLhG,MAAO,SAAqBqU,GAC1B,IAAIwkB,EAAMtxB,KAAK2U,QAAQ8C,KAAKlL,iBAAiB,MACzC1P,EAASy0B,EAAIz0B,SAAW,EACxBiQ,IAAO9M,KAAK2U,QAAQ4V,aAAexS,SAASjL,IAEhD,IAAK,IAAIpU,EAAI,EAAGA,EAAImE,EAAQnE,IAAK,CAC/B,IAAIk0B,EAAK0E,EAAI54B,GAEb,GAAIA,IAAMsH,KAAK2U,QAAQ4V,aAAc,CACnCqC,EAAG5nB,UAAUC,IAAIjF,KAAK2U,QAAQrO,QAAQmjB,WAAW1S,aACjD,IAAIwa,EAAe3E,EAAG4E,wBAClBC,EAAiBzxB,KAAK2U,QAAQ8C,KAAK+Z,wBAEvC,GAAID,EAAaG,OAASD,EAAeC,OAAQ,CAC/C,IAAIC,EAAiBJ,EAAaG,OAASD,EAAeC,OAC1D1xB,KAAK2U,QAAQ8C,KAAKwI,WAAa0R,CACjC,MAAO,GAAIJ,EAAa1R,IAAM4R,EAAe5R,IAAK,CAChD,IAAI+R,EAAkBH,EAAe5R,IAAM0R,EAAa1R,IAExD7f,KAAK2U,QAAQ8C,KAAKwI,WAAa2R,CACjC,CACF,MACEhF,EAAG5nB,UAAUM,OAAOtF,KAAK2U,QAAQrO,QAAQmjB,WAAW1S,YAExD,CACF,GACC,CACDtY,IAAK,gBACLhG,MAAO,SAAuBuU,EAAM6kB,GAClC,IAAIvT,EAAStR,EAAKwkB,wBAAwBlT,OAE1C,GAAIuT,EAAe,CACjB,IAAIzuB,EAAQ4J,EAAK8kB,cAAgBljB,OAAOmjB,iBAAiB/kB,GACzD,OAAOsR,EAAS0T,WAAW5uB,EAAM6uB,WAAaD,WAAW5uB,EAAM8uB,aACjE,CAEA,OAAO5T,CACT,MAlT0E3f,EAAkBmB,EAAY1H,UAAW0L,GAAiBC,GAAapF,EAAkBmB,EAAaiE,GA+U3KyrB,CACT,CA5UA,GA+UA/H,EAAiB,QAAIkB,EACrBhB,EAAOF,QAAUA,EAAO,OAExB,EAAE,CAAC,GAAG,EAAE,CAAC,SAASC,EAAQC,EAAOF,GACjC,aASA,SAAS9oB,EAAkBC,EAAQC,GAAS,IAAK,IAAInG,EAAI,EAAGA,EAAImG,EAAMhC,OAAQnE,IAAK,CAAE,IAAIoG,EAAaD,EAAMnG,GAAIoG,EAAW3F,WAAa2F,EAAW3F,aAAc,EAAO2F,EAAW1F,cAAe,EAAU,UAAW0F,IAAYA,EAAWzF,UAAW,GAAMlB,OAAOK,eAAeoG,EAAQE,EAAWL,IAAKK,EAAa,CAAE,CAP5T3G,OAAOK,eAAeivB,EAAS,aAAc,CAC3ChvB,OAAO,IAETgvB,EAAiB,aAAI,EAQrB,IAAI0K,EAEJ,WACE,SAASA,EAAkBxd,IAT7B,SAAyB9U,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIhE,UAAU,oCAAwC,CAUpJiE,CAAgBC,KAAMmyB,GAEtBnyB,KAAK2U,QAAUA,EACf3U,KAAK2U,QAAQmX,WAAa9rB,KAC1BA,KAAKyX,KAAOzX,KAAK2U,QAAQ8C,IAC3B,CAXF,IAAsB3X,EAAagE,EAAYC,EA6E7C,OA7EoBjE,EAaPqyB,EAboBruB,EAaD,CAAC,CAC/BrF,IAAK,OACLhG,MAAO,SAAcgf,GACnB,IAAI/X,EAAQM,KAEZA,KAAKoyB,eAAiBpyB,KAAK2U,QAAQzR,OAAO0F,MAAMmG,KAAK,KAAM/O,MAC3DA,KAAKqyB,yBAA2BryB,KAAK2B,UAAS,WACxCjC,EAAMiV,QAAQ8B,UAChB/W,EAAMiV,QAAQ6Y,YAAY9tB,EAAMiV,QAAQrO,QAAQrG,SAAS,EAE7D,GAAG,KAAK,GACRD,KAAKsyB,kBAAoBtyB,KAAK2B,UAAS,WACjCjC,EAAMiV,QAAQ8B,UAChB/W,EAAMiV,QAAQgB,MAAM0W,qBAAoB,EAE5C,GAAG,KAAK,GAERrsB,KAAK2U,QAAQgB,MAAMgC,cAAcjU,iBAAiB,gBAAiB1D,KAAKoyB,gBAAgB,GACxFpyB,KAAK2U,QAAQgB,MAAMgC,cAAcjU,iBAAiB,YAAa1D,KAAKoyB,gBAAgB,GACpFxjB,OAAOlL,iBAAiB,SAAU1D,KAAKsyB,mBAEnCtyB,KAAKuV,cACPvV,KAAKuV,cAAc7R,iBAAiB,SAAU1D,KAAKqyB,0BAA0B,GAE7EzjB,OAAOlL,iBAAiB,SAAU1D,KAAKqyB,yBAE3C,GACC,CACD5zB,IAAK,SACLhG,MAAO,SAAgBgf,GACrBzX,KAAK2U,QAAQgB,MAAMgC,cAAciY,oBAAoB,YAAa5vB,KAAKoyB,gBAAgB,GACvFpyB,KAAK2U,QAAQgB,MAAMgC,cAAciY,oBAAoB,gBAAiB5vB,KAAKoyB,gBAAgB,GAC3FxjB,OAAOghB,oBAAoB,SAAU5vB,KAAKsyB,mBAEtCtyB,KAAKuV,cACPvV,KAAKuV,cAAcqa,oBAAoB,SAAU5vB,KAAKqyB,0BAA0B,GAEhFzjB,OAAOghB,oBAAoB,SAAU5vB,KAAKqyB,yBAE9C,GACC,CACD5zB,IAAK,WACLhG,MAAO,SAAkBmT,EAAMC,EAAM0mB,GACnC,IAGIzmB,EAHAhH,EAAS9E,KACTwyB,EAAa5yB,UAGjB,OAAO,WACL,IAAI+L,EAAU7G,EACV1C,EAAOowB,EAOPC,EAAUF,IAAczmB,EAC5BI,aAAaJ,GACbA,EAAUK,YAPE,WACVL,EAAU,KACLymB,GAAW3mB,EAAKvJ,MAAMsJ,EAASvJ,EACtC,GAI4ByJ,GACxB4mB,GAAS7mB,EAAKvJ,MAAMsJ,EAASvJ,EACnC,CACF,IA1E8D0B,GAAYnF,EAAkBmB,EAAY1H,UAAW0L,GAAiBC,GAAapF,EAAkBmB,EAAaiE,GA6E3KouB,CACT,CA1EA,GA4EIxJ,EAAWwJ,EACf1K,EAAiB,QAAIkB,EACrBhB,EAAOF,QAAUA,EAAO,OAExB,EAAE,CAAC,GAAG,EAAE,CAAC,SAASC,EAAQC,EAAOF,GACjC,aASA,SAAS9oB,EAAkBC,EAAQC,GAAS,IAAK,IAAInG,EAAI,EAAGA,EAAImG,EAAMhC,OAAQnE,IAAK,CAAE,IAAIoG,EAAaD,EAAMnG,GAAIoG,EAAW3F,WAAa2F,EAAW3F,aAAc,EAAO2F,EAAW1F,cAAe,EAAU,UAAW0F,IAAYA,EAAWzF,UAAW,GAAMlB,OAAOK,eAAeoG,EAAQE,EAAWL,IAAKK,EAAa,CAAE,CAP5T3G,OAAOK,eAAeivB,EAAS,aAAc,CAC3ChvB,OAAO,IAETgvB,EAAiB,aAAI,EASrB,IAgnBIkB,EA9mBJ,WACE,SAAS+J,EAAa/d,IAVxB,SAAyB9U,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIhE,UAAU,oCAAwC,CAWpJiE,CAAgBC,KAAM0yB,GAEtB1yB,KAAK2U,QAAUA,EACf3U,KAAK2U,QAAQgB,MAAQ3V,IACvB,CAXF,IAAsBF,EAAagE,EAAYC,EAgnB7C,OAhnBoBjE,EAaP4yB,GAboB5uB,EAaN,CAAC,CAC1BrF,IAAK,cACLhG,MAAO,WACL,IAAIswB,EAMJ,OAJI/oB,KAAK2U,QAAQrO,QAAQmjB,aACvBV,EAAS/oB,KAAK2U,QAAQrO,QAAQmjB,WAAWV,QAGtCA,EAIEA,EAAO4J,cAAcl8B,SAHnBA,QAIX,GACC,CACDgI,IAAK,sBACLhG,MAAO,SAA6BgzB,GAClC,IAGImH,EAHAlzB,EAAQM,KAER2L,EAAU3L,KAAK2U,QAAQrO,QAEvB5H,EAAOsB,KAAKuwB,gBAAe,EAAOvwB,KAAK2U,QAAQ8V,kBAAkB,EAAMzqB,KAAK2U,QAAQkC,YAAa7W,KAAK2U,QAAQwU,kBAElH,GAAoB,qBAATzqB,EAAsB,CAC/B,IAAKsB,KAAK2U,QAAQW,aAEhB,YADAtV,KAAK2U,QAAQ8C,KAAKrU,MAAM4rB,QAAU,mBAOlC4D,EAHG5yB,KAAK4V,kBAAkBjK,EAAQ1L,SAGpBD,KAAK6yB,gCAAgCn0B,EAAKo0B,iBAF1C9yB,KAAK+yB,oCAAoC/yB,KAAK2U,QAAQrO,QAAQrG,QAASvB,EAAKo0B,iBAK5F9yB,KAAK2U,QAAQ8C,KAAKrU,MAAM4rB,QAAU,QAAQh4B,OAAO47B,EAAY/S,IAAK,oDAAoD7oB,OAAO47B,EAAY7S,KAAM,qDAAqD/oB,OAAO47B,EAAYI,MAAO,sDAAsDh8B,OAAO47B,EAAYlB,OAAQ,uHAEtR,SAArBkB,EAAY7S,OACd/f,KAAK2U,QAAQ8C,KAAKrU,MAAM2c,KAAO,QAGT,SAApB6S,EAAY/S,MACd7f,KAAK2U,QAAQ8C,KAAKrU,MAAMyc,IAAM,QAG5B4L,GAAUzrB,KAAKizB,iBACnBrkB,OAAOzC,YAAW,WAChB,IAAI+mB,EAAiB,CACnBxT,MAAOhgB,EAAMiV,QAAQ8C,KAAK0b,YAC1B7U,OAAQ5e,EAAMiV,QAAQ8C,KAAK2b,cAGzBC,EAAkB3zB,EAAM4zB,gBAAgBV,EAAaM,GAErDK,EAA8B3kB,OAAO4kB,WAAaN,EAAexT,QAAU2T,EAAgBtT,MAAQsT,EAAgBL,OACnHS,EAA4B7kB,OAAO8kB,YAAcR,EAAe5U,SAAW+U,EAAgBxT,KAAOwT,EAAgB3B,SAElH6B,GAA+BE,KACjC/zB,EAAMiV,QAAQ8C,KAAKrU,MAAM4rB,QAAU,gBAEnCtvB,EAAM2sB,oBAAoBZ,GAE9B,GAAG,EACL,MACEzrB,KAAK2U,QAAQ8C,KAAKrU,MAAM4rB,QAAU,eAEtC,GACC,CACDvwB,IAAK,gBACLhG,MAAO,SAAuBk7B,EAAeljB,EAAMgP,GACjD,IAAI9J,EACA3I,EAAO2mB,EAEX,GAAIljB,EACF,IAAK,IAAI/X,EAAI,EAAGA,EAAI+X,EAAK5T,OAAQnE,IAAK,CAGpC,QAAayG,KAFb6N,EAAOA,EAAK4mB,WAAWnjB,EAAK/X,KAG1B,OAGF,KAAOsU,EAAKnQ,OAAS4iB,GACnBA,GAAUzS,EAAKnQ,OACfmQ,EAAOA,EAAK6mB,YAGiB,IAA3B7mB,EAAK4mB,WAAW/2B,QAAiBmQ,EAAKnQ,SACxCmQ,EAAOA,EAAK8mB,gBAEhB,CAGF,IAAIjG,EAAM7tB,KAAK+zB,sBACfpe,EAAQ3V,KAAK2X,cAAc+V,eACrBsG,SAAShnB,EAAMyS,GACrB9J,EAAMse,OAAOjnB,EAAMyS,GACnB9J,EAAMiY,UAAS,GAEf,IACEC,EAAIC,iBACN,CAAE,MAAOn2B,GAAQ,CAEjBk2B,EAAIE,SAASpY,GACbge,EAAc7tB,OAChB,GACC,CACDrH,IAAK,qBACLhG,MAAO,SAA4BoP,EAAMgiB,EAAqBY,EAAkB9a,EAAehN,GAC7F,IAAIjE,EAAOsB,KAAKuwB,gBAAe,EAAM9F,EAAkBZ,EAAqB7pB,KAAK2U,QAAQkC,YAAa7W,KAAK2U,QAAQwU,kBAEnH,QAAahqB,IAATT,EAAoB,CACtB,IAAIiN,EAAU3L,KAAK2U,QAAQrO,QACvB4tB,EAAe,IAAI3H,YAAY,mBAAoB,CACrDtoB,OAAQ,CACNtB,KAAMA,EACN9C,SAAU8L,EACVA,QAASjN,EACT/H,MAAOgZ,KAIX,GAAK3P,KAAK4V,kBAAkBjK,EAAQ1L,SAalC4H,GAF2D,iBAAlC7H,KAAK2U,QAAQqV,kBAAgChqB,KAAK2U,QAAQqV,kBAAoB,OAGvGhqB,KAAKm0B,UAAUtsB,EAAMnJ,EAAKo0B,gBAAiBp0B,EAAKo0B,gBAAkBp0B,EAAKgtB,YAAY7uB,QAAUmD,KAAK2U,QAAQwU,sBAd9D,CAC5C,IAAIiL,EAAUp0B,KAAK2U,QAAQrO,QAAQrG,QAC/Bo0B,EAAsD,iBAAlCr0B,KAAK2U,QAAQqV,kBAAgChqB,KAAK2U,QAAQqV,kBAAoB,IACtGniB,GAAQwsB,EACR,IAAIC,EAAW51B,EAAKo0B,gBAChByB,EAAS71B,EAAKo0B,gBAAkBp0B,EAAKgtB,YAAY7uB,OAASw3B,EAAWx3B,OACzEu3B,EAAQ37B,MAAQ27B,EAAQ37B,MAAM0uB,UAAU,EAAGmN,GAAYzsB,EAAOusB,EAAQ37B,MAAM0uB,UAAUoN,EAAQH,EAAQ37B,MAAMoE,QAC5Gu3B,EAAQxF,eAAiB0F,EAAWzsB,EAAKhL,OACzCu3B,EAAQrF,aAAeuF,EAAWzsB,EAAKhL,MACzC,CAQA8O,EAAQ1L,QAAQusB,cAAc0H,EAChC,CACF,GACC,CACDz1B,IAAK,YACLhG,MAAO,SAAmBtB,EAAMm9B,EAAUC,GACxC,IAAI5e,EAAOkY,EACXA,EAAM7tB,KAAK+zB,sBACXpe,EAAQ3V,KAAK2X,cAAc+V,eACrBsG,SAASnG,EAAI2G,WAAYF,GAC/B3e,EAAMse,OAAOpG,EAAI2G,WAAYD,GAC7B5e,EAAM0Y,iBACN,IAAI5uB,EAAKO,KAAK2X,cAAchT,cAAc,OAC1ClF,EAAGoF,UAAY1N,EAKf,IAJA,IACI4T,EACA0pB,EAFAC,EAAO10B,KAAK2X,cAAcgV,yBAIvB5hB,EAAOtL,EAAGk1B,YACfF,EAAWC,EAAKlvB,YAAYuF,GAG9B4K,EAAM6Y,WAAWkG,GAEbD,KACF9e,EAAQA,EAAMif,cACRC,cAAcJ,GACpB9e,EAAMiY,UAAS,GACfC,EAAIC,kBACJD,EAAIE,SAASpY,GAEjB,GACC,CACDlX,IAAK,qBACLhG,MAAO,WACL,OAAIuH,KAAK2U,QAAQ8U,WAAWV,OACnB/oB,KAAK2U,QAAQ8U,WAAWV,OAAO4J,cAAclF,eAG/C7e,OAAO6e,cAChB,GACC,CACDhvB,IAAK,0BACLhG,MAAO,SAAiCwH,GACtC,GAA2B,OAAvBA,EAAQqH,WACV,OAAO,EAGT,IAAK,IAAI5O,EAAI,EAAGA,EAAIuH,EAAQqH,WAAWssB,WAAW/2B,OAAQnE,IAGxD,GAFWuH,EAAQqH,WAAWssB,WAAWl7B,KAE5BuH,EACX,OAAOvH,CAGb,GACC,CACD+F,IAAK,iCACLhG,MAAO,SAAwCq8B,GAC7C,IAAIjH,EAAM7tB,KAAK+zB,qBACXhzB,EAAW8sB,EAAI2G,WACf/jB,EAAO,GAGX,GAAgB,MAAZ1P,EAAkB,CAIpB,IAHA,IAAIrI,EACAq8B,EAAKh0B,EAASuqB,gBAEE,OAAbvqB,GAA4B,SAAPg0B,GAC1Br8B,EAAIsH,KAAKg1B,wBAAwBj0B,GACjC0P,EAAKjU,KAAK9D,GAGO,QAFjBqI,EAAWA,EAASuG,cAGlBytB,EAAKh0B,EAASuqB,iBAOlB,OAHA7a,EAAKhT,UAGE,CACLsD,SAAUA,EACV0P,KAAMA,EACNgP,OAJOoO,EAAIO,WAAW,GAAG6G,YAM7B,CACF,GACC,CACDx2B,IAAK,mCACLhG,MAAO,WACL,IAAIkT,EAAU3L,KAAK2U,QAAQrO,QACvBuB,EAAO,GAEX,GAAK7H,KAAK4V,kBAAkBjK,EAAQ1L,SAU7B,CACL,IAAIi1B,EAAel1B,KAAK+zB,qBAAqBS,WAE7C,GAAoB,MAAhBU,EAAsB,CACxB,IAAIC,EAAqBD,EAAaE,YAClCC,EAAoBr1B,KAAK+zB,qBAAqB3F,WAAW,GAAG6G,YAE5DE,GAAsBE,GAAqB,IAC7CxtB,EAAOstB,EAAmBhO,UAAU,EAAGkO,GAE3C,CACF,KArB8C,CAC5C,IAAIC,EAAgBt1B,KAAK2U,QAAQrO,QAAQrG,QAEzC,GAAIq1B,EAAe,CACjB,IAAIhB,EAAWgB,EAAc1G,eAEzB0G,EAAc78B,OAAS67B,GAAY,IACrCzsB,EAAOytB,EAAc78B,MAAM0uB,UAAU,EAAGmN,GAE5C,CACF,CAaA,OAAOzsB,CACT,GACC,CACDpJ,IAAK,oBACLhG,MAAO,SAA2BoP,GAGhC,IAAI0tB,GAFJ1tB,EAAOA,EAAK8C,QAAQ,UAAW,MAET4P,MAAM,OAE5B,OAAOgb,EADWA,EAAW14B,OAAS,GACP24B,MACjC,GACC,CACD/2B,IAAK,iBACLhG,MAAO,SAAwBg9B,EAAmBhL,EAAkBZ,EAAqBhT,EAAa6e,GACpG,IAGI30B,EAAU0P,EAAMgP,EAHhB3a,EAAS9E,KAET80B,EAAM90B,KAAK2U,QAAQrO,QAGvB,GAAKtG,KAAK4V,kBAAkBkf,EAAI70B,SAEzB,CACL,IAAI01B,EAAgB31B,KAAK41B,+BAA+Bd,GAEpDa,IACF50B,EAAW40B,EAAc50B,SACzB0P,EAAOklB,EAAcllB,KACrBgP,EAASkW,EAAclW,OAE3B,MATE1e,EAAWf,KAAK2U,QAAQrO,QAAQrG,QAWlC,IAAI41B,EAAiB71B,KAAK81B,mCACtBC,EAA2B/1B,KAAKg2B,kBAAkBH,GAEtD,GAAIH,EACF,MAAO,CACL5C,gBAAiB+C,EAAeh5B,OAASk5B,EAAyBl5B,OAClE6uB,YAAaqK,EACbE,uBAAwBl1B,EACxB2vB,oBAAqBjgB,EACrBmgB,sBAAuBnR,GAI3B,QAAuBtgB,IAAnB02B,GAAmD,OAAnBA,EAAyB,CAC3D,IACI1F,EADA+F,GAA4B,EAahC,GAXAl2B,KAAK2U,QAAQ8U,WAAW7uB,SAAQ,SAAUwc,GACxC,IAAIte,EAAIse,EAAO1N,QACX9G,EAAMwU,EAAOyS,oBAAsB/kB,EAAOqxB,0BAA0BN,EAAgB/8B,GAAK+8B,EAAeO,YAAYt9B,GAEpH8J,EAAMszB,IACRA,EAA2BtzB,EAC3ButB,EAAcr3B,EACd+wB,EAAsBzS,EAAOyS,oBAEjC,IAEIqM,GAA4B,IAAmC,IAA7BA,IAAmCrM,GAAuB,YAAYplB,KAAKoxB,EAAe1O,UAAU+O,EAA2B,EAAGA,KAA6B,CACnM,IAAIG,EAAwBR,EAAe1O,UAAU+O,EAA2B,EAAGL,EAAeh5B,QAClGszB,EAAc0F,EAAe1O,UAAU+O,EAA0BA,EAA2B,GAC5F,IAAII,EAAmBD,EAAsBlP,UAAU,EAAG,GACtDoP,EAAeF,EAAsBx5B,OAAS,IAA2B,MAArBy5B,GAAiD,SAArBA,GAEhF7L,IACF4L,EAAwBA,EAAsBb,QAGhD,IAAIgB,EAAQ3f,EAAc,UAAY,YAGtC,GAFA7W,KAAK2U,QAAQ8V,iBAAmB+L,EAAM/xB,KAAK4xB,IAEtCE,IAAiBd,IAAsBe,EAAM/xB,KAAK4xB,IACrD,MAAO,CACLvD,gBAAiBoD,EACjBxK,YAAa2K,EACbJ,uBAAwBl1B,EACxB2vB,oBAAqBjgB,EACrBmgB,sBAAuBnR,EACvB+Q,mBAAoBL,EAG1B,CACF,CACF,GACC,CACD1xB,IAAK,4BACLhG,MAAO,SAAmCiS,EAAKE,GAI7C,IAHA,IAAI6rB,EAAc/rB,EAAI6P,MAAM,IAAI9c,UAAU4kB,KAAK,IAC3CvV,GAAS,EAEJ4pB,EAAO,EAAGC,EAAMjsB,EAAI7N,OAAQ65B,EAAOC,EAAKD,IAAQ,CACvD,IAAIE,EAAYF,IAAShsB,EAAI7N,OAAS,EAClC05B,EAAe,KAAK9xB,KAAKgyB,EAAYC,EAAO,IAGhD,GAFY9rB,IAAU6rB,EAAYC,KAEpBE,GAAaL,GAAe,CACxCzpB,EAAQpC,EAAI7N,OAAS,EAAI65B,EACzB,KACF,CACF,CAEA,OAAO5pB,CACT,GACC,CACDrO,IAAK,oBACLhG,MAAO,SAA2BwH,GAChC,MAA4B,UAArBA,EAAQ4iB,UAA6C,aAArB5iB,EAAQ4iB,QACjD,GACC,CACDpkB,IAAK,kBACLhG,MAAO,SAAyBm6B,EAAaM,GAC3C,IAAI2D,EAAcjoB,OAAO4kB,WACrBsD,EAAeloB,OAAO8kB,YACtBqD,EAAMtgC,SAASugC,gBACfC,GAAcroB,OAAOsoB,aAAeH,EAAII,aAAeJ,EAAIK,YAAc,GACzEC,GAAazoB,OAAO0oB,aAAeP,EAAI9W,YAAc8W,EAAIQ,WAAa,GACtEC,EAAqC,kBAApB5E,EAAY/S,IAAmB+S,EAAY/S,IAAMwX,EAAYP,EAAelE,EAAYlB,OAASwB,EAAe5U,OACjImZ,EAAyC,kBAAtB7E,EAAYI,MAAqBJ,EAAYI,MAAQJ,EAAY7S,KAAOmT,EAAexT,MAC1GgY,EAA2C,kBAAvB9E,EAAYlB,OAAsBkB,EAAYlB,OAASkB,EAAY/S,IAAMqT,EAAe5U,OAC5GqZ,EAAuC,kBAArB/E,EAAY7S,KAAoB6S,EAAY7S,KAAOkX,EAAaJ,EAAcjE,EAAYI,MAAQE,EAAexT,MACvI,MAAO,CACLG,IAAK2X,EAAUpkB,KAAKC,MAAMgkB,GAC1BrE,MAAOyE,EAAYrkB,KAAKwkB,KAAKX,EAAaJ,GAC1CnF,OAAQgG,EAAatkB,KAAKwkB,KAAKP,EAAYP,GAC3C/W,KAAM4X,EAAWvkB,KAAKC,MAAM4jB,GAEhC,GACC,CACDx4B,IAAK,oBACLhG,MAAO,WAIL,IAAIo/B,EAAa,CACfnY,MAAO,KACPpB,OAAQ,MAMV,OAJAte,KAAK2U,QAAQ8C,KAAKrU,MAAM4rB,QAAU,oNAClC6I,EAAWnY,MAAQ1f,KAAK2U,QAAQ8C,KAAK0b,YACrC0E,EAAWvZ,OAASte,KAAK2U,QAAQ8C,KAAK2b,aACtCpzB,KAAK2U,QAAQ8C,KAAKrU,MAAM4rB,QAAU,iBAC3B6I,CACT,GACC,CACDp5B,IAAK,sCACLhG,MAAO,SAA6CwH,EAASkW,EAAU2hB,GACrE,IACIC,EAAuC,OAA3BnpB,OAAOopB,gBACnBjxB,EAAM/G,KAAK2X,cAAchT,cAAc,OAC3CoC,EAAIuH,GAAK,2CACTtO,KAAK2X,cAAcD,KAAKlS,YAAYuB,GACpC,IAAI3D,EAAQ2D,EAAI3D,MACZ60B,EAAWrpB,OAAOmjB,iBAAmBA,iBAAiB9xB,GAAWA,EAAQ6xB,aAC7E1uB,EAAM80B,WAAa,WAEM,UAArBj4B,EAAQ4iB,WACVzf,EAAM+0B,SAAW,cAInB/0B,EAAM+S,SAAW,WACjB/S,EAAMwf,WAAa,SAfF,CAAC,YAAa,YAAa,QAAS,SAAU,YAAa,YAAa,iBAAkB,mBAAoB,oBAAqB,kBAAmB,aAAc,eAAgB,gBAAiB,cAAe,YAAa,cAAe,aAAc,cAAe,WAAY,iBAAkB,aAAc,aAAc,YAAa,gBAAiB,aAAc,iBAAkB,gBAAiB,eAiB5ZhoB,SAAQ,SAAUw9B,GAC3Bh1B,EAAMg1B,GAAQH,EAASG,EACzB,IAEIL,GACF30B,EAAMsc,MAAQ,GAAG1oB,OAAO+gB,SAASkgB,EAASvY,OAAS,EAAG,MAClDzf,EAAQmxB,aAAerZ,SAASkgB,EAAS3Z,UAASlb,EAAMi1B,UAAY,WAExEj1B,EAAMk1B,SAAW,SAGnBvxB,EAAIquB,YAAcn1B,EAAQxH,MAAM0uB,UAAU,EAAGhR,GAEpB,UAArBlW,EAAQ4iB,WACV9b,EAAIquB,YAAcruB,EAAIquB,YAAYzqB,QAAQ,MAAO,MAGnD,IAAI4tB,EAAOv4B,KAAK2X,cAAchT,cAAc,QAC5C4zB,EAAKnD,YAAcn1B,EAAQxH,MAAM0uB,UAAUhR,IAAa,IACxDpP,EAAIvB,YAAY+yB,GAChB,IAAIC,EAAOv4B,EAAQuxB,wBACfuF,EAAMtgC,SAASugC,gBACfC,GAAcroB,OAAOsoB,aAAeH,EAAII,aAAeJ,EAAIK,YAAc,GACzEC,GAAazoB,OAAO0oB,aAAeP,EAAI9W,YAAc8W,EAAIQ,WAAa,GACtE1X,EAAM,EACNE,EAAO,EAEP/f,KAAKy4B,sBACP5Y,EAAM2Y,EAAK3Y,IACXE,EAAOyY,EAAKzY,MAGd,IAAI6S,EAAc,CAChB/S,IAAKA,EAAMwX,EAAYkB,EAAKG,UAAY3gB,SAASkgB,EAASU,gBAAkB5gB,SAASkgB,EAASW,UAAY34B,EAAQggB,UAClHF,KAAMA,EAAOkX,EAAasB,EAAKzY,WAAa/H,SAASkgB,EAASY,kBAE5DhC,EAAcjoB,OAAO4kB,WACrBsD,EAAeloB,OAAO8kB,YACtBR,EAAiBlzB,KAAK84B,oBACtBzF,EAAkBrzB,KAAKszB,gBAAgBV,EAAaM,GAEpDG,EAAgBL,QAClBJ,EAAYI,MAAQ6D,EAAcjE,EAAY7S,KAC9C6S,EAAY7S,KAAO,QAGrB,IAAIgZ,EAAe/4B,KAAK2U,QAAQY,cAAgBvV,KAAK2U,QAAQY,cAAc6d,aAAepzB,KAAK2X,cAAcD,KAAK0b,aAElH,GAAIC,EAAgB3B,OAAQ,CAC1B,IACIsH,EAAuBD,GAAgBjC,GAD1B92B,KAAK2U,QAAQY,cAAgBvV,KAAK2U,QAAQY,cAAcic,wBAA0BxxB,KAAK2X,cAAcD,KAAK8Z,yBACtD3R,KACrE+S,EAAYlB,OAASsH,GAAwBlC,EAAe0B,EAAK3Y,IAAM0Y,EAAKG,WAC5E9F,EAAY/S,IAAM,MACpB,CAeA,OAbAwT,EAAkBrzB,KAAKszB,gBAAgBV,EAAaM,IAEhCnT,OAClB6S,EAAY7S,KAAO8W,EAAc3D,EAAexT,MAAQuX,EAAaJ,EAAc3D,EAAexT,MAAQuX,SACnGrE,EAAYI,OAGjBK,EAAgBxT,MAClB+S,EAAY/S,IAAMiX,EAAe5D,EAAe5U,OAAS+Y,EAAYP,EAAe5D,EAAe5U,OAAS+Y,SACrGzE,EAAYlB,QAGrB1xB,KAAK2X,cAAcD,KAAKuhB,YAAYlyB,GAC7B6rB,CACT,GACC,CACDn0B,IAAK,kCACLhG,MAAO,SAAyCygC,GAC9C,IACIC,EAEAxjB,EADAyjB,EAAW,OAAOpiC,QAAO,IAAIkc,MAAO0L,UAAW,KAAK5nB,OAAOoc,KAAKE,SAAS4T,WAAWtD,OAAO,IAE3FiK,EAAM7tB,KAAK+zB,qBACXsF,EAAYxL,EAAIO,WAAW,IAC/BzY,EAAQ3V,KAAK2X,cAAc+V,eACrBsG,SAASnG,EAAI2G,WAAY0E,GAC/BvjB,EAAMse,OAAOpG,EAAI2G,WAAY0E,GAC7BvjB,EAAMiY,UAAS,IAEfuL,EAAWn5B,KAAK2X,cAAchT,cAAc,SACnC2J,GAAK8qB,EACdD,EAAS3zB,YAAYxF,KAAK2X,cAAc4W,eAbnB,WAcrB5Y,EAAM6Y,WAAW2K,GACjBtL,EAAIC,kBACJD,EAAIE,SAASsL,GACb,IAAIb,EAAOW,EAAS3H,wBAChBuF,EAAMtgC,SAASugC,gBACfC,GAAcroB,OAAOsoB,aAAeH,EAAII,aAAeJ,EAAIK,YAAc,GACzEC,GAAazoB,OAAO0oB,aAAeP,EAAI9W,YAAc8W,EAAIQ,WAAa,GACtExX,EAAO,EACPF,EAAM,EAEN7f,KAAKy4B,qBACP1Y,EAAOyY,EAAKzY,KACZF,EAAM2Y,EAAK3Y,MAEXE,EAAOoZ,EAASrZ,WAChBD,EAAMsZ,EAAST,WAGjB,IAAI9F,EAAc,CAChB7S,KAAMA,EAAOkX,EACbpX,IAAKA,EAAMsZ,EAAS/F,aAAeiE,GAEjCR,EAAcjoB,OAAO4kB,WACrBsD,EAAeloB,OAAO8kB,YACtBR,EAAiBlzB,KAAK84B,oBACtBzF,EAAkBrzB,KAAKszB,gBAAgBV,EAAaM,GAEpDG,EAAgBL,QAClBJ,EAAY7S,KAAO,OACnB6S,EAAYI,MAAQ6D,EAAc2B,EAAKzY,KAAOkX,GAGhD,IAAI8B,EAAe/4B,KAAK2U,QAAQY,cAAgBvV,KAAK2U,QAAQY,cAAc6d,aAAepzB,KAAK2X,cAAcD,KAAK0b,aAElH,GAAIC,EAAgB3B,OAAQ,CAC1B,IACIsH,EAAuBD,GAAgBjC,GAD1B92B,KAAK2U,QAAQY,cAAgBvV,KAAK2U,QAAQY,cAAcic,wBAA0BxxB,KAAK2X,cAAcD,KAAK8Z,yBACtD3R,KACrE+S,EAAY/S,IAAM,OAClB+S,EAAYlB,OAASsH,GAAwBlC,EAAe0B,EAAK3Y,IACnE,CAeA,OAbAwT,EAAkBrzB,KAAKszB,gBAAgBV,EAAaM,IAEhCnT,OAClB6S,EAAY7S,KAAO8W,EAAc3D,EAAexT,MAAQuX,EAAaJ,EAAc3D,EAAexT,MAAQuX,SACnGrE,EAAYI,OAGjBK,EAAgBxT,MAClB+S,EAAY/S,IAAMiX,EAAe5D,EAAe5U,OAAS+Y,EAAYP,EAAe5D,EAAe5U,OAAS+Y,SACrGzE,EAAYlB,QAGrByH,EAAS7xB,WAAW2xB,YAAYE,GACzBvG,CACT,GACC,CACDn0B,IAAK,iBACLhG,MAAO,SAAwBuU,GAC7B,IACIssB,EAEAthC,EAAIgI,KAAKyX,KACb,GAAiB,qBAANzf,EAAX,CAEA,UAAsBmH,IAAfm6B,GAAkD,IAAtBA,EAAWhb,QAG5C,GAA0B,KAF1Bgb,EAAathC,EAAEw5B,yBAEAlT,cAGHnf,KAFVnH,EAAIA,EAAE47B,WAAW,MAEO57B,EAAEw5B,uBACxB,OAKN,IAAI+H,EAAUD,EAAWzZ,IACrB2Z,EAAaD,EAAUD,EAAWhb,OAEtC,GAAIib,EAAU,EACZ3qB,OAAO6c,SAAS,EAAG7c,OAAO0oB,YAAcgC,EAAWzZ,IAtB9B,SAuBhB,GAAI2Z,EAAa5qB,OAAO8kB,YAAa,CAC1C,IAAI+F,EAAO7qB,OAAO0oB,YAAcgC,EAAWzZ,IAxBtB,GA0BjB4Z,EAAO7qB,OAAO0oB,YAxBQ,MAyBxBmC,EAAO7qB,OAAO0oB,YAzBU,KA4B1B,IAAIoC,EAAU9qB,OAAO0oB,aAAe1oB,OAAO8kB,YAAc8F,GAErDE,EAAUD,IACZC,EAAUD,GAGZ7qB,OAAO6c,SAAS,EAAGiO,EACrB,CAjCoC,CAkCtC,GACC,CACDj7B,IAAK,sBACLqJ,IAAK,WACH,OAAO9H,KAAK2U,QAAQY,gBAAkB9e,SAASihB,OAAS1X,KAAK2U,QAAQY,aACvE,MA7mB0E5W,EAAkBmB,EAAY1H,UAAW0L,GAAiBC,GAAapF,EAAkBmB,EAAaiE,GAgnB3K2uB,CACT,CA5mBA,GA+mBAjL,EAAiB,QAAIkB,EACrBhB,EAAOF,QAAUA,EAAO,OAExB,EAAE,CAAC,GAAG,EAAE,CAAC,SAASC,EAAQC,EAAOF,GACjC,aASA,SAAS9oB,EAAkBC,EAAQC,GAAS,IAAK,IAAInG,EAAI,EAAGA,EAAImG,EAAMhC,OAAQnE,IAAK,CAAE,IAAIoG,EAAaD,EAAMnG,GAAIoG,EAAW3F,WAAa2F,EAAW3F,aAAc,EAAO2F,EAAW1F,cAAe,EAAU,UAAW0F,IAAYA,EAAWzF,UAAW,GAAMlB,OAAOK,eAAeoG,EAAQE,EAAWL,IAAKK,EAAa,CAAE,CAP5T3G,OAAOK,eAAeivB,EAAS,aAAc,CAC3ChvB,OAAO,IAETgvB,EAAiB,aAAI,EASrB,IAqKIkB,EAnKJ,WACE,SAASgR,EAAchlB,IAVzB,SAAyB9U,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIhE,UAAU,oCAAwC,CAWpJiE,CAAgBC,KAAM25B,GAEtB35B,KAAK2U,QAAUA,EACf3U,KAAK2U,QAAQ/D,OAAS5Q,IACxB,CAXF,IAAsBF,EAAagE,EAAYC,EAqK7C,OArKoBjE,EAaP65B,GAboB71B,EAaL,CAAC,CAC3BrF,IAAK,eACLhG,MAAO,SAAsBmhC,EAASroB,GACpC,IAAI7R,EAAQM,KAEZ,OAAOuR,EAAM/O,QAAO,SAAUuoB,GAC5B,OAAOrrB,EAAM+E,KAAKm1B,EAAS7O,EAC7B,GACF,GACC,CACDtsB,IAAK,OACLhG,MAAO,SAAcmhC,EAAS7O,GAC5B,OAAuC,OAAhC/qB,KAAKkR,MAAM0oB,EAAS7O,EAC7B,GACC,CACDtsB,IAAK,QACLhG,MAAO,SAAemhC,EAAS7O,EAAQ1hB,GACrCA,EAAOA,GAAQ,CAAC,EAGN0hB,EAAOluB,OAFjB,IAKIovB,EAAM5iB,EAAK4iB,KAAO,GAClBnX,EAAOzL,EAAKyL,MAAQ,GACpB+kB,EAAgBxwB,EAAKywB,eAAiB/O,GAAUA,EAAOjI,cAI3D,GAAIzZ,EAAK6iB,KACP,MAAO,CACL6N,SAAUhP,EACViP,MAAO,GAIXJ,EAAUvwB,EAAKywB,eAAiBF,GAAWA,EAAQ9W,cACnD,IAAImX,EAAej6B,KAAKk6B,SAASL,EAAeD,EAAS,EAAG,EAAG,IAE/D,OAAKK,EAIE,CACLF,SAAU/5B,KAAKm6B,OAAOpP,EAAQkP,EAAaG,MAAOnO,EAAKnX,GACvDklB,MAAOC,EAAaD,OALb,IAOX,GACC,CACDv7B,IAAK,WACLhG,MAAO,SAAkBsyB,EAAQ6O,EAASS,EAAaC,EAAcL,GAEnE,GAAIL,EAAQ/8B,SAAWy9B,EAErB,MAAO,CACLN,MAAOh6B,KAAKu6B,eAAeN,GAC3BG,MAAOH,EAAap8B,SAKxB,KAAIktB,EAAOluB,SAAWw9B,GAAeT,EAAQ/8B,OAASy9B,EAAevP,EAAOluB,OAASw9B,GAArF,CAQA,IAJA,IAEIG,EAAMC,EAFN3hC,EAAI8gC,EAAQU,GACZxtB,EAAQie,EAAO/X,QAAQla,EAAGuhC,GAGvBvtB,GAAS,GAAG,CAKjB,GAJAmtB,EAAaz9B,KAAKsQ,GAClB2tB,EAAOz6B,KAAKk6B,SAASnP,EAAQ6O,EAAS9sB,EAAQ,EAAGwtB,EAAe,EAAGL,GACnEA,EAAav8B,OAER+8B,EACH,OAAOD,IAGJA,GAAQA,EAAKR,MAAQS,EAAKT,SAC7BQ,EAAOC,GAGT3tB,EAAQie,EAAO/X,QAAQla,EAAGgU,EAAQ,EACpC,CAEA,OAAO0tB,CAtBP,CAuBF,GACC,CACD/7B,IAAK,iBACLhG,MAAO,SAAwBwhC,GAC7B,IAAID,EAAQ,EACRS,EAAO,EAYX,OAXAR,EAAar/B,SAAQ,SAAUkS,EAAOpU,GAChCA,EAAI,IACFuhC,EAAavhC,EAAI,GAAK,IAAMoU,EAC9B2tB,GAAQA,EAAO,EAEfA,EAAO,GAIXT,GAASS,CACX,IACOT,CACT,GACC,CACDv7B,IAAK,SACLhG,MAAO,SAAgBsyB,EAAQ2P,EAASzO,EAAKnX,GAC3C,IAAIilB,EAAWhP,EAAO5D,UAAU,EAAGuT,EAAQ,IAI3C,OAHAA,EAAQ9/B,SAAQ,SAAUkS,EAAOpU,GAC/BqhC,GAAY9N,EAAMlB,EAAOje,GAASgI,EAAOiW,EAAO5D,UAAUra,EAAQ,EAAG4tB,EAAQhiC,EAAI,GAAKgiC,EAAQhiC,EAAI,GAAKqyB,EAAOluB,OAChH,IACOk9B,CACT,GACC,CACDt7B,IAAK,SACLhG,MAAO,SAAgBmhC,EAAS/2B,EAAKwG,GACnC,IAAIvE,EAAS9E,KAGb,OADAqJ,EAAOA,GAAQ,CAAC,EACTxG,EAAIsO,QAAO,SAAUxT,EAAMsC,EAAS2C,EAAKC,GAC9C,IAAI6H,EAAMzK,EAENoJ,EAAK8iB,WACPzhB,EAAMrB,EAAK8iB,QAAQlsB,MAIjByK,EAAM,KAIV,IAAIqvB,EAAWj1B,EAAOoM,MAAM0oB,EAASlvB,EAAKrB,GAW1C,OATgB,MAAZ0wB,IACFp8B,EAAKA,EAAKd,QAAU,CAClBkuB,OAAQgP,EAASA,SACjBC,MAAOD,EAASC,MAChBltB,MAAOlK,EACPmT,SAAU9V,IAIPtC,CACT,GAAG,IAAImM,MAAK,SAAUlR,EAAG2mB,GACvB,IAAIob,EAAUpb,EAAEya,MAAQphC,EAAEohC,MAC1B,OAAIW,GACG/hC,EAAEkU,MAAQyS,EAAEzS,KACrB,GACF,MAlK0EnO,EAAkBmB,EAAY1H,UAAW0L,GAAiBC,GAAapF,EAAkBmB,EAAaiE,GAqK3K41B,CACT,CAjKA,GAoKAlS,EAAiB,QAAIkB,EACrBhB,EAAOF,QAAUA,EAAO,OAExB,EAAE,CAAC,GAAG,EAAE,CAAC,SAASC,EAAQC,EAAOF,GACjC,aAOA,IAEgCQ,EAPhC9vB,OAAOK,eAAeivB,EAAS,aAAc,CAC3ChvB,OAAO,IAETgvB,EAAiB,aAAI,EAUrB,IAAIkB,IAN4BV,EAFMP,EAAQ,eAEOO,EAAIC,WAAaD,EAAM,CAAE,QAAWA,IAMxD,QACjCR,EAAiB,QAAIkB,EACrBhB,EAAOF,QAAUA,EAAO,OAExB,EAAE,CAAC,YAAY,IAAI,EAAE,CAAC,SAASC,EAAQC,EAAOF,GAC9C,aA6BA,GA3BKzb,MAAM5T,UAAUiQ,OACnB2D,MAAM5T,UAAUiQ,KAAO,SAAUuyB,GAC/B,GAAa,OAAT56B,KACF,MAAM,IAAIlE,UAAU,oDAGtB,GAAyB,oBAAd8+B,EACT,MAAM,IAAI9+B,UAAU,gCAQtB,IALA,IAGIrD,EAHAgK,EAAOtK,OAAO6H,MACdnD,EAAS4F,EAAK5F,SAAW,EACzBg+B,EAAUj7B,UAAU,GAGflH,EAAI,EAAGA,EAAImE,EAAQnE,IAG1B,GAFAD,EAAQgK,EAAK/J,GAETkiC,EAAU/gC,KAAKghC,EAASpiC,EAAOC,EAAG+J,GACpC,OAAOhK,CAKb,GAGEmW,QAAwC,oBAAvBA,OAAO2d,YAA4B,CACtD,IAAIA,EAAc,SAAqB51B,EAAOmc,GAC5CA,EAASA,GAAU,CACjBgoB,SAAS,EACTC,YAAY,EACZ92B,YAAQ9E,GAEV,IAAIiG,EAAM3O,SAASukC,YAAY,eAE/B,OADA51B,EAAI61B,gBAAgBtkC,EAAOmc,EAAOgoB,QAAShoB,EAAOioB,WAAYjoB,EAAO7O,QAC9DmB,CACT,EAE4B,qBAAjBwJ,OAAOssB,QAChB3O,EAAYn0B,UAAYwW,OAAOssB,MAAM9iC,WAGvCwW,OAAO2d,YAAcA,CACvB,CAEA,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,GA11DqW,CA01DjW,EACf,EA31DiC,WAAHvxB,EAAPysB,GAAiDE,EAAOF,QAAQztB,KAAoDd,EAAO,QAAI,2BAAF,KAAE,wjCCFtJ1C,GAAE,WAEA,IAKM2kC,EAIgBC,EAThBC,EAAc,CAAC,EACfC,EAAmB,CAAC,EACpBC,EAAgB,CAAC,EAejBC,EAAqB,SAAC7kC,GAC1BA,EAAMC,iBACN,IAAI6kC,EAAajlC,EAAEG,EAAMiI,QAAQkP,QAAQ,sBAAsBlM,KAAK,UAChE85B,EAAa,+BAEjBA,GAAc,gBACdL,EAAYI,GAAY7gC,SAAQ,SAAC+gC,GAC/BD,GAAU,GAAA1kC,OAAO2kC,EAAWl9B,IAAG,KAAAzH,OAAI2kC,EAAWljC,MAAK,OACrD,IAGA,IAAI5B,EAAOJ,SAASkO,cAAc,KAClC9N,EAAKsO,aAAa,OAAQy2B,UAAUF,IACpC7kC,EAAKsO,aAAa,WAAW,GAADnO,OAAKykC,EAAU,qBAC3ChlC,SAASihB,KAAKlS,YAAY3O,GAC1BA,EAAK+R,QACLnS,SAASihB,KAAKuhB,YAAYpiC,EAC5B,EAEAL,EAAE,yBAAyB+P,MAAK,SAACC,EAAQq1B,GACvCP,EAAiB9kC,EAAEqlC,GAAWj6B,KAAK,WAAai6B,CAClD,IACArlC,EAAE,sBAAsB+P,MAAK,SAACC,EAAQq1B,GACpCA,EAAUC,QAAUN,CACtB,IAEKhlC,EAAEulC,cAAcT,KAlCCF,EAmCPjjC,OAAOqF,KAAK89B,GAlCzBC,EAAcS,MAAQroB,KAAKC,UAAUwnB,GAAW,IAChDG,EAAcU,UAAYzlC,EAAE,gCAAgCuM,OAAS,KACrEw4B,EAAcW,QAAU1lC,EAAE,8BAA8BuM,OAAS,KAGxCvM,EAAEse,KAAK,QAV5BqmB,EAAY,kBAAAnkC,OAAqBukC,EAAcS,MAAK,mBAAAhlC,OAAkBukC,EAAcU,UAAS,iBAAAjlC,OAAgBukC,EAAcW,QAAO,oCAC/H,CAACn6B,MAAM,KAAD/K,OAAOmkC,EAAY,SAuCxBhgC,MAAK,SAAC4Z,GACRA,EAASnT,KACXpL,EAAE+P,KAAKwO,EAASnT,KAAKw5B,SAAS,SAAC50B,EAAQm1B,GACrC,IAAIE,EAAYP,EAAiBK,EAAW1+B,MAC5C,GAAkC,IAA9B0+B,EAAWQ,QAAQt/B,OAAvB,CAIA,IAAI6B,EAAOlI,EAAEqlC,GAAWj6B,KAAK,QAC7By5B,EAAYM,EAAW1+B,MAAQzG,EAAE2uB,QAAO,EAAM,GAAIwW,EAAWQ,SC9CxD,WAA+B,IAAZ9yB,EAAIzJ,UAAA/C,OAAA,QAAAsC,IAAAS,UAAA,GAAAA,UAAA,GAAG,CAAC,EAsBpCgC,EApBc,SAACA,GAQjB,OANAA,EAAKhH,SAAQ,SAACN,GACZA,EAAEmE,KAAM29B,EAAAA,EAAAA,GAAS9hC,EAAEmE,KACnBnE,EAAE7B,MAAQ6G,OAAOhF,EAAE7B,MACrB,IAGOmJ,EAAKkI,MAAK,SAACuyB,EAAGniC,GAAC,OAAKoiC,EAAAA,EAAAA,IAAUD,EAAE59B,IAAKvE,EAAEuE,IAAI,GACpD,CAWW89B,CAAUlzB,EAAKzH,MACtB46B,EAAQnzB,EAAKmzB,MACbC,EAAapzB,EAAKozB,YAAc,GAChCZ,GAAY1N,EAAAA,EAAAA,GAAO9kB,EAAKwyB,WACxBa,EAAWrzB,EAAKszB,OAAQ,EACxBC,GAASvzB,EAAKuzB,OAAS,IAAIriB,MAAM,KAAKpJ,QAAO,SAACvY,EAAG2mB,GAAC,OAAK3mB,EAAI2mB,CAAC,KAAM,EAAI,EACtEsd,IAAc1kC,OAAO4iB,GAAG1R,EAAKyzB,SAAK39B,IAAoBkK,EAAKyzB,IAC9CzzB,EAAK0zB,MAGpBn7B,EAAiBA,EAlBY+F,KAAI,SAAChF,EAAMmK,EAAOyE,GAI/C,OAHIzE,EAAQ,IACVnK,EAAKlK,OAAS8Y,EAAMzE,EAAQ,GAAGrU,OAE1BkK,CACT,KAiBA,IAAIq6B,EACG,EADHA,EAEK,EAFLA,EAGM,EAHNA,EAII,EAGJtd,EAAQpgB,OAAOu8B,EAAU9wB,OAAOymB,wBAAwB9R,OAASsd,EAAcA,EAC/E1e,EAAUoB,EAAQkd,EAASI,EAAaA,EACxCC,GAAepY,EAAAA,EAAAA,IAAI,CAACnF,EAAQ,GAAI,KAGhC2c,GAAIa,EAAAA,EAAAA,MAAYvnB,MAAM,CAAC,EAAG+J,IAC1BxlB,GAAIijC,EAAAA,EAAAA,MAAcxnB,MAAM,CAAC2I,EAAQ,IAGjC8e,GAAQC,EAAAA,EAAAA,KACThB,GAAE,SAAC/hC,GAAC,OAAK+hC,EAAE/hC,EAAEmE,IAAI,IACjB6+B,GAAGhf,GACHif,IAAG,SAACjjC,GAAC,OAAKJ,EAAEI,EAAE7B,MAAM,IAGnB+kC,GAAYC,EAAAA,EAAAA,KACbpB,GAAE,SAAC/hC,GAAC,OAAK+hC,EAAE/hC,EAAEmE,IAAI,IACjBvE,GAAE,SAACI,GAAC,OAAKJ,EAAEI,EAAE7B,MAAM,IAElBwe,EAAM4kB,EAAUtf,OAAO,OACxB7U,KAAK,QAASgY,EAAQsd,EAAcA,GACpCt1B,KAAK,SAAU4W,EAAS0e,EAAaA,GACrCzgB,OAAO,KACP7U,KAAK,YAAY,aAAD1Q,OAAegmC,EAAW,KAAAhmC,OAAIgmC,EAAU,MAkB3D,GAfAX,EAAEqB,QAAOC,EAAAA,EAAAA,IAAO/7B,GAAM,SAACtH,GAAC,OAAKA,EAAEmE,GAAG,KAClCvE,EAAEwjC,OAAO,CAAC,GAAG9Y,EAAAA,EAAAA,IAAIhjB,GAAM,SAACtH,GAAC,OAAKA,EAAE7B,KAAK,MAAImlC,OAG3B3mB,EAAIsF,OAAO,QACtB3a,KAAK,CAACA,IACN8F,KAAK,QAAS,QACdA,KAAK,IAAK81B,GAGbvmB,EAAIsF,OAAO,QACR3a,KAAK,CAACA,IACN8F,KAAK,QAAS,QACdA,KAAK,IAAK01B,GAETP,EAAa,CAEf,IAAIgB,EAAS5mB,EAAIsF,OAAO,UACrB7U,KAAK,QAAS,UACdA,KAAK,IAAK,GACVtE,MAAM,UAAW,QAEhB06B,GAAU3P,EAAAA,EAAAA,GAAO,QAAQ5R,OAAO,OACjC7U,KAAK,KAAK,GAAD1Q,OAAK6kC,EAAU9wB,OAAOuD,GAAE,aACjC5G,KAAK,QAAS,iBACdtE,MAAM,UAAW,GAEpB6T,EACGvgB,GAAG,aAAa,WACfmnC,EAAOz6B,MAAM,UAAW,MACxB06B,EAAQ16B,MAAM,UAAW,EAC3B,IACC1M,GAAG,YAAY,WACdmnC,EAAOz6B,MAAM,UAAW,QACxB06B,EAAQ16B,MAAM,UAAW,EAC3B,IACC1M,GAAG,aAAa,WACf,IAAIqnC,EAAK1B,EAAE2B,QAAOC,EAAAA,EAAAA,GAAMj+B,MAAM,IAC1BtH,GAAIwlC,EAAAA,EAAAA,KAAS,SAAC5jC,GAAC,OAAKA,EAAEmE,GAAG,IAAEshB,KAAKne,EAAMm8B,EAAI,GAC1CI,EAAKv8B,EAAKlJ,EAAI,GACd0lC,EAAKx8B,EAAKlJ,GACV4B,EAAKyjC,EAAKI,EAAG1/B,IAAM2/B,EAAG3/B,IAAMs/B,EAAMK,EAAKD,EAGvCE,EACCzvB,OAAOsoB,YAAc2E,EAAU9wB,OAAOymB,wBAAwBzR,KAD/Dse,EAECzvB,OAAO0oB,YAAcuE,EAAU9wB,OAAOymB,wBAAwB3R,IAG/Dye,EAAc,0DAAAtnC,QAEZunC,EAAAA,EAAAA,IAAW,WAAXA,CAAuBjkC,EAAEmE,KAAI,wBAAAzH,OAC7BsD,EAAE7B,MAAM+lC,iBAAgB,KAAAxnC,OAAIylC,EAAU,sBAG5CoB,EAAOn2B,KAAK,YAAY,aAAD1Q,OAAeqlC,EAAE/hC,EAAEmE,KAAI,KAAAzH,OAAIkD,EAAEI,EAAE7B,OAAM,MAC5DqlC,EAAQ3mC,KAAKmnC,GACVl7B,MAAM,OAAO,GAADpM,OAAKqnC,EAAWhC,EAAE/hC,EAAEmE,KAAI,OACpC2E,MAAM,MAAM,GAADpM,OAAKqnC,EAAWnkC,EAAEI,EAAE7B,OAAM,MAC1C,GACJ,CAEA,GAAIikC,EAAU,CACZ,IAAI+B,GAAQC,EAAAA,EAAAA,IAAWrC,GACpBsC,MAAMC,EAAAA,GACNC,YAAWN,EAAAA,EAAAA,IAAW,UACtBO,UAAUxgB,GACTygB,GAAQC,EAAAA,EAAAA,IAAS9kC,GAClBykC,MAAM,GACNG,SAAS,GAgBZ7nB,EAAIsF,OAAO,KACR7U,KAAK,YAAY,eAAD1Q,OAAiBsnB,EAAM,MACvCzkB,MAhBU,SAACa,GACZA,EAAEb,KAAK4kC,GACP/jC,EAAEyzB,OAAO,WAAW7oB,SACpB5K,EAAEukC,UAAU,cAAcv3B,KAAK,QAAS,UACxChN,EAAEukC,UAAU,cAAcv3B,KAAK,IAAK,EACtC,IAcAuP,EAAIsF,OAAO,KACR1iB,MAdU,SAACa,GACZA,EAAEb,KAAKklC,GACPrkC,EAAEyzB,OAAO,WAAW7oB,SACpB5K,EAAEyzB,OAAO,uBAAuB7oB,SAChC5K,EAAEukC,UAAU,cAAcv3B,KAAK,cAAe,SAASA,KAAK,IAAK,EACnE,IAYA,IAAIhN,EAAIuc,EAAIsF,OAAO,KAChB3a,KAAK,CAACA,IACN8F,KAAK,aAAa,SAACpN,GAAC,mBAAAtD,OAAkBqlC,EAAE/hC,EAAEA,EAAEuC,OAAS,GAAG4B,KAAI,KAAAzH,OAAIkD,EAAEI,EAAEA,EAAEuC,OAAS,GAAGpE,OAAM,QAE3FiC,EAAE6hB,OAAO,UACN7U,KAAK,QAAS,UACdA,KAAK,IAAK,GAEbhN,EAAE6hB,OAAO,QACN7U,KAAK,QAAS,OACdA,KAAK,cAAe,OACpBA,KAAK,MAAM,IACXG,MAAK,SAACvN,GAAC,OAAKA,EAAEA,EAAEuC,OAAS,GAAGpE,MAAM+lC,gBAAgB,GAEvD,KAAO,CAEL,IAAIU,EAAIjoB,EAAIsF,OAAO,KAChB7U,KAAK,cAAe,SACpBA,KAAK,YAAY,aAAD1Q,OAAeimC,EAAY,KAAAjmC,OAAIimC,EAAY,MAE1DkC,EAAa,EAEb3C,EAAM3/B,QACRqiC,EAAE3iB,OAAO,QACN7U,KAAK,IAAK,GACVA,KAAK,IAAK,GACVA,KAAK,QAAS,SACdG,KAAK20B,GACL3iC,MAAK,SAASulC,EAAUC,GACvBD,EAAS74B,MAAK,WAiBZ,IAhBA,IAAIsB,GAAOsmB,EAAAA,EAAAA,GAAOnuB,MACds/B,EAAO,GACPC,EAAQ13B,EAAKA,OAAO0S,MAAM,OAAO9c,UACjC+hC,EAAQ,GACRC,EAAa,EAEbl9B,EAAKsF,EAAKH,KAAK,KACfg4B,EAAK73B,EAAKH,KAAK,KAEfi4B,EAAQ93B,EAAKA,KAAK,MACnB0U,OAAO,SACP7U,KAAK,IAAKnF,GACVmF,KAAK,IAAKg4B,GACVh4B,KAAK,KAAK,GAAD1Q,OALH,EAKU,OAGZsoC,EAAOC,EAAM7hC,OAClB8hC,EAAMhjC,KAAK8iC,GACXK,EAAM93B,KAAK23B,EAAMnd,KAAK,MAClBsd,EAAM50B,OAAO60B,wBAA0BP,IACzCG,EAAM9hC,MACNiiC,EAAM93B,KAAK23B,EAAMnd,KAAK,MACtBmd,EAAQ,CAACF,GACTK,EAAQ93B,EAAK0U,OAAO,SACjB7U,KAAK,IAAKnF,GACVmF,KAAK,IAAKg4B,GACVh4B,KAAK,KAAK,GAAD1Q,OArBC,MAqBOyoC,EAlBf,EAkB4C,OAC9C53B,KAAKy3B,IAIZH,EA1BiB,IA0BJM,CACf,GACF,GAAG/f,EAAwB,EAAfud,GAGhB,IAAIrE,EAAW5G,WAAWD,iBAAiBmN,EAAEn0B,QAAQ6tB,UAErDsG,EAAE3iB,OAAO,QACN7U,KAAK,IAAK,GACVA,KAAK,KAAM80B,EAAM3/B,OAAyB,EAAfogC,EAAqBkC,EAAavG,EAA4B,KAAfqE,GAC1Ev1B,KAAK,QAAS,OACdG,KAAKjG,EAAKA,EAAK/E,OAAS,GAAGpE,MAAM+lC,iBACtC,CACF,CD9LUqB,gWAASC,CAAC,CACRjE,UAAU,IAAD7kC,OAAM6kC,EAAUvtB,IACzB1M,KAAM+5B,EAAWQ,QACjBK,MAAO99B,EAAK89B,MACZC,WAAY/9B,EAAKqhC,QACdvpC,EAAEqlC,GAAWj6B,QARlB,MAFEpL,EAAEqlC,GAAWv2B,QAYjB,IACSyP,EAASirB,SAClBpV,QAAQqV,IAAI,mDACZzpC,EAAE+P,KAAKwO,EAASirB,QAAQ,SAACx5B,EAAQ7O,GAC/BizB,QAAQqV,IAAItoC,EAAMuoC,QACpB,IACA1pC,EAAE,YAAY8O,SAElB,IAAG2P,MAAK,SAAC3S,GACPsoB,QAAQqV,IAAI,mDAADjpC,OAAoDsL,EAAI69B,aACnE3pC,EAAE,YAAY8O,QAChB,IAEJ","sources":["webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/ajax_modals.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/autocomplete.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/data_picker.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/form_datepicker.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/delayed.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/check_boxes_tree.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/form_filter.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/foundation-datepicker/js/locales/foundation-datepicker.lb.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/gallery.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/input_hashtags.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/input_mentions.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/session_timeouter.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/vendor/foundation-datepicker.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/vendor/tribute.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/vizzs/index.js","webpack://app/../.rbenv/versions/3.0.2/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/vizzs/areachart.js"],"sourcesContent":["$(() => {\n  $(document).on(\"click\", \"a[data-open-url],button[data-open-url]\", (event) => {\n    event.preventDefault();\n    const link = event.currentTarget;\n    const $modal = $(`#${link.dataset.open}`);\n    $modal.html(\"<div class='loading-spinner'></div>\");\n    $.ajax({\n      type: \"get\",\n      url: link.dataset.openUrl,\n      success: (html) => {\n        const $html = $(html);\n        $modal.html($html);\n        $html.foundation();\n      },\n      error: function (request, status, error) {\n        $modal.html(`<h3>${status}</h3><p>${error}</p>`);\n      }\n    });\n  });\n});\n","/* eslint max-lines: [\"error\", 350] */\n\nimport AutoCompleteJS from \"@tarekraafat/autocomplete.js\";\n\nexport default class AutoComplete {\n  constructor(el, options = {}) {\n    this.element = el;\n    this.stickySelectedSpan = null;\n    this.clearStickySelectionSpan = null;\n    this.stickyHiddenInput = null;\n    this.promptDiv = null;\n    const thresholdTemp = options.threshold || 2;\n    this.options = Object.assign({\n      // Defines name of the hidden input (e.g. assembly_member[user_id])\n      name: null,\n      // Placeholder of the visible input field\n      placeholder: \"\",\n      // Defines what happens after user has selected value from suggestions\n      // sticky - Allows selecting a single value and not editing the value after selected (e.g. as the admin autocomplete fields)\n      // single - Allows selecting a single value and editing the selected text after the selection (e.g. geocoding field)\n      // multi - Allows selecting multiple values\n      // null (default) - Disable selection event handling in this class\n      mode: null,\n      // Defines if we show input help (e.g. \"Type at least three characters to search\") or not.\n      searchPrompt: false,\n      // Defines search prompt message, only shown if showPrompt is enabled!\n      searchPromptText: `Type at least ${thresholdTemp} characters to search`,\n      // Defines items that are selected already when page is loaded before user selects them. (e.g. when form submit fails)\n      selected: null,\n      // Defines how many characters input has to have before we start searching\n      threshold: thresholdTemp,\n      // Defines how many results to show in the autocomplete selection list\n      // by maximum.\n      maxResults: 10,\n      // Defines the data keys against which to match the user input when\n      // searching through the results. For example, when the following\n      // data is returned by the API:\n      //   { id: 123, name: \"John\", nickname: \"john\", __typename: \"User\" }\n      //\n      // You can define the data keys array as [\"name\", \"nickname\"] in\n      // which case the results shown to user would be only those that\n      // have matching text in these defined fields.\n      dataMatchKeys: null,\n      // The data source is a method that gets the callback parameter as\n      // its first argument which should be called with the results array\n      // once they are returned by the API.\n      // For example:\n      //   (query, callback) => {\n      //     (async () => {\n      //       const results = await callAjax(`/api/url?query=${query}`);\n      //       callback(results);\n      //     })();\n      //   }\n      //\n      // Signature: (callback: Function)\n      dataSource: () => [],\n      // Filters the data list returned by the data source before it is shown\n      // to the user. Can be used e.g. to hide already selected values from\n      // the list.\n      dataFilter: null,\n      // Delay in milliseconds how long to wait after user action before\n      // doing a backend request.\n      delay: 200,\n      // Allows modifying the suggested items before they are displayed in the list\n      // Signature: (element: HTMLElement, value: Object)\n      modifyResult: null\n    }, options);\n\n    this.autocomplete = new AutoCompleteJS({\n      selector: () => this.element,\n      diacritics: true,\n      placeHolder: options.placeholder,\n      // Delay (milliseconds) before autocomplete engine starts. It's preventing many queries when user is typing fast.\n      debounce: 200,\n      threshold: this.options.threshold,\n      data: {\n        keys: this.options.dataMatchKeys,\n        src: async (query) => {\n          const fetchResults = () => {\n            return new Promise((resolve) => {\n              this.options.dataSource(query, resolve);\n            });\n          }\n\n          try {\n            return await fetchResults();\n          } catch (error) {\n            return error;\n          }\n        },\n        filter: (list) => {\n          const results = list.filter(\n            (item, idx, arr) => {\n              return arr.findIndex((val) => val.value === item.value) === idx;\n            }\n          );\n\n          if (this.options.dataFilter) {\n            return this.options.dataFilter(results);\n          }\n\n          return results;\n        }\n      },\n      resultsList: {\n        maxResults: this.options.maxResults\n      },\n      resultItem: {\n        element: (item, data) => {\n          if (!this.options.modifyResult) {\n            return;\n          }\n\n          this.options.modifyResult(item, data.value);\n        }\n      },\n      events: {\n        input: {\n          blur: () => {\n            this.promptDiv.style.display = \"none\";\n          }\n        }\n      }\n    });\n\n    this.acWrapper = this.element.closest(\".autoComplete_wrapper\");\n    this.element.ac = this.autocomplete;\n\n    // Stop input field from bubbling open and close events to parent elements,\n    // because foundation closes modal from these events.\n    const stopPropagation = (event) => {\n      event.stopPropagation();\n    }\n    this.element.addEventListener(\"close\", stopPropagation);\n    this.element.addEventListener(\"open\", stopPropagation);\n\n    this.createPromptDiv();\n\n    switch (this.options.mode) {\n    case \"sticky\":\n      this.createStickySelect(this.options.name);\n      break;\n    case \"multi\":\n      this.createMultiSelect(this.options.name);\n      break;\n    default:\n    }\n  }\n\n  setInput(value) {\n    this.autocomplete.input.value = value;\n  }\n\n  handleEvent(event) {\n    switch (this.options.mode) {\n    case \"single\":\n      this.setInput(event.detail.selection.value[event.detail.selection.key]);\n      break;\n    case \"sticky\":\n      this.handleStickyEvents(event);\n      break;\n    case \"multi\":\n      this.handleMultiEvents(event);\n      break;\n    default:\n    }\n  }\n\n  handleMultiEvents(event) {\n    switch (event.type) {\n    case \"selection\":\n      this.addMultiSelectItem(event.detail.selection);\n      break;\n    default:\n    }\n  }\n\n  handleStickyEvents(event) {\n    switch (event.type) {\n    case \"selection\":\n      this.addStickySelectItem(event.detail.selection);\n      break;\n    case \"click\":\n      if (event.target === this.clearStickySelectionSpan) {\n        this.removeStickySelection();\n      }\n      break;\n    case \"keyup\":\n      if (this.stickyHiddenInput.value !== \"\" && event.target === this.element && ([\"Escape\", \"Backspace\", \"Delete\"].includes(event.key) || (/^[a-z0-9]$/i).test(event.key))) {\n        this.removeStickySelection();\n      } else if (this.options.searchPrompt) {\n        if (this.stickyHiddenInput.value === \"\" && this.element.value.length < this.options.threshold) {\n          this.promptDiv.style.display = \"block\";\n        } else {\n          this.promptDiv.style.display = \"none\";\n        }\n      }\n      break;\n    default:\n    }\n  }\n\n  createHiddenInput(value) {\n    const hiddenInput = document.createElement(\"input\");\n    hiddenInput.name = this.options.name;\n    hiddenInput.type = \"hidden\";\n    if (value) {\n      hiddenInput.value = value;\n    }\n    this.acWrapper.prepend(hiddenInput);\n    return hiddenInput;\n  }\n\n  removeStickySelection() {\n    this.stickyHiddenInput.value = \"\";\n    this.element.placeholder = this.options.placeholder;\n    this.clearStickySelectionSpan.style.display = \"none\";\n    this.stickySelectedSpan.style.display = \"none\";\n  }\n\n  addStickySelectItem(selection) {\n    this.stickyHiddenInput.value = selection.value.value;\n    this.element.placeholder = \"\";\n    this.stickySelectedSpan.innerHTML = selection.value[selection.key];\n    this.stickySelectedSpan.style.display = \"block\";\n    this.clearStickySelectionSpan.style.display = \"block\";\n    this.setInput(\"\");\n  }\n\n  addMultiSelectItem(selection) {\n    this.setInput(\"\");\n    const chosen = document.createElement(\"span\");\n    chosen.classList.add(\"label\", \"primary\", \"autocomplete__selected-item\", \"multi\");\n    chosen.innerHTML = selection.value[selection.key];\n    const clearSelection = document.createElement(\"span\");\n    clearSelection.classList.add(\"clear-multi-selection\");\n    clearSelection.innerHTML = \"&times;\";\n    clearSelection.setAttribute(\"data-remove\", selection.value.value);\n    clearSelection.addEventListener(\"click\", (evt) => {\n      const hiddenInput = this.acWrapper.querySelector(`input[type='hidden'][value='${selection.value.value}']`);\n      if (hiddenInput) {\n        hiddenInput.remove();\n        evt.target.parentElement.remove();\n      }\n    });\n    chosen.appendChild(clearSelection);\n\n    const multiSelectWrapper = this.acWrapper.querySelector(\".multiselect\");\n    const inputContainer = multiSelectWrapper.querySelector(\"span.input-container\");\n    multiSelectWrapper.insertBefore(chosen, inputContainer);\n    this.createHiddenInput(selection.value.value);\n  }\n\n  createStickySelect() {\n    this.stickySelectedSpan = document.createElement(\"span\");\n    this.stickySelectedSpan.classList.add(\"autocomplete__selected-item\", \"sticky\");\n    this.stickySelectedSpan.style.display = \"none\";\n    this.stickySelectedSpan.addEventListener(\"click\", () => this.element.focus());\n    this.stickyHiddenInput = this.createHiddenInput();\n\n    this.clearStickySelectionSpan = document.createElement(\"span\");\n    this.clearStickySelectionSpan.className = \"clear-sticky-selection\";\n    this.clearStickySelectionSpan.innerHTML = \"&times;\";\n    this.clearStickySelectionSpan.style.display = \"none\";\n    this.clearStickySelectionSpan.addEventListener(\"click\", this);\n\n    this.element.addEventListener(\"selection\", this);\n    this.element.addEventListener(\"keyup\", this);\n\n    this.acWrapper.insertBefore(this.clearStickySelectionSpan, this.element);\n    this.acWrapper.insertBefore(this.stickySelectedSpan, this.element);\n    if (this.options.selected) {\n      this.addStickySelectItem(this.options.selected);\n    }\n  }\n\n  createMultiSelect() {\n    const multiSelectWrapper = document.createElement(\"div\");\n    multiSelectWrapper.classList.add(\"multiselect\");\n\n    const inputContainer = document.createElement(\"span\");\n    inputContainer.classList.add(\"input-container\");\n\n    multiSelectWrapper.appendChild(inputContainer);\n    this.acWrapper.prepend(multiSelectWrapper);\n    inputContainer.appendChild(this.element);\n\n    this.element.addEventListener(\"selection\", this);\n    multiSelectWrapper.addEventListener(\"click\", () => {\n      this.element.focus();\n    })\n\n    if (this.options.selected) {\n      this.options.selected.forEach((selection) => {\n        this.addMultiSelectItem(selection);\n      })\n    }\n  }\n\n  createPromptDiv() {\n    this.promptDiv = document.createElement(\"div\");\n    this.promptDiv.classList.add(\"search-prompt\");\n    this.promptDiv.style.display = \"none\";\n    this.promptDiv.innerHTML = this.options.searchPromptText;\n    this.acWrapper.appendChild(this.promptDiv);\n  }\n}\n","export default class DataPicker {\n  constructor(pickers) {\n    this.modal = this._createModalContainer();\n    this.modal.appendTo($(\"body\"));\n    this.current = null;\n\n    pickers.each((_index, picker) => {\n      this.activate(picker);\n    });\n  }\n\n  activate(picker) {\n    let $picker = $(picker);\n\n    this._setCurrentPicker($picker, null);\n\n    let input = \"hidden\",\n        name = this.current.name,\n        values = this.current.values;\n\n    if (this.current.multiple) {\n      name += \"[]\";\n    }\n\n    $(\"div\", values).each((_index2, div) => {\n      let value = $(\"a\", div).data(\"picker-value\");\n      $(div).prepend($(`<input type=\"${input}\" checked name=\"${name}\" value=\"${value}\"/>`));\n    });\n\n    $picker.on(\"click\", \"a\", (event) => {\n      event.preventDefault();\n      if ($picker.hasClass(\"disabled\")) {\n        return;\n      }\n      const isMultiPicker = $picker.hasClass(\"picker-multiple\");\n\n      if ($(this._targetFromEvent(event)).hasClass(\"picker-prompt\") || !isMultiPicker) {\n        this._openPicker($picker, this._targetFromEvent(event));\n      }  else if (this._targetFromEvent(event).tagName === \"A\") {\n        this._removeValue($picker, this._targetFromEvent(event).parentNode);\n      } else {\n        this._removeValue($picker, this._targetFromEvent(event));\n      }\n    });\n\n    $picker.on(\"click\", \"input\", (event) => {\n      this._removeValue($picker, this._targetFromEvent(event));\n    });\n\n    if (this.current.autosort) {\n      this._sort();\n    }\n  }\n\n  enabled(picker, value) {\n    $(picker).toggleClass(\"disabled\", !value);\n    $(\"input\", picker).attr(\"disabled\", !value);\n  }\n\n  clear(picker) {\n    $(\".picker-values\", picker).html(\"\");\n  }\n\n  save(picker) {\n    return $(\".picker-values div:has(input:checked)\", picker).map((_index, div) => {\n      let $link = $(\"a\", div);\n      return {\n        value: $(\"input\", div).val(),\n        text: $link.text(),\n        url: $link.attr(\"href\")\n      };\n    }).get();\n  }\n\n  load(picker, savedData) {\n    this._setCurrentPicker($(picker), null);\n    $.each(savedData, (_index, data) => {\n      this._choose(data, { interactive: false, modify: false });\n    });\n    if (this.current.autosort) {\n      this._sort();\n    }\n  }\n\n  _createModalContainer() {\n    // Add a header because we are referencing the title element with\n    // `aria-labelledby`. If the title doesn't exist, the \"labelled by\"\n    // reference is incorrect.\n    const headerHtml = '<div class=\"scope-picker picker-header\"><h6 id=\"data_picker-title\" class=\"h2\"></h6></div>';\n\n    return $(`<div class=\"small reveal\" id=\"data_picker-modal\" aria-hidden=\"true\" aria-live=\"assertive\" role=\"dialog\" aria-labelledby=\"data_picker-title\" data-reveal data-multiple-opened=\"true\">\n             <div class=\"data_picker-modal-content\">${headerHtml}</div>\n             <button class=\"close-button\" data-close type=\"button\" data-reveal-id=\"data_picker-modal\"><span aria-hidden=\"true\">&times;</span></button>\n             </div>`);\n  }\n\n  _openPicker($picker, target) {\n    this._setCurrentPicker($picker, target);\n    this._load($(\"a\", target).attr(\"href\"));\n  }\n\n  _setCurrentPicker($picker, target) {\n    let $target = false;\n    if (target && !$(target).hasClass(\"picker-prompt\")) {\n      $target = $(target);\n    }\n\n    this.current = {\n      picker: $picker,\n      name: $picker.data(\"picker-name\"),\n      values: $picker.find(\".picker-values\"),\n      multiple: $picker.hasClass(\"picker-multiple\"),\n      autosort: $picker.hasClass(\"picker-multiple\") && $picker.hasClass(\"picker-autosort\"),\n      target: $target\n    };\n  }\n\n  _load(url) {\n    $.ajax(url).done((resp) => {\n      let modalContent = $(\".data_picker-modal-content\", this.modal);\n      modalContent.html(resp);\n      this._handleLinks(modalContent);\n      this._handleCheckboxes(modalContent);\n      this.modal.foundation(\"open\");\n    });\n  }\n\n  _handleLinks(content) {\n    $(\"a\", content).each((_index, link) => {\n      let $link = $(link);\n      $link.click((event) => {\n        event.preventDefault();\n        if ($link.data(\"close\") || $link.data(\"close\") === \"\") {\n          return;\n        }\n\n        let chooseUrl = $link.attr(\"href\");\n        if (chooseUrl) {\n          if (typeof $link.data(\"picker-choose\") === \"undefined\") {\n            this._load(chooseUrl);\n          } else {\n            this._choose(\n              { url: chooseUrl, value: $link.data(\"picker-value\") || \"\", text: $link.data(\"picker-text\") || \"\" }\n            );\n          }\n        }\n      });\n    });\n  }\n\n  _handleCheckboxes(content) {\n    $(\"input[type=checkbox][data-picker-choose]\", content).each((_index, checkbox) => {\n      const $checkbox = $(checkbox);\n      checkbox.checked = this._targetFromValue($checkbox.val()) !== null;\n    }).change((event) => {\n      const $checkbox = $(event.target);\n      if (event.target.checked) {\n        this._choose(\n          { url: $checkbox.data(\"picker-url\"), value: $checkbox.val() || \"\", text: $checkbox.data(\"picker-text\") || \"\" },\n          { modify: false, close: false }\n        );\n      }\n      else {\n        this._removeValue(this.current.picker, this._targetFromValue($checkbox.val()));\n      }\n    });\n  }\n\n  _choose(data, opts = {}) {\n    const options = Object.assign({ interactive: true, modify: true, close: true }, opts);\n\n    let dataText = this._escape(data.text);\n    let choosenOption = null;\n\n    if (!this.current.target && options.modify) {\n      this.current.target = this._targetFromValue(data.value);\n    }\n\n    // Add or update value appearance\n    if (this.current.target && options.modify) {\n      let link = $(\"a\", this.current.target);\n      link.data(\"picker-value\", data.value);\n      link.attr(\"href\", data.url);\n      choosenOption = this.current.target;\n      if (this.current.multiple) {\n        link.html(`&times;&nbsp;${dataText}`);\n      } else {\n        link.text(dataText);\n      }\n    } else {\n      let input = \"hidden\",\n          name = this.current.name;\n\n      if (this.current.multiple) {\n        name += \"[]\";\n        choosenOption = $(`<div><input type=\"${input}\" checked name=\"${name}\"/><a href=\"${data.url}\" data-picker-value=\"${data.value}\" class=\"label primary\">&times;&nbsp;${dataText}</a></div>`);\n      } else {\n        choosenOption = $(`<div><input type=\"${input}\" checked name=\"${name}\"/><a href=\"${data.url}\" data-picker-value=\"${data.value}\">${dataText}</a></div>`);\n      }\n      choosenOption.appendTo(this.current.values);\n\n      if (!this.current.target) {\n        this.current.target = choosenOption;\n      }\n    }\n\n    // Set input value\n    let $input = $(\"input\", choosenOption);\n    $input.attr(\"value\", data.value);\n\n    if (this.current.autosort) {\n      this._sort();\n    }\n\n    if (options.interactive) {\n      // Raise changed event\n      $input.trigger(\"change\");\n      this._removeErrors();\n\n      if (options.close) {\n        this._close();\n      }\n    }\n  }\n\n  _sort() {\n    const values = $(\".picker-values\", this.current.picker);\n    values.children().sort((item1, item2) => $(\"input\", item1).val() - $(\"input\", item2).val()).detach().appendTo(values);\n  }\n\n  _close() {\n    // Close modal and unset target element\n    this.modal.foundation(\"close\");\n    this.current.target = null;\n  }\n\n  _removeValue($picker, target) {\n    if (target) {\n      this._setCurrentPicker($picker, target);\n      // Fadeout (with time) doesn't work in system tests\n      let fadeoutTime = 500;\n      if (navigator && navigator.webdriver) {\n        fadeoutTime = 0;\n      }\n      this.current.target.fadeOut(fadeoutTime, () => {\n        this.current.target.find(\"input\")?.trigger(\"change\");\n        this.current.target.remove();\n        this.current.target = null;\n      });\n    }\n  }\n\n  _removeErrors() {\n    let parent = this.current.picker.parent();\n    $(\".is-invalid-input\", parent).removeClass(\"is-invalid-input\");\n    $(\".is-invalid-label\", parent).removeClass(\"is-invalid-label\");\n    $(\".form-error.is-visible\", parent).removeClass(\"is-visible\");\n  }\n\n  _escape(str) {\n    return str.replace(/[\\u00A0-\\u9999<>&]/gim, function (char) {\n      return `&#${char.charCodeAt(0)};`;\n    });\n  }\n\n  _targetFromEvent(event) {\n    return event.target.parentNode;\n  }\n\n  _targetFromValue(value) {\n    return $(`[data-picker-value=${value}]`, this.current.picker).parent()[0] || null;\n  }\n}\n","/* eslint-disable require-jsdoc */\n\nexport default function formDatePicker() {\n  $(\"[data-datepicker]\").each((_index, node) => {\n    const language = $(\"html\").attr(\"lang\") || \"en\";\n    const initialDate = $(node).data(\"startdate\") || \"\";\n    const pickTime = $(node).data(\"timepicker\") === \"\";\n    const languageProps = $(node).fdatepicker.dates[language] && $(node).fdatepicker.dates[language].format;\n    let format = $(node).data(\"date-format\") || languageProps || \"mm/dd/yyyy\";\n\n    $(node).fdatepicker({\n      format,\n      initialDate,\n      language,\n      pickTime,\n      disableDblClickSelection: true,\n      leftArrow: \"<<\",\n      rightArrow: \">>\"\n    });\n  });\n}\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds.\n * @param {Object} context - the context for the called function.\n * @param {Function} func - the function to be executed.\n * @param {int} wait - number of milliseconds to wait before executing the function.\n * @private\n * @returns {Void} - Returns nothing.\n */\nexport default function delayed(context, func, wait) {\n  let timeout = null;\n\n  return function(...args) {\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      timeout = null;\n      Reflect.apply(func, context, args);\n    }, wait);\n  }\n}\n","/**\n * CheckBoxesTree component.\n */\nexport default class CheckBoxesTree {\n  constructor() {\n    this.checkboxesTree = document.querySelectorAll(\"[data-checkboxes-tree]\");\n    if (!this.checkboxesTree) {\n      return;\n    }\n\n    this.globalChecks = document.querySelectorAll(\"[data-global-checkbox] input\");\n    this.globalChecks.forEach((global) => {\n      if (global.value === \"\") {\n        global.classList.add(\"ignore-filter\")\n      }\n    });\n    this.checkGlobalCheck();\n\n    // Event listeners\n    this.checkboxesTree.forEach((input) => input.addEventListener(\"click\", (event) => this.checkTheCheckBoxes(event.target)));\n    document.querySelectorAll(\"[data-children-checkbox] input\").forEach((input) => {\n      input.addEventListener(\"change\", (event) => this.checkTheCheckParent(event.target));\n    });\n\n    // Review parent checkboxes on initial load\n    document.querySelectorAll(\"[data-children-checkbox] input\").forEach((input) => {\n      this.checkTheCheckParent(input);\n    });\n  }\n\n  /**\n   * Set checkboxes as checked if included in given values\n   * @public\n   * @param {Array} checkboxes - array of checkboxs to check\n   * @param {Array} values - values of checkboxes that should be checked\n   * @returns {Void} - Returns nothing.\n   */\n  updateChecked(checkboxes, values) {\n    checkboxes.each((index, checkbox) => {\n      if ((checkbox.value === \"\" && values.length === 1) || (checkbox.value !== \"\" && values.includes(checkbox.value))) {\n        checkbox.checked = true;\n        this.checkTheCheckBoxes(checkbox);\n        this.checkTheCheckParent(checkbox);\n      }\n    });\n  }\n\n  /**\n   * Set the container form(s) for the component, to disable ignored filters before submitting them\n   * @public\n   * @param {query} theForm - form or forms where the component will be used\n   * @returns {Void} - Returns nothing.\n   */\n  setContainerForm(theForm) {\n    theForm.on(\"submit ajax:before\", () => {\n      theForm.find(\".ignore-filters input, input.ignore-filter\").each((idx, elem) => {\n        elem.disabled = true;\n      });\n    });\n\n    theForm.on(\"ajax:send\", () => {\n      theForm.find(\".ignore-filters input, input.ignore-filter\").each((idx, elem) => {\n        elem.disabled = false;\n      });\n    });\n  }\n\n  /**\n   * Handles the click action on any checkbox.\n   * @private\n   * @param {Input} target - the input that has been checked\n   * @returns {Void} - Returns nothing.\n   */\n  checkTheCheckBoxes(target) {\n    // Quis custodiet ipsos custodes?\n    const targetChecks = target.dataset.checkboxesTree;\n    const checkStatus = target.checked;\n    const allChecks = document.querySelectorAll(`#${targetChecks} input[type='checkbox']`);\n\n    allChecks.forEach((input) => {\n      input.checked = checkStatus;\n      input.indeterminate = false;\n      input.classList.add(\"ignore-filter\");\n    });\n  }\n\n  /**\n   * Update global checkboxes state when the current selection changes\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  checkGlobalCheck() {\n    this.globalChecks.forEach((global) => {\n      const checksContext = global.dataset.checkboxesTree;\n      const totalInputs = document.querySelectorAll(\n        `#${checksContext} input[type='checkbox']`\n      );\n      const checkedInputs = document.querySelectorAll(\n        `#${checksContext} input[type='checkbox']:checked`\n      );\n      const indeterminateInputs = Array.from(totalInputs).filter((checkbox) => checkbox.indeterminate)\n\n      if (checkedInputs.length === 0 && indeterminateInputs.length === 0) {\n        global.checked = false;\n        global.indeterminate = false;\n      } else if (checkedInputs.length === totalInputs.length && indeterminateInputs.length === 0) {\n        global.checked = true;\n        global.indeterminate = false;\n      } else {\n        global.checked = true;\n        global.indeterminate = true;\n      }\n\n      totalInputs.forEach((input) => {\n        if (global.indeterminate && !input.indeterminate) {\n          input.classList.remove(\"ignore-filter\");\n        } else {\n          input.classList.add(\"ignore-filter\");\n        }\n        const subfilters = input.parentNode.parentNode.nextElementSibling;\n        if (subfilters && subfilters.classList.contains(\"filters__subfilters\")) {\n          if (input.indeterminate) {\n            subfilters.classList.remove(\"ignore-filters\");\n          } else {\n            subfilters.classList.add(\"ignore-filters\");\n          }\n        }\n      });\n    });\n  }\n\n  /**\n   * Update children checkboxes state when the current selection changes\n   * @private\n   * @param {Input} input - the checkbox to check its parent\n   * @returns {Void} - Returns nothing.\n   */\n  checkTheCheckParent(input) {\n    const checkBoxContext = $(input).parents(\".filters__subfilters\").attr(\"id\");\n    if (!checkBoxContext) {\n      this.checkGlobalCheck();\n      return;\n    }\n\n    const parentCheck = document.querySelector(\n      `[data-checkboxes-tree=${checkBoxContext}]`\n    );\n    const totalCheckSiblings = document.querySelectorAll(\n      `#${checkBoxContext} > div > [data-children-checkbox] > input, #${checkBoxContext} > [data-children-checkbox] > input`\n    );\n    const checkedSiblings = document.querySelectorAll(\n      `#${checkBoxContext} > div > [data-children-checkbox] > input:checked, #${checkBoxContext} > [data-children-checkbox] > input:checked`\n    );\n    const indeterminateSiblings = Array.from(totalCheckSiblings).filter((checkbox) => checkbox.indeterminate)\n\n    if (checkedSiblings.length === 0 && indeterminateSiblings.length === 0) {\n      parentCheck.checked = false;\n      parentCheck.indeterminate = false;\n    } else if (checkedSiblings.length === totalCheckSiblings.length && indeterminateSiblings.length === 0) {\n      parentCheck.checked = true;\n      parentCheck.indeterminate = false;\n    } else {\n      parentCheck.checked = true;\n      parentCheck.indeterminate = true;\n    }\n\n    totalCheckSiblings.forEach((sibling) => {\n      if (parent.indeterminate && !sibling.indeterminate) {\n        sibling.classList.remove(\"ignore-filter\");\n      } else {\n        sibling.classList.add(\"ignore-filter\");\n      }\n      const subfilters = sibling.parentNode.parentNode.nextElementSibling;\n      if (subfilters && subfilters.classList.contains(\"filters__subfilters\")) {\n        if (sibling.indeterminate) {\n          subfilters.classList.remove(\"ignore-filters\");\n        } else {\n          subfilters.classList.add(\"ignore-filters\");\n        }\n      }\n    });\n\n    this.checkTheCheckParent(parentCheck);\n  }\n}\n","/* eslint-disable no-div-regex, no-useless-escape, no-param-reassign, id-length */\n/* eslint max-lines: [\"error\", {\"max\": 350, \"skipBlankLines\": true}] */\n\n/**\n * A plain Javascript component that handles the form filter.\n * @class\n * @augments Component\n */\n\nimport delayed from \"src/decidim/delayed\"\nimport CheckBoxesTree from \"src/decidim/check_boxes_tree\"\nimport { registerCallback, unregisterCallback, pushState, replaceState, state } from \"src/decidim/history\"\nimport DataPicker from \"src/decidim/data_picker\"\n\nexport default class FormFilterComponent {\n  constructor($form) {\n    this.$form = $form;\n    this.id = this.$form.attr(\"id\") || this._getUID();\n    this.mounted = false;\n    this.changeEvents = true;\n    this.theCheckBoxesTree = new CheckBoxesTree();\n    this.theDataPicker = window.theDataPicker || new DataPicker($(\".data-picker\"));\n\n    this._updateInitialState();\n    this._onFormChange = delayed(this, this._onFormChange.bind(this));\n    this._onFormSubmit = delayed(this, this._onFormSubmit.bind(this));\n    this._onPopState = this._onPopState.bind(this);\n\n    if (window.Decidim.PopStateHandler) {\n      this.popStateSubmiter = false;\n    } else {\n      this.popStateSubmiter = true;\n      window.Decidim.PopStateHandler = this.id;\n    }\n  }\n\n  /**\n   * Handles the logic for unmounting the component\n   * @public\n   * @returns {Void} - Returns nothing\n   */\n  unmountComponent() {\n    if (this.mounted) {\n      this.mounted = false;\n      this.$form.off(\"change\", \"input, select\", this._onFormChange);\n      this.$form.off(\"submit\", this._onFormSubmit);\n\n      unregisterCallback(`filters-${this.id}`)\n    }\n  }\n\n  /**\n   * Handles the logic for mounting the component\n   * @public\n   * @returns {Void} - Returns nothing\n   */\n  mountComponent() {\n    if (this.$form.length > 0 && !this.mounted) {\n      this.mounted = true;\n      let queue = 0;\n\n      let contentContainer = $(this.$form.closest(\".filters\").parent().find(\".skip\").attr(\"href\"));\n      if (contentContainer.length === 0 && this.$form.data(\"remoteFill\")) {\n        contentContainer = this.$form.data(\"remoteFill\");\n      }\n      this.$form.on(\"change\", \"input:not([data-disable-dynamic-change]), select:not([data-disable-dynamic-change])\", this._onFormChange);\n      this.$form.on(\"submit\", this._onFormSubmit);\n\n      this.currentFormRequest = null;\n      this.$form.on(\"ajax:beforeSend\", (e) => {\n        if (this.currentFormRequest) {\n          this.currentFormRequest.abort();\n        }\n        this.currentFormRequest = e.originalEvent.detail[0];\n        queue += 1;\n        if (queue > 0 && contentContainer.length > 0 && !contentContainer.hasClass(\"spinner-container\")) {\n          contentContainer.addClass(\"spinner-container\");\n        }\n      });\n\n      this.$form.on(\"ajax:success\", () => {\n        queue -= 1;\n        if (queue <= 0 && contentContainer.length > 0) {\n          contentContainer.removeClass(\"spinner-container\");\n        }\n      });\n\n      this.$form.on(\"ajax:error\", () => {\n        queue -= 1;\n        if (queue <= 0 && contentContainer.length > 0) {\n          contentContainer.removeClass(\"spinner-container\");\n        }\n        this.$form.find(\".spinner-container\").addClass(\"hide\");\n      });\n\n      this.theCheckBoxesTree.setContainerForm(this.$form);\n\n      registerCallback(`filters-${this.id}`, (currentState) => {\n        this._onPopState(currentState);\n      });\n    }\n  }\n\n  /**\n   * Sets path in the browser history with the initial filters state, to allow to restoring it when using browser history.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _updateInitialState() {\n    const [initialPath, initialState] = this._currentStateAndPath();\n    initialState._path = initialPath\n    replaceState(null, initialState);\n  }\n\n  /**\n   * Finds the current location.\n   * @param {boolean} withHost - include the host part in the returned location\n   * @private\n   * @returns {String} - Returns the current location.\n   */\n  _getLocation(withHost = true) {\n    const currentState = state();\n    let path = \"\";\n\n    if (currentState && currentState._path) {\n      path = currentState._path;\n    } else {\n      path = window.location.pathname + window.location.search + window.location.hash;\n    }\n\n    if (withHost) {\n      return window.location.origin + path;\n    }\n    return path;\n  }\n\n  /**\n   * Parse current location and get filter values.\n   * @private\n   * @returns {Object} - An object where a key correspond to a filter field\n   *                     and the value is the current value for the filter.\n   */\n  _parseLocationFilterValues() {\n    // Every location param is constructed like this: filter[key]=value\n    let regexpResult = decodeURIComponent(this._getLocation()).match(/filter\\[([^\\]]*)\\](?:\\[\\])?=([^&]*)/g);\n\n    // The RegExp g flag returns null or an array of coincidences. It doesn't return the match groups\n    if (regexpResult) {\n      const filterParams = regexpResult.reduce((acc, result) => {\n        const [, key, array, value] = result.match(/filter\\[([^\\]]*)\\](\\[\\])?=([^&]*)/);\n        if (array) {\n          if (!acc[key]) {\n            acc[key] = [];\n          }\n          acc[key].push(value);\n        } else {\n          acc[key] = value;\n        }\n        return acc;\n      }, {});\n\n      return filterParams;\n    }\n\n    return null;\n  }\n\n  /**\n   * Parse current location and get the current order.\n   * @private\n   * @returns {string} - The current order\n   */\n  _parseLocationOrderValue() {\n    const url = this._getLocation();\n    const match = url.match(/order=([^&]*)/);\n    const $orderMenu = this.$form.find(\".order-by .menu\");\n    let order = $orderMenu.find(\".menu a:first\").data(\"order\");\n\n    if (match) {\n      order = match[1];\n    }\n\n    return order;\n  }\n\n  /**\n   * Clears the form to start with a clean state.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _clearForm() {\n    this.$form.find(\"input[type=checkbox]\").each((index, element) => {\n      element.checked = element.indeterminate = false;\n    });\n    this.$form.find(\"input[type=radio]\").attr(\"checked\", false);\n    this.$form.find(\".data-picker\").each((_index, picker) => {\n      this.theDataPicker.clear(picker);\n    });\n\n    // This ensure the form is reset in a valid state where a fieldset of\n    // radio buttons has the first selected.\n    this.$form.find(\"fieldset input[type=radio]:first\").each(function () {\n      // I need the this to iterate a jQuery collection\n      $(this)[0].checked = true; // eslint-disable-line no-invalid-this\n    });\n  }\n\n  /**\n   * Handles the logic when going back to a previous state in the filter form.\n   * @private\n   * @param {Object} currentState - state stored along with location URL\n   * @returns {Void} - Returns nothing.\n   */\n  _onPopState(currentState) {\n    this.changeEvents = false;\n    this._clearForm();\n\n    const filterParams = this._parseLocationFilterValues();\n    const currentOrder = this._parseLocationOrderValue();\n\n    this.$form.find(\"input.order_filter\").val(currentOrder);\n\n    if (filterParams) {\n      const fieldIds = Object.keys(filterParams);\n\n      // Iterate the filter params and set the correct form values\n      fieldIds.forEach((fieldName) => {\n        let value = filterParams[fieldName];\n\n        if (Array.isArray(value)) {\n          let checkboxes = this.$form.find(`input[type=checkbox][name=\"filter[${fieldName}][]\"]`);\n          this.theCheckBoxesTree.updateChecked(checkboxes, value);\n        } else {\n          this.$form.find(`*[name=\"filter[${fieldName}]\"]`).each((index, element) => {\n            switch (element.type) {\n            case \"hidden\":\n              break;\n            case \"radio\":\n            case \"checkbox\":\n              element.checked = value === element.value;\n              break;\n            default:\n              element.value = value;\n            }\n          });\n        }\n      });\n    }\n\n    // Retrieves picker information for selected values (value, text and link) from the state object\n    $(\".data-picker\", this.$form).each((_index, picker) => {\n      let pickerState = currentState[picker.id];\n      if (pickerState) {\n        this.theDataPicker.load(picker, pickerState);\n      }\n    })\n\n    // Only one instance should submit the form on browser history navigation\n    if (this.popStateSubmiter) {\n      Rails.fire(this.$form[0], \"submit\", { from: \"pop\" });\n    }\n\n    this.changeEvents = true;\n  }\n\n  /**\n   * Handles the logic to decide whether the form should be submitted or not\n   * after a form change event. The form is only submitted when changes have\n   * occurred.\n   * @private\n   * @returns {Void} - Returns nothing.\n   */\n  _onFormChange() {\n    if (!this.changeEvents) {\n      return;\n    }\n\n    const [newPath] = this._currentStateAndPath();\n    const path = this._getLocation(false);\n\n    if (newPath === path) {\n      return;\n    }\n\n    Rails.fire(this.$form[0], \"submit\");\n  }\n\n  /**\n   * Saves the current state of the search on form submit to update the search\n   * parameters to the URL and store the picker states.\n   * @private\n   * @param {jQuery.Event} ev The event that caused the form to submit.\n   * @returns {Void} - Returns nothing.\n   */\n  _onFormSubmit(ev) {\n    const eventDetail = ev.originalEvent.detail;\n    if (eventDetail && eventDetail.from === \"pop\") {\n      return;\n    }\n\n    const [newPath, newState] = this._currentStateAndPath();\n\n    pushState(newPath, newState);\n    this._saveFilters(newPath);\n  }\n\n  /**\n   * Calculates the path and the state associated to the filters inputs.\n   * @private\n   * @returns {Array} - Returns an array with the path and the state for the current filters state.\n   */\n  _currentStateAndPath() {\n    const formAction = this.$form.attr(\"action\");\n    const params = this.$form.find(\":not(.ignore-filters)\").find(\"select:not(.ignore-filter), input:not(.ignore-filter)\").serialize();\n\n    let path = \"\";\n    let currentState = {};\n\n    if (formAction.indexOf(\"?\") < 0) {\n      path = `${formAction}?${params}`;\n    } else {\n      path = `${formAction}&${params}`;\n    }\n\n    // Stores picker information for selected values (value, text and link) in the currentState object\n    $(\".data-picker\", this.$form).each((_index, picker) => {\n      currentState[picker.id] = this.theDataPicker.save(picker);\n    })\n\n    return [path, currentState];\n  }\n\n  /**\n   * Generates a unique identifier for the form.\n   * @private\n   * @returns {String} - Returns a unique identifier\n   */\n  _getUID() {\n    return `filter-form-${new Date().getUTCMilliseconds()}-${Math.floor(Math.random() * 10000000)}`;\n  }\n\n  /**\n   * Saves the changed filters on sessionStorage API.\n   * @private\n   * @param {string} pathWithQueryStrings - path with all the query strings for filter. To be used with backToListLink().\n   * @returns {Void} - Returns nothing.\n   */\n  _saveFilters(pathWithQueryStrings) {\n    if (!window.sessionStorage) {\n      return;\n    }\n\n    const pathName = this.$form.attr(\"action\");\n    sessionStorage.setItem(\"filteredParams\", JSON.stringify({[pathName]: pathWithQueryStrings}));\n  }\n\n}\n","/**\n * Luxembourgish localisation\n */\n;(function(jQuery) {\n  jQuery.fn.fdatepicker.dates.lb = {\n    days: [\"Sonndeg\", \"Méindeg\", \"Dënschdeg\", \"Mëttwoch\", \"Donneschdeg\", \"Freideg\", \"Samschdeg\", \"Sonndeg\"],\n    daysShort: [\"Son\", \"Méi\", \"Dën\", \"Mët\", \"Don\", \"Fre\", \"Sam\", \"Son\"],\n    daysMin: [\"So\", \"Mé\", \"Dë\", \"Më\", \"Do\", \"Fr\", \"Sa\", \"So\"],\n    months: [\"Januar\", \"Februar\", \"Mäerz\", \"Abrëll\", \"Mee\", \"Juni\", \"Juli\", \"August\", \"September\", \"Oktober\", \"November\", \"Dezember\"],\n    monthsShort: [\"Jan\", \"Febr\", \"Mrz\", \"Abr\", \"Mee\", \"Jun\", \"Jul\", \"Aug\", \"Sept\", \"Okt\", \"Nov\", \"Dez\"],\n    today: \"Haut\"\n  };\n}(jQuery));\n","$(() => {\n  $(\".gallery__container\").on(\"closed.zf.callout\", (event) => {\n    $(event.target).remove();\n  });\n});\n","/* eslint no-unused-vars: 0 */\nimport Tribute from \"src/decidim/vendor/tribute\"\n\n$(() => {\n  const $hashtagContainer = $(\".js-hashtags\");\n  const nodatafound = $hashtagContainer.attr(\"data-noresults\");\n\n  let noMatchTemplate = null\n  if (nodatafound) {\n    noMatchTemplate = () => `<li>${nodatafound}</li>`;\n  }\n\n  // Listener for the event triggered by quilljs\n  let cursor = \"\";\n  $hashtagContainer.on(\"quill-position\", function(event) {\n    if (event.detail !== null) {\n      // When replacing the text content after selecting a hashtag, we only need\n      // to know the hashtag's start position as that is the point which we want\n      // to replace.\n      let quill = event.target.__quill;\n      if (quill.getText(event.detail.index - 1, 1) === \"#\") {\n        cursor = event.detail.index;\n      }\n    }\n  });\n\n  /* eslint no-use-before-define: [\"error\", { \"variables\": false }]*/\n  let remoteSearch = function(text, cb) {\n    $.post(\"/api\", {query: `{hashtags(name:\"${text}\") {name}}`}).\n\n      then((response) => {\n        let data = response.data.hashtags || {};\n        cb(data)\n      }).fail(function() {\n        cb([])\n      }).always(() => {\n      // This function runs Tribute every single time you type something\n      // So we must evalute DOM properties after each\n        const $parent = $(tribute.current.element).parent()\n        $parent.addClass(\"is-active\")\n\n        // We need to move the container to the wrapper selected\n        const $tribute = $parent.find(\".tribute-container\");\n        // Remove the inline styles, relative to absolute positioning\n        $tribute.removeAttr(\"style\");\n      })\n  };\n\n  // tribute.js docs - http://github.com/zurb/tribute\n  /* global Tribute*/\n  let tribute = new Tribute({\n    trigger: \"#\",\n    values: function (text, cb) {\n      remoteSearch(text, (hashtags) => cb(hashtags));\n    },\n    positionMenu: true,\n    menuContainer: null,\n    fillAttr: \"name\",\n    noMatchTemplate: noMatchTemplate,\n    lookup: (item) => item.name,\n    selectTemplate: function(item) {\n      if (typeof item === \"undefined\") {\n        return null;\n      }\n      if (this.range.isContentEditable(this.current.element)) {\n        // Check quill.js\n        if ($(this.current.element).hasClass(\"ql-editor\")) {\n          let editorContainer = $(this.current.element).parent().get(0);\n          let quill = editorContainer.__quill;\n          quill.insertText(cursor - 1, `#${item.original.name} `, Quill.sources.API);\n          // cursor position + hashtag length + \"#\" sign + space\n          let position = cursor + item.original.name.length + 2;\n\n          let next = 0;\n          if (quill.getLength() > position) {\n            next = position\n          } else {\n            next = quill.getLength() - 1\n          }\n          // Workaround https://github.com/quilljs/quill/issues/731\n          setTimeout(function () {\n            quill.setSelection(next, 0);\n          }, 500);\n\n          return \"\"\n        }\n        return `<span contenteditable=\"false\">#${item.original.name}</span>`;\n      }\n      return `#${item.original.name}`;\n    },\n    menuItemTemplate: function(item) {\n      let tpl = `<strong>${item.original.name}</strong>`;\n      return tpl;\n    }\n  });\n\n  // Tribute needs to be attached to the `.ql-editor` element as said at:\n  // https://github.com/quilljs/quill/issues/1816\n  //\n  // For this reason we need to wait a bit for quill to initialize itself.\n  setTimeout(function() {\n    $hashtagContainer.each((index, item) => {\n      let $qlEditor = $(\".ql-editor\", item);\n      if ($qlEditor.length > 0) {\n        tribute.attach($qlEditor);\n      } else {\n        tribute.attach(item);\n      }\n    });\n  }, 1000);\n\n  // DOM manipulation\n  $hashtagContainer.on(\"focusin\", (event) => {\n    // Set the parent container relative to the current element\n\n    tribute.menuContainer = event.target.parentNode;\n  });\n  $hashtagContainer.on(\"focusout\", (event) => {\n    let $parent = $(event.target).parent();\n\n    if ($parent.hasClass(\"is-active\")) {\n      $parent.removeClass(\"is-active\");\n    }\n  });\n  $hashtagContainer.on(\"input\", (event) => {\n    let $parent = $(event.target).parent();\n\n    if (tribute.isActive) {\n      // We need to move the container to the wrapper selected\n      let $tribute = $(\".tribute-container\");\n      $tribute.appendTo($parent);\n      // Parent adaptation\n      $parent.addClass(\"is-active\");\n    } else {\n      $parent.removeClass(\"is-active\");\n    }\n  });\n});\n","/* eslint no-unused-vars: 0 */\nimport Tribute from \"src/decidim/vendor/tribute\"\n\n$(() => {\n  const $mentionContainer = $(\".js-mentions\");\n  const nodatafound = $mentionContainer.attr(\"data-noresults\");\n\n  let noMatchTemplate = null\n  if (nodatafound) {\n    noMatchTemplate = () => `<li>${nodatafound}</li>`;\n  }\n\n  // Listener for the event triggered by quilljs\n  let cursor = \"\";\n  $mentionContainer.on(\"quill-position\", (event) => {\n    if (event.detail !== null) {\n      // When replacing the text content after selecting a hashtag, we only need\n      // to know the hashtag's start position as that is the point which we want\n      // to replace.\n      let quill = event.target.__quill;\n      if (quill.getText(event.detail.index - 1, 1) === \"@\") {\n        cursor = event.detail.index;\n      }\n    }\n  });\n\n  // Returns a function, that, as long as it continues to be invoked, will not\n  // be triggered. The function will be called after it stops being called for\n  // N milliseconds\n  /* eslint no-invalid-this: 0 */\n  /* eslint consistent-this: 0 */\n  /* eslint prefer-reflect: 0 */\n  const debounce = function(callback, wait) {\n    let timeout = null;\n    return (...args) => {\n      const context = this;\n      clearTimeout(timeout);\n      timeout = setTimeout(() => callback.apply(context, args), wait);\n    };\n  }\n\n  /* eslint no-use-before-define: [\"error\", { \"variables\": false }]*/\n  let remoteSearch = function(text, cb) {\n    let query = `{users(filter:{wildcard:\"${text}\"}){nickname,name,avatarUrl,__typename,...on UserGroup{membersCount}}}`;\n    $.post(\"/api\", {query: query}).\n      then((response) => {\n        let data = response.data.users || {};\n        cb(data)\n      }).fail(function() {\n        cb([])\n      }).always(() => {\n      // This function runs Tribute every single time you type something\n      // So we must evalute DOM properties after each\n        const $parent = $(tribute.current.element).parent();\n        $parent.addClass(\"is-active\");\n\n        // We need to move the container to the wrapper selected\n        const $tribute = $parent.find(\".tribute-container\");\n        // Remove the inline styles, relative to absolute positioning\n        $tribute.removeAttr(\"style\");\n      })\n  };\n\n  // tribute.js docs - http://github.com/zurb/tribute\n  /* global Tribute*/\n  let tribute = new Tribute({\n    trigger: \"@\",\n    // avoid overloading the API if the user types too fast\n    values: debounce(function (text, cb) {\n      remoteSearch(text, (users) => cb(users));\n    }, 250),\n    positionMenu: true,\n    menuContainer: null,\n    allowSpaces: true,\n    menuItemLimit: 5,\n    fillAttr: \"nickname\",\n    selectClass: \"highlight\",\n    noMatchTemplate: noMatchTemplate,\n    lookup: (item) => item.nickname + item.name,\n    selectTemplate: function(item) {\n      if (typeof item === \"undefined\") {\n        return null;\n      }\n      if (this.range.isContentEditable(this.current.element)) {\n        // Check quill.js\n        if ($(this.current.element).hasClass(\"ql-editor\")) {\n          let editorContainer = $(this.current.element).parent().get(0);\n          let quill = editorContainer.__quill;\n          quill.insertText(cursor - 1, `${item.original.nickname} `, Quill.sources.API);\n          // cursor position + nickname length + \"@\" sign + space\n          let position = cursor + item.original.nickname.length + 2\n\n          let next = 0;\n          if (quill.getLength() > position) {\n            next = position\n          } else {\n            next = quill.getLength() - 1\n          }\n          // Workaround https://github.com/quilljs/quill/issues/731\n          setTimeout(function () {\n            quill.setSelection(next, 0);\n          }, 500);\n\n          return \"\"\n        }\n        return `<span contenteditable=\"false\">${item.original.nickname}</span>`;\n      }\n      return item.original.nickname;\n    },\n    menuItemTemplate: function(item) {\n      let svg = \"\";\n      if (window.Decidim && item.original.__typename === \"UserGroup\") {\n        const iconsPath =  window.Decidim.config.get(\"icons_path\");\n\n        svg = `<span class=\"is-group\">${item.original.membersCount}x <svg class=\"icon--members icon\"><use href=\"${iconsPath}#icon-members\"/></svg></span>`;\n      }\n      return `<div class=\"tribute-item ${item.original.__typename}\">\n      <span class=\"author__avatar\"><img src=\"${item.original.avatarUrl}\" alt=\"author-avatar\"></span>\n        <strong>${item.original.nickname}</strong>\n        <small>${item.original.name}</small>\n        ${svg}\n      </div>`;\n    }\n  });\n\n  let setupEvents = function($element) {\n    // DOM manipulation\n    $element.on(\"focusin\", (event) => {\n      // Set the parent container relative to the current element\n      tribute.menuContainer = event.target.parentNode;\n    });\n    $element.on(\"focusout\", (event) => {\n      let $parent = $(event.target).parent();\n\n      if ($parent.hasClass(\"is-active\")) {\n        $parent.removeClass(\"is-active\");\n      }\n    });\n    $element.on(\"input\", (event) => {\n      let $parent = $(event.target).parent();\n\n      if (tribute.isActive) {\n        // We need to move the container to the wrapper selected\n        let $tribute = $(\".tribute-container\");\n        $tribute.appendTo($parent);\n\n        // Parent adaptation\n        $parent.addClass(\"is-active\");\n      } else {\n        $parent.removeClass(\"is-active\");\n      }\n    });\n  };\n\n  setupEvents($mentionContainer);\n\n  // This allows external libraries (like React) to use the component\n  // by simply firing and event targeting the element where to attach Tribute\n  $(document).on(\"attach-mentions-element\", (event, element) => {\n    if (!element) {\n      return;\n    }\n    tribute.attach(element);\n    // Due a bug in Tribute, re-add menu to DOM if it has been removed\n    // See https://github.com/zurb/tribute/issues/140\n    if (tribute.menu && !document.body.contains(tribute.menu)) {\n      tribute.range.getDocument().body.appendChild(tribute.menu);\n    }\n    setupEvents($(element));\n  });\n\n  // tribute.attach($mentionContainer);\n  // Tribute needs to be attached to the `.ql-editor` element as said at:\n  // https://github.com/quilljs/quill/issues/1816\n  //\n  // For this reason we need to wait a bit for quill to initialize itself.\n  setTimeout(function() {\n    $mentionContainer.each((index, item) => {\n      let $qlEditor = $(\".ql-editor\", item);\n      if ($qlEditor.length > 0) {\n        tribute.attach($qlEditor);\n      } else {\n        tribute.attach(item);\n      }\n    });\n  }, 1000);\n});\n\n","import dayjs from \"dayjs\"\n\n$(() => {\n  let sessionTimeOutEnabled = true;\n  const $timeoutModal = $(\"#timeoutModal\");\n  const timeoutInSeconds = parseInt($timeoutModal.data(\"session-timeout\"), 10);\n  const secondsUntilTimeoutPath = $timeoutModal.data(\"seconds-until-timeout-path\");\n  const heartbeatPath = $timeoutModal.data(\"heartbeat-path\");\n  const interval = parseInt($timeoutModal.data(\"session-timeout-interval\"), 10);\n  const preventTimeOutSeconds = $timeoutModal.data(\"prevent-timeout-seconds\");\n  let endsAt = dayjs().add(timeoutInSeconds, \"seconds\");\n  let lastAction = dayjs();\n  const $continueSessionButton = $(\"#continueSession\");\n  let lastActivityCheck = dayjs();\n  // 5 * 60 seconds = 5 Minutes\n  const activityCheckInterval = 5 * 60;\n  const preventTimeOutUntil = dayjs().add(preventTimeOutSeconds, \"seconds\");\n\n  // Ajax request is made at timeout_modal.html.erb\n  $continueSessionButton.on(\"click\", () => {\n    $timeoutModal.foundation(\"close\");\n    // In admin panel we have to hide all overlays\n    $(\".reveal-overlay\").css(\"display\", \"none\");\n    lastActivityCheck = dayjs();\n  })\n\n  if (isNaN(interval)) {\n    return;\n  }\n  if (!timeoutInSeconds) {\n    return;\n  }\n\n  const disableSessionTimeout = () => {\n    sessionTimeOutEnabled = false;\n  }\n\n  const enableSessionTimeout = () => {\n    sessionTimeOutEnabled = true;\n  }\n\n  const setTimer = (secondsUntilExpiration) => {\n    if (!secondsUntilExpiration) {\n      return;\n    }\n    endsAt = dayjs().add(secondsUntilExpiration, \"seconds\");\n  }\n\n  const sessionTimeLeft = () => {\n    return $.ajax({\n      method: \"GET\",\n      url: secondsUntilTimeoutPath,\n      contentType: \"application/json\",\n      headers: {\n        \"X-CSRF-Token\": $(\"meta[name=csrf-token]\").attr(\"content\")\n      }\n    });\n  }\n\n  const heartbeat = () => {\n    return $.ajax({\n      method: \"POST\",\n      url: heartbeatPath,\n      contentType: \"application/javascript\"\n    });\n  }\n\n  const userBeenActiveSince = (seconds) => {\n    return (dayjs() - lastAction) / 1000 < seconds;\n  }\n\n  const exitInterval = setInterval(() => {\n    const timeSinceLastActivityCheckInSeconds = Math.round((dayjs() - lastActivityCheck) / 1000);\n\n    const popupOpen = $(\"#timeoutModal\").parent().css(\"display\") === \"block\";\n    if (!popupOpen && timeSinceLastActivityCheckInSeconds >= activityCheckInterval) {\n      lastActivityCheck = dayjs();\n      if (userBeenActiveSince(activityCheckInterval)) {\n        heartbeat();\n        return;\n      }\n    }\n\n    const timeRemaining = Math.round((endsAt - dayjs()) / 1000);\n    if (timeRemaining > 170) {\n      return;\n    }\n\n    if (dayjs() < preventTimeOutUntil) {\n      heartbeat();\n      return;\n    }\n\n    sessionTimeLeft().then((result) => {\n      const secondsUntilSessionExpires = result.seconds_remaining;\n      setTimer(secondsUntilSessionExpires);\n\n      if (!sessionTimeOutEnabled) {\n        heartbeat();\n      } else if (secondsUntilSessionExpires <= 90) {\n        $timeoutModal.find(\"#reveal-hidden-sign-out\")[0].click();\n      } else if (secondsUntilSessionExpires <= 150) {\n        $timeoutModal.foundation(\"open\");\n      }\n    });\n  }, interval);\n\n  $(document).mousemove(() => {\n    lastAction = dayjs();\n  })\n  $(document).scroll(() => {\n    lastAction = dayjs();\n  })\n  $(document).keypress(() => {\n    lastAction = dayjs();\n  })\n\n  // Devise restarts its own timer on ajax requests,\n  // so here we restart our.\n  $(document).on(\"ajax:complete\", () => {\n    setTimer(timeoutInSeconds);\n  });\n\n  $(document).ajaxComplete((_event, _xhr, settings) => {\n    if (settings && settings.url === secondsUntilTimeoutPath) {\n      return;\n    }\n    setTimer(timeoutInSeconds);\n  });\n\n  window.addEventListener(\"beforeunload\", () => {\n    clearInterval(exitInterval);\n    return;\n  });\n\n  window.Decidim.enableSessionTimeout = enableSessionTimeout\n  window.Decidim.disableSessionTimeout = disableSessionTimeout\n});\n","/* eslint-disable */\n\n/* =========================================================\n * foundation-datepicker.js\n * Copyright 2015 Peter Beno, najlepsiwebdesigner@gmail.com, @benopeter\n * project website http://foundation-datepicker.peterbeno.com\n * ========================================================= */\n\n// This file is a modified version of the original file\n// See\n//  - https://github.com/decidim/decidim/pull/1207\n//  - https://github.com/decidim/decidim/pull/2512\n//  - https://github.com/decidim/decidim/pull/3515\n\n!(function($) {\n\n  function UTCDate() {\n    return new Date(Date.UTC(...arguments));\n  }\n\n  function UTCToday() {\n    let today = new Date();\n    return UTCDate(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate());\n  }\n\n  let Datepicker = function(element, options) {\n    let that = this;\n\n    this.element = $(element);\n    this.autoShow = (options.autoShow == undefined ? true : options.autoShow);\n    this.appendTo = options.appendTo || \"body\";\n    this.closeButton = options.closeButton;\n    this.language = options.language || this.element.data(\"date-language\") || \"en\";\n    this.language = this.language in dates ? this.language : this.language.split(\"-\")[0]; // Check if \"de-DE\" style date is available, if not language should fallback to 2 letter code eg \"de\"\n    this.language = this.language in dates ? this.language : \"en\";\n    this.isRTL = dates[this.language].rtl || false;\n    this.format = DPGlobal.parseFormat(options.format || this.element.data(\"date-format\") || dates[this.language].format || \"mm/dd/yyyy\");\n    this.formatText = options.format || this.element.data(\"date-format\") || dates[this.language].format || \"mm/dd/yyyy\";\n    this.isInline = false;\n    this.isInput = this.element.is(\"input\");\n    this.component = this.element.is(\".date\") ? this.element.find(\".prefix, .postfix\") : false;\n    this.hasInput = this.component && this.element.find(\"input\").length;\n    this.disableDblClickSelection = options.disableDblClickSelection;\n    this.onRender = options.onRender || function() {};\n    if (this.component && this.component.length === 0) {\n      this.component = false;\n    }\n    this.linkField = options.linkField || this.element.data(\"link-field\") || false;\n    this.linkFormat = DPGlobal.parseFormat(options.linkFormat || this.element.data(\"link-format\") || \"yyyy-mm-dd hh:ii:ss\");\n    this.minuteStep = options.minuteStep || this.element.data(\"minute-step\") || 5;\n    this.pickerPosition = options.pickerPosition || this.element.data(\"picker-position\") || \"bottom-right\";\n    this.initialDate = options.initialDate || null;\n    this.faCSSprefix = options.faCSSprefix || \"fa\";\n    this.leftArrow = options.leftArrow || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-chevron-left fi-arrow-left\"/>`;\n    this.rightArrow = options.rightArrow || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-chevron-right fi-arrow-right\"/>`;\n    this.closeIcon = options.closeIcon || `<i class=\"${this.faCSSprefix} ${this.faCSSprefix}-remove ${this.faCSSprefix}-times fi-x\"></i>`;\n\n\n    this.minView = 0;\n    if (\"minView\" in options) {\n      this.minView = options.minView;\n    } else if (\"minView\" in this.element.data()) {\n      this.minView = this.element.data(\"min-view\");\n    }\n    this.minView = DPGlobal.convertViewMode(this.minView);\n\n    this.maxView = DPGlobal.modes.length - 1;\n    if (\"maxView\" in options) {\n      this.maxView = options.maxView;\n    } else if (\"maxView\" in this.element.data()) {\n      this.maxView = this.element.data(\"max-view\");\n    }\n    this.maxView = DPGlobal.convertViewMode(this.maxView);\n\n    this.startViewMode = \"month\";\n    if (\"startView\" in options) {\n      this.startViewMode = options.startView;\n    } else if (\"startView\" in this.element.data()) {\n      this.startViewMode = this.element.data(\"start-view\");\n    }\n    this.startViewMode = DPGlobal.convertViewMode(this.startViewMode);\n    this.viewMode = this.startViewMode;\n\n    if (!(\"minView\" in options) && !(\"maxView\" in options) && !(this.element.data(\"min-view\")) && !(this.element.data(\"max-view\"))) {\n      this.pickTime = false;\n      if (\"pickTime\" in options) {\n        this.pickTime = options.pickTime;\n      }\n      if (this.pickTime == true) {\n        this.minView = 0;\n        this.maxView = 4;\n      } else {\n        this.minView = 2;\n        this.maxView = 4;\n      }\n    }\n\n    this.forceParse = true;\n    if (\"forceParse\" in options) {\n      this.forceParse = options.forceParse;\n    } else if (\"dateForceParse\" in this.element.data()) {\n      this.forceParse = this.element.data(\"date-force-parse\");\n    }\n\n\n    this.picker = $(DPGlobal.template(this.leftArrow, this.rightArrow, this.closeIcon)).\n      appendTo(this.isInline ? this.element : this.appendTo).\n      on({\n        click: $.proxy(this.click, this),\n        mousedown: $.proxy(this.mousedown, this)\n      });\n    if (this.closeButton) {\n      this.picker.find(\"a.datepicker-close\").show();\n    } else {\n      this.picker.find(\"a.datepicker-close\").hide();\n    }\n\n    if (this.isInline) {\n      this.picker.addClass(\"datepicker-inline\");\n    } else {\n      this.picker.addClass(\"datepicker-dropdown dropdown-menu\");\n    }\n    if (this.isRTL) {\n      this.picker.addClass(\"datepicker-rtl\");\n\n      this.picker.find(\".date-switch\").each(function() {\n        $(this).parent().prepend($(this).siblings(\".next\"));\n        $(this).parent().append($(this).siblings(\".prev\"));\n      })\n      this.picker.find(\".prev, .next\").toggleClass(\"prev next\");\n\n    }\n    $(document).on(\"mousedown\", function(e) {\n      if (that.isInput && e.target === that.element[0]) {\n        return;\n      }\n\n      // Clicked outside the datepicker, hide it\n      if ($(e.target).closest(\".datepicker.datepicker-inline, .datepicker.datepicker-dropdown\").length === 0) {\n        that.hide();\n      }\n    });\n\n    this.autoclose = true;\n    if (\"autoclose\" in options) {\n      this.autoclose = options.autoclose;\n    } else if (\"dateAutoclose\" in this.element.data()) {\n      this.autoclose = this.element.data(\"date-autoclose\");\n    }\n\n    this.keyboardNavigation = true;\n    if (\"keyboardNavigation\" in options) {\n      this.keyboardNavigation = options.keyboardNavigation;\n    } else if (\"dateKeyboardNavigation\" in this.element.data()) {\n      this.keyboardNavigation = this.element.data(\"date-keyboard-navigation\");\n    }\n\n    this.todayBtn = (options.todayBtn || this.element.data(\"date-today-btn\") || false);\n    this.todayHighlight = (options.todayHighlight || this.element.data(\"date-today-highlight\") || false);\n\n    this.calendarWeeks = false;\n    if (\"calendarWeeks\" in options) {\n      this.calendarWeeks = options.calendarWeeks;\n    } else if (\"dateCalendarWeeks\" in this.element.data()) {\n      this.calendarWeeks = this.element.data(\"date-calendar-weeks\");\n    }\n    if (this.calendarWeeks)\n    {this.picker.find(\"tfoot th.today\").\n      attr(\"colspan\", function(i, val) {\n        return parseInt(val) + 1;\n      });}\n\n    this.weekStart = ((options.weekStart || this.element.data(\"date-weekstart\") || dates[this.language].weekStart || 0) % 7);\n    this.weekEnd = ((this.weekStart + 6) % 7);\n    this.startDate = -Infinity;\n    this.endDate = Infinity;\n    this.daysOfWeekDisabled = [];\n    this.datesDisabled = [];\n    this.setStartDate(options.startDate || this.element.data(\"date-startdate\"));\n    this.setEndDate(options.endDate || this.element.data(\"date-enddate\"));\n    this.setDaysOfWeekDisabled(options.daysOfWeekDisabled || this.element.data(\"date-days-of-week-disabled\"));\n    this.setDatesDisabled(options.datesDisabled || this.element.data(\"dates-disabled\"));\n\n    if (this.initialDate != null) {\n      this.date = this.viewDate = DPGlobal.parseDate(this.initialDate, this.format, this.language);\n      this.setValue();\n    }\n\n    this.fillDow();\n    this.fillMonths();\n    this.update();\n\n    this.showMode();\n\n    if (this.isInline) {\n      this.show();\n    }\n\n    this._attachEvents();\n  };\n\n  Datepicker.prototype = {\n    constructor: Datepicker,\n\n    _events: [],\n    _attachEvents: function() {\n      this._detachEvents();\n      if (this.isInput) { // single input\n        if (!this.keyboardNavigation) {\n          this._events = [\n            [this.element, {\n              focus: (this.autoShow) ? $.proxy(this.show, this) : function() {}\n            }]\n          ];\n        } else {\n          this._events = [\n            [this.element, {\n              focus: (this.autoShow) ? $.proxy(this.show, this) : function() {},\n              keyup: $.proxy(this.update, this),\n              keydown: $.proxy(this.keydown, this),\n              click: (this.element.attr(\"readonly\")) ? $.proxy(this.show, this) : function() {}\n            }]\n          ];\n        }\n      }\n      else if (this.component && this.hasInput) { // component: input + button\n        this._events = [\n          // For components that are not readonly, allow keyboard nav\n          [this.element.find(\"input\"), {\n            focus: (this.autoShow) ? $.proxy(this.show, this) : function() {},\n            keyup: $.proxy(this.update, this),\n            keydown: $.proxy(this.keydown, this)\n          }],\n          [this.component, {\n            click: $.proxy(this.show, this)\n          }]\n        ];\n      } else if (this.element.is(\"div\")) { // inline datepicker\n        this.isInline = true;\n      } else {\n        this._events = [\n          [this.element, {\n            click: $.proxy(this.show, this)\n          }]\n        ];\n      }\n\n      if (this.disableDblClickSelection) {\n        this._events[this._events.length] = [\n          this.element, {\n            dblclick: function(e) {\n              e.preventDefault();\n              e.stopPropagation();\n              $(this).blur()\n            }\n          }\n        ];\n      }\n\n      for (var el, ev, i = 0; i < this._events.length; i++) {\n        el = this._events[i][0];\n        ev = this._events[i][1];\n        el.on(ev);\n      }\n    },\n    _detachEvents: function() {\n      for (var el, ev, i = 0; i < this._events.length; i++) {\n        el = this._events[i][0];\n        ev = this._events[i][1];\n        el.off(ev);\n      }\n      this._events = [];\n    },\n\n    show: function(e) {\n      this.picker.show();\n      this.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\n      this.update();\n      this.place();\n      $(window).on(\"resize\", $.proxy(this.place, this));\n      if (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      this.element.trigger({\n        type: \"show\",\n        date: this.date\n      });\n    },\n\n    hide: function(e) {\n      if (this.isInline) {return;}\n      if (!this.picker.is(\":visible\")) {return;}\n      this.picker.hide();\n      $(window).off(\"resize\", this.place);\n      this.viewMode = this.startViewMode;\n      this.showMode();\n      if (!this.isInput) {\n        $(document).off(\"mousedown\", this.hide);\n      }\n\n      if (\n        this.forceParse &&\n                (\n                  this.isInput && this.element.val() ||\n                    this.hasInput && this.element.find(\"input\").val()\n                )\n      )\n      {this.setValue();}\n      this.element.trigger({\n        type: \"hide\",\n        date: this.date\n      });\n    },\n\n    remove: function() {\n      this._detachEvents();\n      this.picker.remove();\n      delete this.element.data().datepicker;\n    },\n\n    getDate: function() {\n      let d = this.getUTCDate();\n      return new Date(d.getTime() + (d.getTimezoneOffset() * 60000));\n    },\n\n    getUTCDate: function() {\n      return this.date;\n    },\n\n    setDate: function(d) {\n      this.setUTCDate(new Date(d.getTime() - (d.getTimezoneOffset() * 60000)));\n    },\n\n    setUTCDate: function(d) {\n      this.date = d;\n      this.setValue();\n    },\n\n    setValue: function() {\n      let formatted = this.getFormattedDate();\n      if (!this.isInput) {\n        if (this.component) {\n          this.element.find(\"input\").val(formatted);\n        }\n        this.element.data(\"date\", formatted);\n      } else {\n        this.element.val(formatted);\n      }\n    },\n\n    getFormattedDate: function(format) {\n      if (format === undefined)\n      {format = this.format;}\n      return DPGlobal.formatDate(this.date, format, this.language);\n    },\n\n    setStartDate: function(startDate) {\n      this.startDate = startDate || -Infinity;\n      if (this.startDate !== -Infinity) {\n        this.startDate = DPGlobal.parseDate(this.startDate, this.format, this.language);\n      }\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setEndDate: function(endDate) {\n      this.endDate = endDate || Infinity;\n      if (this.endDate !== Infinity) {\n        this.endDate = DPGlobal.parseDate(this.endDate, this.format, this.language);\n      }\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setDaysOfWeekDisabled: function(daysOfWeekDisabled) {\n      this.daysOfWeekDisabled = daysOfWeekDisabled || [];\n      if (!$.isArray(this.daysOfWeekDisabled)) {\n        this.daysOfWeekDisabled = this.daysOfWeekDisabled.split(/,\\s*/);\n      }\n      this.daysOfWeekDisabled = $.map(this.daysOfWeekDisabled, function(d) {\n        return parseInt(d, 10);\n      });\n      this.update();\n      this.updateNavArrows();\n    },\n\n    setDatesDisabled: function(datesDisabled) {\n      this.datesDisabled = datesDisabled || [];\n      if (!$.isArray(this.datesDisabled)) {\n        this.datesDisabled = this.datesDisabled.split(/,\\s*/);\n      }\n      this.datesDisabled = $.map(this.datesDisabled, function(d) {\n        return DPGlobal.parseDate(d, this.format, this.language).valueOf();\n      });\n      this.update();\n      this.updateNavArrows();\n    },\n\n    place: function() {\n      if (this.isInline) {return;}\n      let zIndexes = [];\n      this.element.parents().map(function() {\n        if ($(this).css(\"z-index\") != \"auto\") {\n          zIndexes.push(parseInt($(this).css(\"z-index\")));\n        }\n      });\n      let zIndex = zIndexes.sort(function(a, b) { return a - b; }).pop() + 10;\n      let textbox = this.component ? this.component : this.element;\n      let offset = textbox.offset();\n      let height = textbox.outerHeight() + parseInt(textbox.css(\"margin-top\"));\n      let width = textbox.outerWidth() + parseInt(textbox.css(\"margin-left\"));\n      let fullOffsetTop = offset.top + height;\n      let offsetLeft = offset.left;\n      this.picker.removeClass(\"datepicker-top datepicker-bottom\");\n      // can we show it on top?\n      let canShowTop = ($(window).scrollTop() < offset.top - this.picker.outerHeight());\n      let canShowBottom = (fullOffsetTop + this.picker.outerHeight()) < $(window).scrollTop() + $(window).height();\n      // If the datepicker is going to be below the window, show it on top of the input if it fits\n      if (!canShowBottom && canShowTop) {\n        fullOffsetTop = offset.top - this.picker.outerHeight();\n        this.picker.addClass(\"datepicker-top\");\n      }\n      else {\n        // Scroll up if we cannot show it on bottom or top (for mobile devices)\n        if (!canShowBottom) {$(window).scrollTop(offset.top);}\n        this.picker.addClass(\"datepicker-bottom\");\n      }\n\n      // if the datepicker is going to go past the right side of the window, we want\n      // to set the right position so the datepicker lines up with the textbox\n      if (offset.left + this.picker.width() >= $(window).width()) {\n        offsetLeft = (offset.left + width) - this.picker.width();\n      }\n      this.picker.css({\n        top: fullOffsetTop,\n        left: offsetLeft,\n        zIndex: zIndex\n      });\n    },\n\n    update: function() {\n      let date,\n          fromArgs = false;\n      let currentVal = this.isInput ? this.element.val() : this.element.data(\"date\") || this.element.find(\"input\").val();\n      if (arguments && arguments.length && (typeof arguments[0] === \"string\" || arguments[0] instanceof Date)) {\n        date = arguments[0];\n        fromArgs = true;\n      }\n      else {\n        date = this.isInput ? this.element.val() : this.element.data(\"date\") || this.element.find(\"input\").val();\n      }\n\n      this.date = DPGlobal.parseDate(date, this.format, this.language);\n\n      if (fromArgs) {\n        this.setValue();\n      } else if (currentVal == \"\") {\n        this.element.trigger({\n          type: \"changeDate\",\n          date: null\n        });\n      }\n\n      if (this.date < this.startDate) {\n        this.viewDate = new Date(this.startDate.valueOf());\n      } else if (this.date > this.endDate) {\n        this.viewDate = new Date(this.endDate.valueOf());\n      } else {\n        this.viewDate = new Date(this.date.valueOf());\n      }\n      this.fill();\n    },\n\n    fillDow: function() {\n      let dowCnt = this.weekStart,\n          html = \"<tr>\";\n      if (this.calendarWeeks) {\n        let cell = '<th class=\"cw\">&nbsp;</th>';\n        html += cell;\n        this.picker.find(\".datepicker-days thead tr:first-child\").prepend(cell);\n      }\n      while (dowCnt < this.weekStart + 7) {\n        html += `<th class=\"dow\">${dates[this.language].daysMin[(dowCnt++) % 7]}</th>`;\n      }\n      html += \"</tr>\";\n      this.picker.find(\".datepicker-days thead\").append(html);\n    },\n\n    fillMonths: function() {\n      let html = \"\",\n          i = 0;\n      while (i < 12) {\n        html += `<span class=\"month\">${dates[this.language].monthsShort[i++]}</span>`;\n      }\n      this.picker.find(\".datepicker-months td\").html(html);\n    },\n\n    fill: function() {\n      if (this.date == null || this.viewDate == null) {\n        return;\n      }\n\n      let d = new Date(this.viewDate.valueOf()),\n          year = d.getUTCFullYear(),\n          month = d.getUTCMonth(),\n          dayMonth = d.getUTCDate(),\n          hours = d.getUTCHours(),\n          minutes = d.getUTCMinutes(),\n          startYear = this.startDate !== -Infinity ? this.startDate.getUTCFullYear() : -Infinity,\n          startMonth = this.startDate !== -Infinity ? this.startDate.getUTCMonth() : -Infinity,\n          endYear = this.endDate !== Infinity ? this.endDate.getUTCFullYear() : Infinity,\n          endMonth = this.endDate !== Infinity ? this.endDate.getUTCMonth() : Infinity,\n          currentDate = this.date && UTCDate(this.date.getUTCFullYear(), this.date.getUTCMonth(), this.date.getUTCDate()).valueOf(),\n          today = new Date(),\n          titleFormat = dates[this.language].titleFormat || dates.en.titleFormat;\n      // this.picker.find('.datepicker-days thead th.date-switch')\n      //          .text(DPGlobal.formatDate(new UTCDate(year, month), titleFormat, this.language));\n\n      this.picker.find(\".datepicker-days thead th:eq(1)\").\n        text(`${dates[this.language].months[month]} ${year}`);\n      this.picker.find(\".datepicker-hours thead th:eq(1)\").\n        text(`${dayMonth} ${dates[this.language].months[month]} ${year}`);\n      this.picker.find(\".datepicker-minutes thead th:eq(1)\").\n        text(`${dayMonth} ${dates[this.language].months[month]} ${year}`);\n\n\n      this.picker.find(\"tfoot th.today\").\n        text(dates[this.language].today).\n        toggle(this.todayBtn !== false);\n      this.updateNavArrows();\n      this.fillMonths();\n      let prevMonth = UTCDate(year, month - 1, 28, 0, 0, 0, 0),\n          day = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\n      prevMonth.setUTCDate(day);\n      prevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.weekStart + 7) % 7);\n      let nextMonth = new Date(prevMonth.valueOf());\n      nextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\n      nextMonth = nextMonth.valueOf();\n      let html = [];\n      let clsName;\n      while (prevMonth.valueOf() < nextMonth) {\n        if (prevMonth.getUTCDay() == this.weekStart) {\n          html.push(\"<tr>\");\n          if (this.calendarWeeks) {\n            // adapted from https://github.com/timrwood/moment/blob/master/moment.js#L128\n            let a = new Date(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth(), prevMonth.getUTCDate() - prevMonth.getDay() + 10 - (this.weekStart && this.weekStart % 7 < 5 && 7)),\n                b = new Date(a.getFullYear(), 0, 4),\n                calWeek = ~~((a - b) / 864e5 / 7 + 1.5);\n            html.push(`<td class=\"cw\">${calWeek}</td>`);\n          }\n        }\n        clsName = ` ${this.onRender(prevMonth)} `;\n        if (prevMonth.getUTCFullYear() < year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() < month)) {\n          clsName += \" old\";\n        } else if (prevMonth.getUTCFullYear() > year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() > month)) {\n          clsName += \" new\";\n        }\n        // Compare internal UTC date with local today, not UTC today\n        if (this.todayHighlight &&\n                    prevMonth.getUTCFullYear() == today.getFullYear() &&\n                    prevMonth.getUTCMonth() == today.getMonth() &&\n                    prevMonth.getUTCDate() == today.getDate()) {\n          clsName += \" today\";\n        }\n        if (currentDate && prevMonth.valueOf() == currentDate) {\n          clsName += \" active\";\n        }\n        if (prevMonth.valueOf() < this.startDate || prevMonth.valueOf() > this.endDate ||\n                    $.inArray(prevMonth.getUTCDay(), this.daysOfWeekDisabled) !== -1 ||\n                    $.inArray(prevMonth.valueOf(), this.datesDisabled) !== -1) {\n          clsName += \" disabled\";\n        }\n        html.push(`<td class=\"day${clsName}\">${prevMonth.getUTCDate()}</td>`);\n        if (prevMonth.getUTCDay() == this.weekEnd) {\n          html.push(\"</tr>\");\n        }\n        prevMonth.setUTCDate(prevMonth.getUTCDate() + 1);\n      }\n      this.picker.find(\".datepicker-days tbody\").empty().append(html.join(\"\"));\n\n      html = [];\n      for (var i = 0; i < 24; i++) {\n        var actual = UTCDate(year, month, dayMonth, i);\n        clsName = \"\";\n        // We want the previous hour for the startDate\n        if ((actual.valueOf() + 3600000) < this.startDate || actual.valueOf() > this.endDate) {\n          clsName += \" disabled\";\n        } else if (hours == i) {\n          clsName += \" active\";\n        }\n        html.push(`<span class=\"hour${clsName}\">${i}:00</span>`);\n      }\n      this.picker.find(\".datepicker-hours td\").html(html.join(\"\"));\n\n      html = [];\n      for (var i = 0; i < 60; i += this.minuteStep) {\n        var actual = UTCDate(year, month, dayMonth, hours, i);\n        clsName = \"\";\n        if (actual.valueOf() < this.startDate || actual.valueOf() > this.endDate) {\n          clsName += \" disabled\";\n        } else if (Math.floor(minutes / this.minuteStep) == Math.floor(i / this.minuteStep)) {\n          clsName += \" active\";\n        }\n        html.push(`<span class=\"minute${clsName}\">${hours}:${i < 10 ? `0${i}` : i}</span>`);\n      }\n      this.picker.find(\".datepicker-minutes td\").html(html.join(\"\"));\n\n\n      let currentYear = this.date && this.date.getUTCFullYear();\n      let months = this.picker.find(\".datepicker-months\").\n        find(\"th:eq(1)\").\n        text(year).\n        end().\n        find(\"span\").removeClass(\"active\");\n      if (currentYear && currentYear == year) {\n        months.eq(this.date.getUTCMonth()).addClass(\"active\");\n      }\n      if (year < startYear || year > endYear) {\n        months.addClass(\"disabled\");\n      }\n      if (year == startYear) {\n        months.slice(0, startMonth).addClass(\"disabled\");\n      }\n      if (year == endYear) {\n        months.slice(endMonth + 1).addClass(\"disabled\");\n      }\n\n      html = \"\";\n      year = parseInt(year / 10, 10) * 10;\n      let yearCont = this.picker.find(\".datepicker-years\").\n        find(\"th:eq(1)\").\n        text(`${year}-${year + 9}`).\n        end().\n        find(\"td\");\n      year -= 1;\n      for (var i = -1; i < 11; i++) {\n        html += `<span class=\"year${i == -1 || i == 10 ? \" old\" : \"\"}${currentYear == year ? \" active\" : \"\"}${year < startYear || year > endYear ? \" disabled\" : \"\"}\">${year}</span>`;\n        year += 1;\n      }\n      yearCont.html(html);\n    },\n\n    updateNavArrows: function() {\n      let d = new Date(this.viewDate),\n          year = d.getUTCFullYear(),\n          month = d.getUTCMonth(),\n          day = d.getUTCDate(),\n          hour = d.getUTCHours();\n      switch (this.viewMode) {\n      case 0:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth() && day <= this.startDate.getUTCDate() && hour <= this.startDate.getUTCHours()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth() && day >= this.endDate.getUTCDate() && hour >= this.endDate.getUTCHours()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 1:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth() && day <= this.startDate.getUTCDate()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth() && day >= this.endDate.getUTCDate()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 2:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear() && month <= this.startDate.getUTCMonth()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear() && month >= this.endDate.getUTCMonth()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      case 3:\n      case 4:\n        if (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()) {\n          this.picker.find(\".prev\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".prev\").css({\n            visibility: \"visible\"\n          });\n        }\n        if (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()) {\n          this.picker.find(\".next\").css({\n            visibility: \"hidden\"\n          });\n        } else {\n          this.picker.find(\".next\").css({\n            visibility: \"visible\"\n          });\n        }\n        break;\n      }\n    },\n\n    click: function(e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if ($(e.target).hasClass(\"datepicker-close\") || $(e.target).parent().hasClass(\"datepicker-close\")) {\n        this.hide();\n      }\n\n      let target = $(e.target).closest(\"span, td, th\");\n      if (target.length == 1) {\n        if (target.is(\".disabled\")) {\n          this.element.trigger({\n            type: \"outOfRange\",\n            date: this.viewDate,\n            startDate: this.startDate,\n            endDate: this.endDate\n          });\n          return;\n        }\n\n        switch (target[0].nodeName.toLowerCase()) {\n        case \"th\":\n          switch (target[0].className) {\n          case \"date-switch\":\n            this.showMode(1);\n            break;\n          case \"prev\":\n          case \"next\":\n            var dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className == \"prev\" ? -1 : 1);\n            switch (this.viewMode) {\n            case 0:\n              this.viewDate = this.moveHour(this.viewDate, dir);\n              break;\n            case 1:\n              this.viewDate = this.moveDate(this.viewDate, dir);\n              break;\n            case 2:\n              this.viewDate = this.moveMonth(this.viewDate, dir);\n              break;\n            case 3:\n            case 4:\n              this.viewDate = this.moveYear(this.viewDate, dir);\n              break;\n            }\n            this.fill();\n            break;\n          case \"today\":\n            var date = new Date();\n            date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());\n\n            this.viewMode = this.startViewMode;\n            this.showMode(0);\n            this._setDate(date);\n            break;\n          }\n          break;\n        case \"span\":\n          if (!target.is(\".disabled\")) {\n            if (target.is(\".month\")) {\n              if (this.minView === 3) {\n                var month = target.parent().find(\"span\").index(target) || 0;\n                var year = this.viewDate.getUTCFullYear(),\n                    day = 1,\n                    hours = this.viewDate.getUTCHours(),\n                    minutes = this.viewDate.getUTCMinutes(),\n                    seconds = this.viewDate.getUTCSeconds();\n                this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n              } else {\n                this.viewDate.setUTCDate(1);\n                var month = target.parent().find(\"span\").index(target);\n                this.viewDate.setUTCMonth(month);\n                this.element.trigger({\n                  type: \"changeMonth\",\n                  date: this.viewDate\n                });\n              }\n            } else if (target.is(\".year\")) {\n              if (this.minView === 4) {\n                var year = parseInt(target.text(), 10) || 0;\n                var month = 0,\n                    day = 1,\n                    hours = this.viewDate.getUTCHours(),\n                    minutes = this.viewDate.getUTCMinutes(),\n                    seconds = this.viewDate.getUTCSeconds();\n                this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n              } else {\n                this.viewDate.setUTCDate(1);\n                var year = parseInt(target.text(), 10) || 0;\n                this.viewDate.setUTCFullYear(year);\n                this.element.trigger({\n                  type: \"changeYear\",\n                  date: this.viewDate\n                });\n              }\n            } else if (target.is(\".hour\")) {\n              var hours = parseInt(target.text(), 10) || 0;\n              var year = this.viewDate.getUTCFullYear(),\n                  month = this.viewDate.getUTCMonth(),\n                  day = this.viewDate.getUTCDate(),\n                  minutes = this.viewDate.getUTCMinutes(),\n                  seconds = this.viewDate.getUTCSeconds();\n              this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n            } else if (target.is(\".minute\")) {\n              var minutes = parseInt(target.text().substr(target.text().indexOf(\":\") + 1), 10) || 0;\n              var year = this.viewDate.getUTCFullYear(),\n                  month = this.viewDate.getUTCMonth(),\n                  day = this.viewDate.getUTCDate(),\n                  hours = this.viewDate.getUTCHours(),\n                  seconds = this.viewDate.getUTCSeconds();\n              this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n            }\n\n\n            if (this.viewMode != 0) {\n\n\n              var oldViewMode = this.viewMode;\n              this.showMode(-1);\n              this.fill();\n              if (oldViewMode == this.viewMode && this.autoclose) {\n                this.hide();\n              }\n            } else {\n              this.fill();\n              if (this.autoclose) {\n                this.hide();\n              }\n            }\n          }\n          break;\n        case \"td\":\n\n\n          if (target.is(\".day\") && !target.is(\".disabled\")) {\n            var day = parseInt(target.text(), 10) || 1;\n            var year = this.viewDate.getUTCFullYear(),\n                month = this.viewDate.getUTCMonth(),\n                hours = this.viewDate.getUTCHours(),\n                minutes = this.viewDate.getUTCMinutes(),\n                seconds = this.viewDate.getUTCSeconds();\n            if (target.is(\".old\")) {\n              if (month === 0) {\n                month = 11;\n                year -= 1;\n              } else {\n                month -= 1;\n              }\n            } else if (target.is(\".new\")) {\n              if (month == 11) {\n                month = 0;\n                year += 1;\n              } else {\n                month += 1;\n              }\n            }\n            this._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\n          }\n\n\n          var oldViewMode = this.viewMode;\n\n\n          this.showMode(-1);\n\n\n          this.fill();\n          if (oldViewMode == this.viewMode && this.autoclose) {\n            this.hide();\n          }\n          break;\n        }\n      }\n    },\n\n    _setDate: function(date, which) {\n\n      if (!which || which == \"date\")\n      {this.date = date;}\n      if (!which || which == \"view\")\n      {this.viewDate = date;}\n      this.fill();\n      this.setValue();\n      this.element.trigger({\n        type: \"changeDate\",\n        date: this.date\n      });\n      let element;\n      if (this.isInput) {\n        element = this.element;\n      } else if (this.component) {\n        element = this.element.find(\"input\");\n      }\n      if (element) {\n        element.change();\n        if (this.autoclose && (!which || which == \"date\")) {\n          // this.hide();\n        }\n      }\n    },\n\n    moveHour: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf());\n      dir = dir > 0 ? 1 : -1;\n      new_date.setUTCHours(new_date.getUTCHours() + dir);\n      return new_date;\n    },\n\n    moveDate: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf());\n      dir = dir > 0 ? 1 : -1;\n      new_date.setUTCDate(new_date.getUTCDate() + dir);\n      return new_date;\n    },\n\n    moveMonth: function(date, dir) {\n      if (!dir) {return date;}\n      let new_date = new Date(date.valueOf()),\n          day = new_date.getUTCDate(),\n          month = new_date.getUTCMonth(),\n          mag = Math.abs(dir),\n          new_month, test;\n      dir = dir > 0 ? 1 : -1;\n      if (mag == 1) {\n        test = dir == -1\n        // If going back one month, make sure month is not current month\n        // (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\n          ? function() {\n            return new_date.getUTCMonth() == month;\n          }\n        // If going forward one month, make sure month is as expected\n        // (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\n          : function() {\n            return new_date.getUTCMonth() != new_month;\n          };\n        new_month = month + dir;\n        new_date.setUTCMonth(new_month);\n        // Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\n        if (new_month < 0 || new_month > 11)\n        {new_month = (new_month + 12) % 12;}\n      } else {\n        // For magnitudes >1, move one month at a time...\n        for (let i = 0; i < mag; i++)\n        // ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\n        {new_date = this.moveMonth(new_date, dir);}\n        // ...then reset the day, keeping it in the new month\n        new_month = new_date.getUTCMonth();\n        new_date.setUTCDate(day);\n        test = function() {\n          return new_month != new_date.getUTCMonth();\n        };\n      }\n      // Common date-resetting loop -- if date is beyond end of month, make it\n      // end of month\n      while (test()) {\n        new_date.setUTCDate(--day);\n        new_date.setUTCMonth(new_month);\n      }\n      return new_date;\n    },\n\n    moveYear: function(date, dir) {\n      return this.moveMonth(date, dir * 12);\n    },\n\n    dateWithinRange: function(date) {\n      return date >= this.startDate && date <= this.endDate;\n    },\n\n    keydown: function(e) {\n      if (!this.keyboardNavigation) {\n        return true;\n      }\n      if (this.picker.is(\":not(:visible)\")) {\n        if (e.keyCode == 27) // allow escape to hide and re-show picker\n        {this.show();}\n        return;\n      }\n      let dateChanged = false,\n          day, dir, month,\n          newDate, newViewDate;\n      switch (e.keyCode) {\n      case 27: // escape\n        this.hide();\n        e.preventDefault();\n        break;\n      case 37: // left\n      case 39: // right\n        if (!this.keyboardNavigation) {break;}\n        dir = e.keyCode == 37 ? -1 : 1;\n        if (e.ctrlKey) {\n          newDate = this.moveYear(this.date, dir);\n          newViewDate = this.moveYear(this.viewDate, dir);\n        } else if (e.shiftKey) {\n          newDate = this.moveMonth(this.date, dir);\n          newViewDate = this.moveMonth(this.viewDate, dir);\n        } else {\n          newDate = new Date(this.date.valueOf());\n          newDate.setUTCDate(this.date.getUTCDate() + dir);\n          newViewDate = new Date(this.viewDate.valueOf());\n          newViewDate.setUTCDate(this.viewDate.getUTCDate() + dir);\n        }\n        if (this.dateWithinRange(newDate)) {\n          this.date = newDate;\n          this.viewDate = newViewDate;\n          this.setValue();\n          this.update();\n          e.preventDefault();\n          dateChanged = true;\n        }\n        break;\n      case 38: // up\n      case 40: // down\n        if (!this.keyboardNavigation) {break;}\n        dir = e.keyCode == 38 ? -1 : 1;\n        if (e.ctrlKey) {\n          newDate = this.moveYear(this.date, dir);\n          newViewDate = this.moveYear(this.viewDate, dir);\n        } else if (e.shiftKey) {\n          newDate = this.moveMonth(this.date, dir);\n          newViewDate = this.moveMonth(this.viewDate, dir);\n        } else {\n          newDate = new Date(this.date.valueOf());\n          newDate.setUTCDate(this.date.getUTCDate() + dir * 7);\n          newViewDate = new Date(this.viewDate.valueOf());\n          newViewDate.setUTCDate(this.viewDate.getUTCDate() + dir * 7);\n        }\n        if (this.dateWithinRange(newDate)) {\n          this.date = newDate;\n          this.viewDate = newViewDate;\n          this.setValue();\n          this.update();\n          e.preventDefault();\n          dateChanged = true;\n        }\n        break;\n      case 13: // enter\n        this.hide();\n        e.preventDefault();\n        break;\n      case 9: // tab\n        this.hide();\n        break;\n      }\n      if (dateChanged) {\n        this.element.trigger({\n          type: \"changeDate\",\n          date: this.date\n        });\n        let element;\n        if (this.isInput) {\n          element = this.element;\n        } else if (this.component) {\n          element = this.element.find(\"input\");\n        }\n        if (element) {\n          element.change();\n        }\n      }\n    },\n\n    showMode: function(dir) {\n\n      if (dir) {\n        let newViewMode = Math.max(0, Math.min(DPGlobal.modes.length - 1, this.viewMode + dir));\n        if (newViewMode >= this.minView && newViewMode <= this.maxView) {\n          this.viewMode = newViewMode;\n        }\n      }\n\n      /*\n                vitalets: fixing bug of very special conditions:\n                jquery 1.7.1 + webkit + show inline datepicker in bootstrap popover.\n                Method show() does not set display css correctly and datepicker is not shown.\n                Changed to .css('display', 'block') solve the problem.\n                See https://github.com/vitalets/x-editable/issues/37\n\n                In jquery 1.7.2+ everything works fine.\n            */\n      // this.picker.find('>div').hide().filter('.datepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\n      this.picker.find(\">div\").hide().filter(`.datepicker-${DPGlobal.modes[this.viewMode].clsName}`).css(\"display\", \"block\");\n      this.updateNavArrows();\n    },\n\n    changeViewDate: function(date) {\n      this.date = date;\n      this.viewDate = date;\n      this.fill();\n    },\n\n    reset: function(e) {\n      this._setDate(null, \"date\");\n    }\n  };\n\n  $.fn.fdatepicker = function(option) {\n    let args = Array(...arguments);\n    args.shift();\n    return this.each(function() {\n      let $this = $(this),\n          data = $this.data(\"datepicker\"),\n          options = typeof option === \"object\" && option;\n      if (!data) {\n        $this.data(\"datepicker\", (data = new Datepicker(this, $.extend({}, $.fn.fdatepicker.defaults, options))));\n      }\n      if (typeof option === \"string\" && typeof data[option] === \"function\") {\n        data[option](...args);\n      }\n    });\n  };\n\n  $.fn.fdatepicker.defaults = {\n    onRender: function(date) {\n      return \"\";\n    }\n  };\n  $.fn.fdatepicker.Constructor = Datepicker;\n  var dates = $.fn.fdatepicker.dates = {\n    \"en\": {\n      days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\n      daysShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n      daysMin: [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\n      months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n      monthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n      today: \"Today\",\n      titleFormat: \"MM yyyy\"\n    }\n  };\n\n  var DPGlobal = {\n    modes: [{\n      clsName: \"minutes\",\n      navFnc: \"Hours\",\n      navStep: 1\n    }, {\n      clsName: \"hours\",\n      navFnc: \"Date\",\n      navStep: 1\n    }, {\n      clsName: \"days\",\n      navFnc: \"Month\",\n      navStep: 1\n    }, {\n      clsName: \"months\",\n      navFnc: \"FullYear\",\n      navStep: 1\n    }, {\n      clsName: \"years\",\n      navFnc: \"FullYear\",\n      navStep: 10\n    }],\n    isLeapYear: function(year) {\n      return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0));\n    },\n    getDaysInMonth: function(year, month) {\n      return [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];\n    },\n    validParts: /hh?|ii?|ss?|dd?|mm?|MM?|yy(?:yy)?/g,\n    nonpunctuation: /[^ -\\/:-@\\[\\u3400-\\u9fff-`{-~\\t\\n\\r]+/g,\n    parseFormat: function(format) {\n      // IE treats \\0 as a string end in inputs (truncating the value),\n      // so it's a bad format delimiter, anyway\n      let separators = format.replace(this.validParts, \"\\0\").split(\"\\0\"),\n          parts = format.match(this.validParts);\n      if (!separators || !separators.length || !parts || parts.length === 0) {\n        throw new Error(\"Invalid date format.\");\n      }\n      this.formatText = format;\n      return {\n        separators: separators,\n        parts: parts\n      };\n    },\n    parseDate: function(date, format, language) {\n      if (date instanceof Date) {return new Date(date.valueOf() - date.getTimezoneOffset() * 60000);}\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd\");\n      }\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd hh:ii\");\n      }\n      if (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}\\:\\d{1,2}[Z]{0,1}$/.test(date)) {\n        format = this.parseFormat(\"yyyy-mm-dd hh:ii:ss\");\n      }\n      if (/^[-+]\\d+[dmwy]([\\s,]+[-+]\\d+[dmwy])*$/.test(date)) {\n        var part_re = /([-+]\\d+)([dmwy])/,\n            parts = date.match(/([-+]\\d+)([dmwy])/g),\n            part, dir;\n        date = new Date();\n        for (var i = 0; i < parts.length; i++) {\n          part = part_re.exec(parts[i]);\n          dir = parseInt(part[1]);\n          switch (part[2]) {\n          case \"d\":\n            date.setUTCDate(date.getUTCDate() + dir);\n            break;\n          case \"m\":\n            date = Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype, date, dir);\n            break;\n          case \"w\":\n            date.setUTCDate(date.getUTCDate() + dir * 7);\n            break;\n          case \"y\":\n            date = Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype, date, dir);\n            break;\n          }\n        }\n        return UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds());\n      }\n      var parts = date && date.match(this.nonpunctuation) || [],\n          date = new Date(),\n          parsed = {},\n          setters_order = [\"hh\", \"h\", \"ii\", \"i\", \"ss\", \"s\", \"yyyy\", \"yy\", \"M\", \"MM\", \"m\", \"mm\", \"d\", \"dd\"],\n          setters_map = {\n            hh: function(d, v) {\n              return d.setUTCHours(v);\n            },\n            h: function(d, v) {\n              return d.setUTCHours(v);\n            },\n            ii: function(d, v) {\n              return d.setUTCMinutes(v);\n            },\n            i: function(d, v) {\n              return d.setUTCMinutes(v);\n            },\n            ss: function(d, v) {\n              return d.setUTCSeconds(v);\n            },\n            s: function(d, v) {\n              return d.setUTCSeconds(v);\n            },\n            yyyy: function(d, v) {\n              return d.setUTCFullYear(v);\n            },\n            yy: function(d, v) {\n              return d.setUTCFullYear(2000 + v);\n            },\n            m: function(d, v) {\n              v -= 1;\n              while (v < 0) {v += 12;}\n              v %= 12;\n              d.setUTCMonth(v);\n              while (d.getUTCMonth() != v)\n              {d.setUTCDate(d.getUTCDate() - 1);}\n              return d;\n            },\n            d: function(d, v) {\n              return d.setUTCDate(v);\n            }\n          },\n          val, filtered, part;\n      setters_map.M = setters_map.MM = setters_map.mm = setters_map.m;\n      setters_map.dd = setters_map.d;\n      date = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), 0, 0, 0); // date.getHours(), date.getMinutes(), date.getSeconds());\n      if (parts.length == format.parts.length) {\n        for (var i = 0, cnt = format.parts.length; i < cnt; i++) {\n          val = parseInt(parts[i], 10);\n          part = format.parts[i];\n          if (isNaN(val)) {\n            switch (part) {\n            case \"MM\":\n              filtered = $(dates[language].months).filter(function() {\n                let m = this.slice(0, parts[i].length),\n                    p = parts[i].slice(0, m.length);\n                return m == p;\n              });\n              val = $.inArray(filtered[0], dates[language].months) + 1;\n              break;\n            case \"M\":\n              filtered = $(dates[language].monthsShort).filter(function() {\n                let m = this.slice(0, parts[i].length),\n                    p = parts[i].slice(0, m.length);\n                return m == p;\n              });\n              val = $.inArray(filtered[0], dates[language].monthsShort) + 1;\n              break;\n            }\n          }\n          parsed[part] = val;\n        }\n        for (var i = 0, s; i < setters_order.length; i++) {\n          s = setters_order[i];\n          if (s in parsed && !isNaN(parsed[s]))\n          {setters_map[s](date, parsed[s])}\n        }\n      }\n      return date;\n    },\n    formatDate: function(date, format, language) {\n      if (date == null) {\n        return \"\";\n      }\n      let val = {\n        h: date.getUTCHours(),\n        i: date.getUTCMinutes(),\n        s: date.getUTCSeconds(),\n        d: date.getUTCDate(),\n        m: date.getUTCMonth() + 1,\n        M: dates[language].monthsShort[date.getUTCMonth()],\n        MM: dates[language].months[date.getUTCMonth()],\n        yy: date.getUTCFullYear().toString().substring(2),\n        yyyy: date.getUTCFullYear()\n      };\n      val.hh = (val.h < 10 ? \"0\" : \"\") + val.h;\n      val.ii = (val.i < 10 ? \"0\" : \"\") + val.i;\n      val.ss = (val.s < 10 ? \"0\" : \"\") + val.s;\n      val.dd = (val.d < 10 ? \"0\" : \"\") + val.d;\n      val.mm = (val.m < 10 ? \"0\" : \"\") + val.m;\n      var date = [],\n          seps = $.extend([], format.separators);\n      for (let i = 0, cnt = format.parts.length; i < cnt; i++) {\n        if (seps.length)\n        {date.push(seps.shift())}\n        date.push(val[format.parts[i]]);\n      }\n      return date.join(\"\");\n    },\n    convertViewMode: function(viewMode) {\n      switch (viewMode) {\n      case 4:\n      case \"decade\":\n        viewMode = 4;\n        break;\n      case 3:\n      case \"year\":\n        viewMode = 3;\n        break;\n      case 2:\n      case \"month\":\n        viewMode = 2;\n        break;\n      case 1:\n      case \"day\":\n        viewMode = 1;\n        break;\n      case 0:\n      case \"hour\":\n        viewMode = 0;\n        break;\n      }\n\n      return viewMode;\n    },\n    headTemplate: function(leftArrow, rightArrow) {return (`${\"<thead>\" +\n            \"<tr>\" +\n            '<th class=\"prev\">'}${leftArrow}</th>` +\n            \"<th colspan=\\\"5\\\" class=\\\"date-switch\\\"></th>\" +\n            `<th class=\"next\">${rightArrow}</th>` +\n            \"</tr>\" +\n            \"</thead>\")},\n    contTemplate: '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\n    footTemplate: '<tfoot><tr><th colspan=\"7\" class=\"today\"></th></tr></tfoot>'\n  };\n  DPGlobal.template = function(leftArrow, rightArrow, closeIcon) {return (`${'<div class=\"datepicker\">' +\n        '<div class=\"datepicker-minutes\">' +\n        '<table class=\" table-condensed\">'}${\n    DPGlobal.headTemplate(leftArrow, rightArrow)\n  }${DPGlobal.contTemplate\n  }${DPGlobal.footTemplate\n  }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-hours\\\">\" +\n        `<table class=\" table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-days\\\">\" +\n        `<table class=\" table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }<tbody></tbody>${\n          DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-months\\\">\" +\n        `<table class=\"table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        \"<div class=\\\"datepicker-years\\\">\" +\n        `<table class=\"table-condensed\">${\n          DPGlobal.headTemplate(leftArrow, rightArrow)\n        }${DPGlobal.contTemplate\n        }${DPGlobal.footTemplate\n        }</table>` +\n        \"</div>\" +\n        `<a class=\"button datepicker-close tiny alert right\" style=\"width:auto;\">${closeIcon}</a>` +\n        \"</div>\")};\n\n  $.fn.fdatepicker.DPGlobal = DPGlobal;\n\n}(window.jQuery));\n","/* eslint-disable */\n\n/*\n  Modified file from the original tribute.js\n  Adding inside click event the conditional if the li element has no disabled-tribute-element class name. if true, then it must continue with normal behaviour.\n*/\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Tribute = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nrequire(\"./utils\");\n\nvar _TributeEvents = _interopRequireDefault(require(\"./TributeEvents\"));\n\nvar _TributeMenuEvents = _interopRequireDefault(require(\"./TributeMenuEvents\"));\n\nvar _TributeRange = _interopRequireDefault(require(\"./TributeRange\"));\n\nvar _TributeSearch = _interopRequireDefault(require(\"./TributeSearch\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Tribute =\n/*#__PURE__*/\nfunction () {\n  function Tribute(_ref) {\n    var _this = this;\n\n    var _ref$values = _ref.values,\n        values = _ref$values === void 0 ? null : _ref$values,\n        _ref$iframe = _ref.iframe,\n        iframe = _ref$iframe === void 0 ? null : _ref$iframe,\n        _ref$selectClass = _ref.selectClass,\n        selectClass = _ref$selectClass === void 0 ? 'highlight' : _ref$selectClass,\n        _ref$trigger = _ref.trigger,\n        trigger = _ref$trigger === void 0 ? '@' : _ref$trigger,\n        _ref$autocompleteMode = _ref.autocompleteMode,\n        autocompleteMode = _ref$autocompleteMode === void 0 ? false : _ref$autocompleteMode,\n        _ref$selectTemplate = _ref.selectTemplate,\n        selectTemplate = _ref$selectTemplate === void 0 ? null : _ref$selectTemplate,\n        _ref$menuItemTemplate = _ref.menuItemTemplate,\n        menuItemTemplate = _ref$menuItemTemplate === void 0 ? null : _ref$menuItemTemplate,\n        _ref$lookup = _ref.lookup,\n        lookup = _ref$lookup === void 0 ? 'key' : _ref$lookup,\n        _ref$fillAttr = _ref.fillAttr,\n        fillAttr = _ref$fillAttr === void 0 ? 'value' : _ref$fillAttr,\n        _ref$collection = _ref.collection,\n        collection = _ref$collection === void 0 ? null : _ref$collection,\n        _ref$menuContainer = _ref.menuContainer,\n        menuContainer = _ref$menuContainer === void 0 ? null : _ref$menuContainer,\n        _ref$noMatchTemplate = _ref.noMatchTemplate,\n        noMatchTemplate = _ref$noMatchTemplate === void 0 ? null : _ref$noMatchTemplate,\n        _ref$requireLeadingSp = _ref.requireLeadingSpace,\n        requireLeadingSpace = _ref$requireLeadingSp === void 0 ? true : _ref$requireLeadingSp,\n        _ref$allowSpaces = _ref.allowSpaces,\n        allowSpaces = _ref$allowSpaces === void 0 ? false : _ref$allowSpaces,\n        _ref$replaceTextSuffi = _ref.replaceTextSuffix,\n        replaceTextSuffix = _ref$replaceTextSuffi === void 0 ? null : _ref$replaceTextSuffi,\n        _ref$positionMenu = _ref.positionMenu,\n        positionMenu = _ref$positionMenu === void 0 ? true : _ref$positionMenu,\n        _ref$spaceSelectsMatc = _ref.spaceSelectsMatch,\n        spaceSelectsMatch = _ref$spaceSelectsMatc === void 0 ? false : _ref$spaceSelectsMatc,\n        _ref$searchOpts = _ref.searchOpts,\n        searchOpts = _ref$searchOpts === void 0 ? {} : _ref$searchOpts,\n        _ref$menuItemLimit = _ref.menuItemLimit,\n        menuItemLimit = _ref$menuItemLimit === void 0 ? null : _ref$menuItemLimit;\n\n    _classCallCheck(this, Tribute);\n\n    this.autocompleteMode = autocompleteMode;\n    this.menuSelected = 0;\n    this.current = {};\n    this.inputEvent = false;\n    this.isActive = false;\n    this.menuContainer = menuContainer;\n    this.allowSpaces = allowSpaces;\n    this.replaceTextSuffix = replaceTextSuffix;\n    this.positionMenu = positionMenu;\n    this.hasTrailingSpace = false;\n    this.spaceSelectsMatch = spaceSelectsMatch;\n\n    if (this.autocompleteMode) {\n      trigger = '';\n      allowSpaces = false;\n    }\n\n    if (values) {\n      this.collection = [{\n        // symbol that starts the lookup\n        trigger: trigger,\n        // is it wrapped in an iframe\n        iframe: iframe,\n        // class applied to selected item\n        selectClass: selectClass,\n        // function called on select that retuns the content to insert\n        selectTemplate: (selectTemplate || Tribute.defaultSelectTemplate).bind(this),\n        // function called that returns content for an item\n        menuItemTemplate: (menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(this),\n        // function called when menu is empty, disables hiding of menu.\n        noMatchTemplate: function (t) {\n          if (typeof t === 'function') {\n            return t.bind(_this);\n          }\n\n          return noMatchTemplate || function () {\n            return '';\n          }.bind(_this);\n        }(noMatchTemplate),\n        // column to search against in the object\n        lookup: lookup,\n        // column that contains the content to insert by default\n        fillAttr: fillAttr,\n        // array of objects or a function returning an array of objects\n        values: values,\n        requireLeadingSpace: requireLeadingSpace,\n        searchOpts: searchOpts,\n        menuItemLimit: menuItemLimit\n      }];\n    } else if (collection) {\n      if (this.autocompleteMode) console.warn('Tribute in autocomplete mode does not work for collections');\n      this.collection = collection.map(function (item) {\n        return {\n          trigger: item.trigger || trigger,\n          iframe: item.iframe || iframe,\n          selectClass: item.selectClass || selectClass,\n          selectTemplate: (item.selectTemplate || Tribute.defaultSelectTemplate).bind(_this),\n          menuItemTemplate: (item.menuItemTemplate || Tribute.defaultMenuItemTemplate).bind(_this),\n          // function called when menu is empty, disables hiding of menu.\n          noMatchTemplate: function (t) {\n            if (typeof t === 'function') {\n              return t.bind(_this);\n            }\n\n            return null;\n          }(noMatchTemplate),\n          lookup: item.lookup || lookup,\n          fillAttr: item.fillAttr || fillAttr,\n          values: item.values,\n          requireLeadingSpace: item.requireLeadingSpace,\n          searchOpts: item.searchOpts || searchOpts,\n          menuItemLimit: item.menuItemLimit || menuItemLimit\n        };\n      });\n    } else {\n      throw new Error('[Tribute] No collection specified.');\n    }\n\n    new _TributeRange[\"default\"](this);\n    new _TributeEvents[\"default\"](this);\n    new _TributeMenuEvents[\"default\"](this);\n    new _TributeSearch[\"default\"](this);\n  }\n\n  _createClass(Tribute, [{\n    key: \"triggers\",\n    value: function triggers() {\n      return this.collection.map(function (config) {\n        return config.trigger;\n      });\n    }\n  }, {\n    key: \"attach\",\n    value: function attach(el) {\n      if (!el) {\n        throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n      } // Check if it is a jQuery collection\n\n\n      if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n        el = el.get();\n      } // Is el an Array/Array-like object?\n\n\n      if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n        var length = el.length;\n\n        for (var i = 0; i < length; ++i) {\n          this._attach(el[i]);\n        }\n      } else {\n        this._attach(el);\n      }\n    }\n  }, {\n    key: \"_attach\",\n    value: function _attach(el) {\n      if (el.hasAttribute('data-tribute')) {\n        console.warn('Tribute was already bound to ' + el.nodeName);\n      }\n\n      this.ensureEditable(el);\n      this.events.bind(el);\n      el.setAttribute('data-tribute', true);\n    }\n  }, {\n    key: \"ensureEditable\",\n    value: function ensureEditable(element) {\n      if (Tribute.inputTypes().indexOf(element.nodeName) === -1) {\n        if (element.contentEditable) {\n          element.contentEditable = true;\n        } else {\n          throw new Error('[Tribute] Cannot bind to ' + element.nodeName);\n        }\n      }\n    }\n  }, {\n    key: \"createMenu\",\n    value: function createMenu() {\n      var wrapper = this.range.getDocument().createElement('div'),\n          ul = this.range.getDocument().createElement('ul');\n      wrapper.className = 'tribute-container';\n      wrapper.setAttribute('aria-expanded','true');\n      ul.setAttribute('id','results');\n      wrapper.appendChild(ul);\n\n      if (this.menuContainer) {\n        return this.menuContainer.appendChild(wrapper);\n      }\n\n      return this.range.getDocument().body.appendChild(wrapper);\n    }\n  }, {\n    key: \"showMenuFor\",\n    value: function showMenuFor(element, scrollTo) {\n      var _this2 = this;\n\n      // Only proceed if menu isn't already shown for the current element & mentionText\n      if (this.isActive && this.current.element === element && this.current.mentionText === this.currentMentionTextSnapshot) {\n        return;\n      }\n\n      this.currentMentionTextSnapshot = this.current.mentionText; // create the menu if it doesn't exist.\n\n      if (!this.menu) {\n        this.menu = this.createMenu();\n        element.tributeMenu = this.menu;\n        this.menuEvents.bind(this.menu);\n      }\n\n      this.isActive = true;\n      this.menuSelected = 0;\n\n      if (!this.current.mentionText) {\n        this.current.mentionText = '';\n      }\n\n      var processValues = function processValues(values) {\n        // Tribute may not be active any more by the time the value callback returns\n        if (!_this2.isActive) {\n          return;\n        }\n\n        var items = _this2.search.filter(_this2.current.mentionText, values, {\n          pre: _this2.current.collection.searchOpts.pre || '<span>',\n          post: _this2.current.collection.searchOpts.post || '</span>',\n          skip: _this2.current.collection.searchOpts.skip,\n          extract: function extract(el) {\n            if (typeof _this2.current.collection.lookup === 'string') {\n              return el[_this2.current.collection.lookup];\n            } else if (typeof _this2.current.collection.lookup === 'function') {\n              return _this2.current.collection.lookup(el, _this2.current.mentionText);\n            } else {\n              throw new Error('Invalid lookup attribute, lookup must be string or function.');\n            }\n          }\n        });\n\n        if (_this2.current.collection.menuItemLimit) {\n          items = items.slice(0, _this2.current.collection.menuItemLimit);\n        }\n\n        _this2.current.filteredItems = items;\n\n        var ul = _this2.menu.querySelector('ul');\n\n        _this2.range.positionMenuAtCaret(scrollTo);\n\n        if (!items.length) {\n          var noMatchEvent = new CustomEvent('tribute-no-match', {\n            detail: _this2.menu\n          });\n\n          _this2.current.element.dispatchEvent(noMatchEvent);\n\n          if (typeof _this2.current.collection.noMatchTemplate === 'function' && !_this2.current.collection.noMatchTemplate() || !_this2.current.collection.noMatchTemplate) {\n            _this2.hideMenu();\n          } else {\n            typeof _this2.current.collection.noMatchTemplate === 'function' ? ul.innerHTML = _this2.current.collection.noMatchTemplate() : ul.innerHTML = _this2.current.collection.noMatchTemplate;\n          }\n\n          return;\n        }\n\n        ul.innerHTML = '';\n\n        var fragment = _this2.range.getDocument().createDocumentFragment();\n\n        items.forEach(function (item, index) {\n          var li = _this2.range.getDocument().createElement('li');\n          li.setAttribute('role', 'option');\n          li.setAttribute('data-index', index);\n          li.addEventListener('mousemove', function (e) {\n            var _this2$_findLiTarget = _this2._findLiTarget(e.target),\n                _this2$_findLiTarget2 = _slicedToArray(_this2$_findLiTarget, 2),\n                li = _this2$_findLiTarget2[0],\n                index = _this2$_findLiTarget2[1];\n\n            if (e.movementY !== 0) {\n              _this2.events.setActiveLi(index);\n            }\n          });\n\n          if (_this2.menuSelected === index) {\n            li.className = _this2.current.collection.selectClass;\n          }\n\n          li.innerHTML = _this2.current.collection.menuItemTemplate(item);\n          fragment.appendChild(li);\n        });\n        ul.appendChild(fragment);\n      };\n\n      if (typeof this.current.collection.values === 'function') {\n        this.current.collection.values(this.current.mentionText, processValues);\n      } else {\n        processValues(this.current.collection.values);\n      }\n    }\n  }, {\n    key: \"_findLiTarget\",\n    value: function _findLiTarget(el) {\n      if (!el) return [];\n      var index = el.getAttribute('data-index');\n      return !index ? this._findLiTarget(el.parentNode) : [el, index];\n    }\n  }, {\n    key: \"showMenuForCollection\",\n    value: function showMenuForCollection(element, collectionIndex) {\n      if (element !== document.activeElement) {\n        this.placeCaretAtEnd(element);\n      }\n\n      this.current.collection = this.collection[collectionIndex || 0];\n      this.current.externalTrigger = true;\n      this.current.element = element;\n      if (element.isContentEditable) this.insertTextAtCursor(this.current.collection.trigger);else this.insertAtCaret(element, this.current.collection.trigger);\n      this.showMenuFor(element);\n    } // TODO: make sure this works for inputs/textareas\n\n  }, {\n    key: \"placeCaretAtEnd\",\n    value: function placeCaretAtEnd(el) {\n      el.focus();\n\n      if (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n        var range = document.createRange();\n        range.selectNodeContents(el);\n        range.collapse(false);\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n      } else if (typeof document.body.createTextRange != \"undefined\") {\n        var textRange = document.body.createTextRange();\n        textRange.moveToElementText(el);\n        textRange.collapse(false);\n        textRange.select();\n      }\n    } // for contenteditable\n\n  }, {\n    key: \"insertTextAtCursor\",\n    value: function insertTextAtCursor(text) {\n      var sel, range, html;\n      sel = window.getSelection();\n      range = sel.getRangeAt(0);\n      range.deleteContents();\n      var textNode = document.createTextNode(text);\n      range.insertNode(textNode);\n      range.selectNodeContents(textNode);\n      range.collapse(false);\n      sel.removeAllRanges();\n      sel.addRange(range);\n    } // for regular inputs\n\n  }, {\n    key: \"insertAtCaret\",\n    value: function insertAtCaret(textarea, text) {\n      var scrollPos = textarea.scrollTop;\n      var caretPos = textarea.selectionStart;\n      var front = textarea.value.substring(0, caretPos);\n      var back = textarea.value.substring(textarea.selectionEnd, textarea.value.length);\n      textarea.value = front + text + back;\n      caretPos = caretPos + text.length;\n      textarea.selectionStart = caretPos;\n      textarea.selectionEnd = caretPos;\n      textarea.focus();\n      textarea.scrollTop = scrollPos;\n    }\n  }, {\n    key: \"hideMenu\",\n    value: function hideMenu() {\n      if (this.menu) {\n        this.menu.style.cssText = 'display: none;';\n        this.isActive = false;\n        this.menuSelected = 0;\n        this.current = {};\n      }\n    }\n  }, {\n    key: \"selectItemAtIndex\",\n    value: function selectItemAtIndex(index, originalEvent) {\n      index = parseInt(index);\n      if (typeof index !== 'number' || isNaN(index)) return;\n      var item = this.current.filteredItems[index];\n      var content = this.current.collection.selectTemplate(item);\n      if (content !== null) this.replaceText(content, originalEvent, item);\n    }\n  }, {\n    key: \"replaceText\",\n    value: function replaceText(content, originalEvent, item) {\n      this.range.replaceTriggerText(content, true, true, originalEvent, item);\n    }\n  }, {\n    key: \"_append\",\n    value: function _append(collection, newValues, replace) {\n      if (typeof collection.values === 'function') {\n        throw new Error('Unable to append to values, as it is a function.');\n      } else if (!replace) {\n        collection.values = collection.values.concat(newValues);\n      } else {\n        collection.values = newValues;\n      }\n    }\n  }, {\n    key: \"append\",\n    value: function append(collectionIndex, newValues, replace) {\n      var index = parseInt(collectionIndex);\n      if (typeof index !== 'number') throw new Error('please provide an index for the collection to update.');\n      var collection = this.collection[index];\n\n      this._append(collection, newValues, replace);\n    }\n  }, {\n    key: \"appendCurrent\",\n    value: function appendCurrent(newValues, replace) {\n      if (this.isActive) {\n        this._append(this.current.collection, newValues, replace);\n      } else {\n        throw new Error('No active state. Please use append instead and pass an index.');\n      }\n    }\n  }, {\n    key: \"detach\",\n    value: function detach(el) {\n      if (!el) {\n        throw new Error('[Tribute] Must pass in a DOM node or NodeList.');\n      } // Check if it is a jQuery collection\n\n\n      if (typeof jQuery !== 'undefined' && el instanceof jQuery) {\n        el = el.get();\n      } // Is el an Array/Array-like object?\n\n\n      if (el.constructor === NodeList || el.constructor === HTMLCollection || el.constructor === Array) {\n        var length = el.length;\n\n        for (var i = 0; i < length; ++i) {\n          this._detach(el[i]);\n        }\n      } else {\n        this._detach(el);\n      }\n    }\n  }, {\n    key: \"_detach\",\n    value: function _detach(el) {\n      var _this3 = this;\n\n      this.events.unbind(el);\n\n      if (el.tributeMenu) {\n        this.menuEvents.unbind(el.tributeMenu);\n      }\n\n      setTimeout(function () {\n        el.removeAttribute('data-tribute');\n        _this3.isActive = false;\n\n        if (el.tributeMenu) {\n          el.tributeMenu.remove();\n        }\n      });\n    }\n  }], [{\n    key: \"defaultSelectTemplate\",\n    value: function defaultSelectTemplate(item) {\n      if (typeof item === 'undefined') return null;\n\n      if (this.range.isContentEditable(this.current.element)) {\n        return '<span class=\"tribute-mention\">' + (this.current.collection.trigger + item.original[this.current.collection.fillAttr]) + '</span>';\n      }\n\n      return this.current.collection.trigger + item.original[this.current.collection.fillAttr];\n    }\n  }, {\n    key: \"defaultMenuItemTemplate\",\n    value: function defaultMenuItemTemplate(matchItem) {\n      return matchItem.string;\n    }\n  }, {\n    key: \"inputTypes\",\n    value: function inputTypes() {\n      return ['TEXTAREA', 'INPUT'];\n    }\n  }]);\n\n  return Tribute;\n}();\n\nvar _default = Tribute;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{\"./TributeEvents\":2,\"./TributeMenuEvents\":3,\"./TributeRange\":4,\"./TributeSearch\":5,\"./utils\":7}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar TributeEvents =\n/*#__PURE__*/\nfunction () {\n  function TributeEvents(tribute) {\n    _classCallCheck(this, TributeEvents);\n\n    this.tribute = tribute;\n    this.tribute.events = this;\n  }\n\n  _createClass(TributeEvents, [{\n    key: \"bind\",\n    value: function bind(element) {\n      element.boundKeydown = this.keydown.bind(element, this);\n      element.boundKeyup = this.keyup.bind(element, this);\n      element.boundInput = this.input.bind(element, this);\n      element.addEventListener('keydown', element.boundKeydown, false);\n      element.addEventListener('keyup', element.boundKeyup, false);\n      element.addEventListener('input', element.boundInput, false);\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(element) {\n      element.removeEventListener('keydown', element.boundKeydown, false);\n      element.removeEventListener('keyup', element.boundKeyup, false);\n      element.removeEventListener('input', element.boundInput, false);\n      delete element.boundKeydown;\n      delete element.boundKeyup;\n      delete element.boundInput;\n    }\n  }, {\n    key: \"keydown\",\n    value: function keydown(instance, event) {\n      if (instance.shouldDeactivate(event)) {\n        instance.tribute.isActive = false;\n        instance.tribute.hideMenu();\n      }\n\n      var element = this;\n      instance.commandEvent = false;\n      TributeEvents.keys().forEach(function (o) {\n        if (o.key === event.keyCode) {\n          instance.commandEvent = true;\n          instance.callbacks()[o.value.toLowerCase()](event, element);\n        }\n      });\n    }\n  }, {\n    key: \"input\",\n    value: function input(instance, event) {\n      instance.inputEvent = true;\n      instance.keyup.call(this, instance, event);\n    }\n  }, {\n    key: \"click\",\n    value: function click(instance, event) {\n      var tribute = instance.tribute;\n\n      if (tribute.menu && tribute.menu.contains(event.target)) {\n        var li = event.target;\n        event.preventDefault();\n        event.stopPropagation();\n\n        while (li.nodeName.toLowerCase() !== 'li') {\n          li = li.parentNode;\n\n          if (!li || li === tribute.menu) {\n            throw new Error('cannot find the <li> container for the click');\n          }\n        }\n\n        if (li.getElementsByClassName(\"disabled-tribute-element\")[0]==undefined){\n          tribute.selectItemAtIndex(li.getAttribute('data-index'), event);\n          tribute.hideMenu(); // TODO: should fire with externalTrigger and target is outside of menu\n        }\n      } else if (tribute.current.element && !tribute.current.externalTrigger) {\n        tribute.current.externalTrigger = false;\n        setTimeout(function () {\n          return tribute.hideMenu();\n        });\n      }\n    }\n  }, {\n    key: \"keyup\",\n    value: function keyup(instance, event) {\n      if (instance.inputEvent) {\n        instance.inputEvent = false;\n      }\n\n      instance.updateSelection(this);\n      if (event.keyCode === 27) return;\n\n      if (!instance.tribute.allowSpaces && instance.tribute.hasTrailingSpace) {\n        instance.tribute.hasTrailingSpace = false;\n        instance.commandEvent = true;\n        instance.callbacks()[\"space\"](event, this);\n        return;\n      }\n\n      if (!instance.tribute.isActive) {\n        if (instance.tribute.autocompleteMode) {\n          instance.callbacks().triggerChar(event, this, '');\n        } else {\n          var keyCode = instance.getKeyCode(instance, this, event);\n          if (isNaN(keyCode) || !keyCode) return;\n          var trigger = instance.tribute.triggers().find(function (trigger) {\n            return trigger.charCodeAt(0) === keyCode;\n          });\n\n          if (typeof trigger !== 'undefined') {\n            instance.callbacks().triggerChar(event, this, trigger);\n          }\n        }\n      }\n\n      if ((instance.tribute.current.trigger || instance.tribute.autocompleteMode) && instance.commandEvent === false || instance.tribute.isActive && event.keyCode === 8) {\n        instance.tribute.showMenuFor(this, true);\n      }\n    }\n  }, {\n    key: \"shouldDeactivate\",\n    value: function shouldDeactivate(event) {\n      if (!this.tribute.isActive) return false;\n\n      if (this.tribute.current.mentionText.length === 0) {\n        var eventKeyPressed = false;\n        TributeEvents.keys().forEach(function (o) {\n          if (event.keyCode === o.key) eventKeyPressed = true;\n        });\n        return !eventKeyPressed;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"getKeyCode\",\n    value: function getKeyCode(instance, el, event) {\n      var _char;\n\n      var tribute = instance.tribute;\n      var info = tribute.range.getTriggerInfo(false, tribute.hasTrailingSpace, true, tribute.allowSpaces, tribute.autocompleteMode);\n\n      if (info) {\n        return info.mentionTriggerChar.charCodeAt(0);\n      } else {\n        return false;\n      }\n    }\n  }, {\n    key: \"updateSelection\",\n    value: function updateSelection(el) {\n      this.tribute.current.element = el;\n      var info = this.tribute.range.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (info) {\n        this.tribute.current.selectedPath = info.mentionSelectedPath;\n        this.tribute.current.mentionText = info.mentionText;\n        this.tribute.current.selectedOffset = info.mentionSelectedOffset;\n      }\n    }\n  }, {\n    key: \"callbacks\",\n    value: function callbacks() {\n      var _this = this;\n\n      return {\n        triggerChar: function triggerChar(e, el, trigger) {\n          var tribute = _this.tribute;\n          tribute.current.trigger = trigger;\n          var collectionItem = tribute.collection.find(function (item) {\n            return item.trigger === trigger;\n          });\n          tribute.current.collection = collectionItem;\n          if (tribute.inputEvent) tribute.showMenuFor(el, true);\n        },\n        enter: function enter(e, el) {\n          // choose selection\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            setTimeout(function () {\n              _this.tribute.selectItemAtIndex(_this.tribute.menuSelected, e);\n\n              _this.tribute.hideMenu();\n            }, 0);\n          }\n        },\n        escape: function escape(e, el) {\n          if (_this.tribute.isActive) {\n            e.preventDefault();\n            e.stopPropagation();\n            _this.tribute.isActive = false;\n\n            _this.tribute.hideMenu();\n          }\n        },\n        tab: function tab(e, el) {\n          // choose first match\n          _this.callbacks().enter(e, el);\n        },\n        space: function space(e, el) {\n          if (_this.tribute.isActive) {\n            if (_this.tribute.spaceSelectsMatch) {\n              _this.callbacks().enter(e, el);\n            } else if (!_this.tribute.allowSpaces) {\n              e.stopPropagation();\n              setTimeout(function () {\n                _this.tribute.hideMenu();\n\n                _this.tribute.isActive = false;\n              }, 0);\n            }\n          }\n        },\n        up: function up(e, el) {\n          // navigate up ul\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            var count = _this.tribute.current.filteredItems.length,\n                selected = _this.tribute.menuSelected;\n\n            if (count > selected && selected > 0) {\n              _this.tribute.menuSelected--;\n\n              _this.setActiveLi();\n            } else if (selected === 0) {\n              _this.tribute.menuSelected = count - 1;\n\n              _this.setActiveLi();\n\n              _this.tribute.menu.scrollTop = _this.tribute.menu.scrollHeight;\n            }\n          }\n        },\n        down: function down(e, el) {\n          // navigate down ul\n          if (_this.tribute.isActive && _this.tribute.current.filteredItems) {\n            e.preventDefault();\n            e.stopPropagation();\n            var count = _this.tribute.current.filteredItems.length - 1,\n                selected = _this.tribute.menuSelected;\n\n            if (count > selected) {\n              _this.tribute.menuSelected++;\n\n              _this.setActiveLi();\n            } else if (count === selected) {\n              _this.tribute.menuSelected = 0;\n\n              _this.setActiveLi();\n\n              _this.tribute.menu.scrollTop = 0;\n            }\n          }\n        },\n        \"delete\": function _delete(e, el) {\n          if (_this.tribute.isActive && _this.tribute.current.mentionText.length < 1) {\n            _this.tribute.hideMenu();\n          } else if (_this.tribute.isActive) {\n            _this.tribute.showMenuFor(el);\n          }\n        }\n      };\n    }\n  }, {\n    key: \"setActiveLi\",\n    value: function setActiveLi(index) {\n      var lis = this.tribute.menu.querySelectorAll('li'),\n          length = lis.length >>> 0;\n      if (index) this.tribute.menuSelected = parseInt(index);\n\n      for (var i = 0; i < length; i++) {\n        var li = lis[i];\n\n        if (i === this.tribute.menuSelected) {\n          li.classList.add(this.tribute.current.collection.selectClass);\n          var liClientRect = li.getBoundingClientRect();\n          var menuClientRect = this.tribute.menu.getBoundingClientRect();\n\n          if (liClientRect.bottom > menuClientRect.bottom) {\n            var scrollDistance = liClientRect.bottom - menuClientRect.bottom;\n            this.tribute.menu.scrollTop += scrollDistance;\n          } else if (liClientRect.top < menuClientRect.top) {\n            var _scrollDistance = menuClientRect.top - liClientRect.top;\n\n            this.tribute.menu.scrollTop -= _scrollDistance;\n          }\n        } else {\n          li.classList.remove(this.tribute.current.collection.selectClass);\n        }\n      }\n    }\n  }, {\n    key: \"getFullHeight\",\n    value: function getFullHeight(elem, includeMargin) {\n      var height = elem.getBoundingClientRect().height;\n\n      if (includeMargin) {\n        var style = elem.currentStyle || window.getComputedStyle(elem);\n        return height + parseFloat(style.marginTop) + parseFloat(style.marginBottom);\n      }\n\n      return height;\n    }\n  }], [{\n    key: \"keys\",\n    value: function keys() {\n      return [{\n        key: 9,\n        value: 'TAB'\n      }, {\n        key: 8,\n        value: 'DELETE'\n      }, {\n        key: 13,\n        value: 'ENTER'\n      }, {\n        key: 27,\n        value: 'ESCAPE'\n      }, {\n        key: 32,\n        value: 'SPACE'\n      }, {\n        key: 38,\n        value: 'UP'\n      }, {\n        key: 40,\n        value: 'DOWN'\n      }];\n    }\n  }]);\n\n  return TributeEvents;\n}();\n\nvar _default = TributeEvents;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar TributeMenuEvents =\n/*#__PURE__*/\nfunction () {\n  function TributeMenuEvents(tribute) {\n    _classCallCheck(this, TributeMenuEvents);\n\n    this.tribute = tribute;\n    this.tribute.menuEvents = this;\n    this.menu = this.tribute.menu;\n  }\n\n  _createClass(TributeMenuEvents, [{\n    key: \"bind\",\n    value: function bind(menu) {\n      var _this = this;\n\n      this.menuClickEvent = this.tribute.events.click.bind(null, this);\n      this.menuContainerScrollEvent = this.debounce(function () {\n        if (_this.tribute.isActive) {\n          _this.tribute.showMenuFor(_this.tribute.current.element, false);\n        }\n      }, 300, false);\n      this.windowResizeEvent = this.debounce(function () {\n        if (_this.tribute.isActive) {\n          _this.tribute.range.positionMenuAtCaret(true);\n        }\n      }, 300, false); // fixes IE11 issues with mousedown\n\n      this.tribute.range.getDocument().addEventListener('MSPointerDown', this.menuClickEvent, false);\n      this.tribute.range.getDocument().addEventListener('mousedown', this.menuClickEvent, false);\n      window.addEventListener('resize', this.windowResizeEvent);\n\n      if (this.menuContainer) {\n        this.menuContainer.addEventListener('scroll', this.menuContainerScrollEvent, false);\n      } else {\n        window.addEventListener('scroll', this.menuContainerScrollEvent);\n      }\n    }\n  }, {\n    key: \"unbind\",\n    value: function unbind(menu) {\n      this.tribute.range.getDocument().removeEventListener('mousedown', this.menuClickEvent, false);\n      this.tribute.range.getDocument().removeEventListener('MSPointerDown', this.menuClickEvent, false);\n      window.removeEventListener('resize', this.windowResizeEvent);\n\n      if (this.menuContainer) {\n        this.menuContainer.removeEventListener('scroll', this.menuContainerScrollEvent, false);\n      } else {\n        window.removeEventListener('scroll', this.menuContainerScrollEvent);\n      }\n    }\n  }, {\n    key: \"debounce\",\n    value: function debounce(func, wait, immediate) {\n      var _this2 = this,\n          _arguments = arguments;\n\n      var timeout;\n      return function () {\n        var context = _this2,\n            args = _arguments;\n\n        var later = function later() {\n          timeout = null;\n          if (!immediate) func.apply(context, args);\n        };\n\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) func.apply(context, args);\n      };\n    }\n  }]);\n\n  return TributeMenuEvents;\n}();\n\nvar _default = TributeMenuEvents;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// Thanks to https://github.com/jeff-collins/ment.io\nvar TributeRange =\n/*#__PURE__*/\nfunction () {\n  function TributeRange(tribute) {\n    _classCallCheck(this, TributeRange);\n\n    this.tribute = tribute;\n    this.tribute.range = this;\n  }\n\n  _createClass(TributeRange, [{\n    key: \"getDocument\",\n    value: function getDocument() {\n      var iframe;\n\n      if (this.tribute.current.collection) {\n        iframe = this.tribute.current.collection.iframe;\n      }\n\n      if (!iframe) {\n        return document;\n      }\n\n      return iframe.contentWindow.document;\n    }\n  }, {\n    key: \"positionMenuAtCaret\",\n    value: function positionMenuAtCaret(scrollTo) {\n      var _this = this;\n\n      var context = this.tribute.current,\n          coordinates;\n      var info = this.getTriggerInfo(false, this.tribute.hasTrailingSpace, true, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (typeof info !== 'undefined') {\n        if (!this.tribute.positionMenu) {\n          this.tribute.menu.style.cssText = \"display: block;\";\n          return;\n        }\n\n        if (!this.isContentEditable(context.element)) {\n          coordinates = this.getTextAreaOrInputUnderlinePosition(this.tribute.current.element, info.mentionPosition);\n        } else {\n          coordinates = this.getContentEditableCaretPosition(info.mentionPosition);\n        }\n\n        this.tribute.menu.style.cssText = \"top: \".concat(coordinates.top, \"px;\\n                                     left: \").concat(coordinates.left, \"px;\\n                                     right: \").concat(coordinates.right, \"px;\\n                                     bottom: \").concat(coordinates.bottom, \"px;\\n                                     position: absolute;\\n                                     display: block;\");\n\n        if (coordinates.left === 'auto') {\n          this.tribute.menu.style.left = 'auto';\n        }\n\n        if (coordinates.top === 'auto') {\n          this.tribute.menu.style.top = 'auto';\n        }\n\n        if (scrollTo) this.scrollIntoView();\n        window.setTimeout(function () {\n          var menuDimensions = {\n            width: _this.tribute.menu.offsetWidth,\n            height: _this.tribute.menu.offsetHeight\n          };\n\n          var menuIsOffScreen = _this.isMenuOffScreen(coordinates, menuDimensions);\n\n          var menuIsOffScreenHorizontally = window.innerWidth > menuDimensions.width && (menuIsOffScreen.left || menuIsOffScreen.right);\n          var menuIsOffScreenVertically = window.innerHeight > menuDimensions.height && (menuIsOffScreen.top || menuIsOffScreen.bottom);\n\n          if (menuIsOffScreenHorizontally || menuIsOffScreenVertically) {\n            _this.tribute.menu.style.cssText = 'display: none';\n\n            _this.positionMenuAtCaret(scrollTo);\n          }\n        }, 0);\n      } else {\n        this.tribute.menu.style.cssText = 'display: none';\n      }\n    }\n  }, {\n    key: \"selectElement\",\n    value: function selectElement(targetElement, path, offset) {\n      var range;\n      var elem = targetElement;\n\n      if (path) {\n        for (var i = 0; i < path.length; i++) {\n          elem = elem.childNodes[path[i]];\n\n          if (elem === undefined) {\n            return;\n          }\n\n          while (elem.length < offset) {\n            offset -= elem.length;\n            elem = elem.nextSibling;\n          }\n\n          if (elem.childNodes.length === 0 && !elem.length) {\n            elem = elem.previousSibling;\n          }\n        }\n      }\n\n      var sel = this.getWindowSelection();\n      range = this.getDocument().createRange();\n      range.setStart(elem, offset);\n      range.setEnd(elem, offset);\n      range.collapse(true);\n\n      try {\n        sel.removeAllRanges();\n      } catch (error) {}\n\n      sel.addRange(range);\n      targetElement.focus();\n    }\n  }, {\n    key: \"replaceTriggerText\",\n    value: function replaceTriggerText(text, requireLeadingSpace, hasTrailingSpace, originalEvent, item) {\n      var info = this.getTriggerInfo(true, hasTrailingSpace, requireLeadingSpace, this.tribute.allowSpaces, this.tribute.autocompleteMode);\n\n      if (info !== undefined) {\n        var context = this.tribute.current;\n        var replaceEvent = new CustomEvent('tribute-replaced', {\n          detail: {\n            item: item,\n            instance: context,\n            context: info,\n            event: originalEvent\n          }\n        });\n\n        if (!this.isContentEditable(context.element)) {\n          var myField = this.tribute.current.element;\n          var textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : ' ';\n          text += textSuffix;\n          var startPos = info.mentionPosition;\n          var endPos = info.mentionPosition + info.mentionText.length + textSuffix.length;\n          myField.value = myField.value.substring(0, startPos) + text + myField.value.substring(endPos, myField.value.length);\n          myField.selectionStart = startPos + text.length;\n          myField.selectionEnd = startPos + text.length;\n        } else {\n          // add a space to the end of the pasted text\n          var _textSuffix = typeof this.tribute.replaceTextSuffix == 'string' ? this.tribute.replaceTextSuffix : '\\xA0';\n\n          text += _textSuffix;\n          this.pasteHtml(text, info.mentionPosition, info.mentionPosition + info.mentionText.length + !this.tribute.autocompleteMode);\n        }\n\n        context.element.dispatchEvent(replaceEvent);\n      }\n    }\n  }, {\n    key: \"pasteHtml\",\n    value: function pasteHtml(html, startPos, endPos) {\n      var range, sel;\n      sel = this.getWindowSelection();\n      range = this.getDocument().createRange();\n      range.setStart(sel.anchorNode, startPos);\n      range.setEnd(sel.anchorNode, endPos);\n      range.deleteContents();\n      var el = this.getDocument().createElement('div');\n      el.innerHTML = html;\n      var frag = this.getDocument().createDocumentFragment(),\n          node,\n          lastNode;\n\n      while (node = el.firstChild) {\n        lastNode = frag.appendChild(node);\n      }\n\n      range.insertNode(frag); // Preserve the selection\n\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        sel.removeAllRanges();\n        sel.addRange(range);\n      }\n    }\n  }, {\n    key: \"getWindowSelection\",\n    value: function getWindowSelection() {\n      if (this.tribute.collection.iframe) {\n        return this.tribute.collection.iframe.contentWindow.getSelection();\n      }\n\n      return window.getSelection();\n    }\n  }, {\n    key: \"getNodePositionInParent\",\n    value: function getNodePositionInParent(element) {\n      if (element.parentNode === null) {\n        return 0;\n      }\n\n      for (var i = 0; i < element.parentNode.childNodes.length; i++) {\n        var node = element.parentNode.childNodes[i];\n\n        if (node === element) {\n          return i;\n        }\n      }\n    }\n  }, {\n    key: \"getContentEditableSelectedPath\",\n    value: function getContentEditableSelectedPath(ctx) {\n      var sel = this.getWindowSelection();\n      var selected = sel.anchorNode;\n      var path = [];\n      var offset;\n\n      if (selected != null) {\n        var i;\n        var ce = selected.contentEditable;\n\n        while (selected !== null && ce !== 'true') {\n          i = this.getNodePositionInParent(selected);\n          path.push(i);\n          selected = selected.parentNode;\n\n          if (selected !== null) {\n            ce = selected.contentEditable;\n          }\n        }\n\n        path.reverse(); // getRangeAt may not exist, need alternative\n\n        offset = sel.getRangeAt(0).startOffset;\n        return {\n          selected: selected,\n          path: path,\n          offset: offset\n        };\n      }\n    }\n  }, {\n    key: \"getTextPrecedingCurrentSelection\",\n    value: function getTextPrecedingCurrentSelection() {\n      var context = this.tribute.current,\n          text = '';\n\n      if (!this.isContentEditable(context.element)) {\n        var textComponent = this.tribute.current.element;\n\n        if (textComponent) {\n          var startPos = textComponent.selectionStart;\n\n          if (textComponent.value && startPos >= 0) {\n            text = textComponent.value.substring(0, startPos);\n          }\n        }\n      } else {\n        var selectedElem = this.getWindowSelection().anchorNode;\n\n        if (selectedElem != null) {\n          var workingNodeContent = selectedElem.textContent;\n          var selectStartOffset = this.getWindowSelection().getRangeAt(0).startOffset;\n\n          if (workingNodeContent && selectStartOffset >= 0) {\n            text = workingNodeContent.substring(0, selectStartOffset);\n          }\n        }\n      }\n\n      return text;\n    }\n  }, {\n    key: \"getLastWordInText\",\n    value: function getLastWordInText(text) {\n      text = text.replace(/\\u00A0/g, ' '); // https://stackoverflow.com/questions/29850407/how-do-i-replace-unicode-character-u00a0-with-a-space-in-javascript\n\n      var wordsArray = text.split(/\\s+/);\n      var worldsCount = wordsArray.length - 1;\n      return wordsArray[worldsCount].trim();\n    }\n  }, {\n    key: \"getTriggerInfo\",\n    value: function getTriggerInfo(menuAlreadyActive, hasTrailingSpace, requireLeadingSpace, allowSpaces, isAutocomplete) {\n      var _this2 = this;\n\n      var ctx = this.tribute.current;\n      var selected, path, offset;\n\n      if (!this.isContentEditable(ctx.element)) {\n        selected = this.tribute.current.element;\n      } else {\n        var selectionInfo = this.getContentEditableSelectedPath(ctx);\n\n        if (selectionInfo) {\n          selected = selectionInfo.selected;\n          path = selectionInfo.path;\n          offset = selectionInfo.offset;\n        }\n      }\n\n      var effectiveRange = this.getTextPrecedingCurrentSelection();\n      var lastWordOfEffectiveRange = this.getLastWordInText(effectiveRange);\n\n      if (isAutocomplete) {\n        return {\n          mentionPosition: effectiveRange.length - lastWordOfEffectiveRange.length,\n          mentionText: lastWordOfEffectiveRange,\n          mentionSelectedElement: selected,\n          mentionSelectedPath: path,\n          mentionSelectedOffset: offset\n        };\n      }\n\n      if (effectiveRange !== undefined && effectiveRange !== null) {\n        var mostRecentTriggerCharPos = -1;\n        var triggerChar;\n        this.tribute.collection.forEach(function (config) {\n          var c = config.trigger;\n          var idx = config.requireLeadingSpace ? _this2.lastIndexWithLeadingSpace(effectiveRange, c) : effectiveRange.lastIndexOf(c);\n\n          if (idx > mostRecentTriggerCharPos) {\n            mostRecentTriggerCharPos = idx;\n            triggerChar = c;\n            requireLeadingSpace = config.requireLeadingSpace;\n          }\n        });\n\n        if (mostRecentTriggerCharPos >= 0 && (mostRecentTriggerCharPos === 0 || !requireLeadingSpace || /[\\xA0\\s]/g.test(effectiveRange.substring(mostRecentTriggerCharPos - 1, mostRecentTriggerCharPos)))) {\n          var currentTriggerSnippet = effectiveRange.substring(mostRecentTriggerCharPos + 1, effectiveRange.length);\n          triggerChar = effectiveRange.substring(mostRecentTriggerCharPos, mostRecentTriggerCharPos + 1);\n          var firstSnippetChar = currentTriggerSnippet.substring(0, 1);\n          var leadingSpace = currentTriggerSnippet.length > 0 && (firstSnippetChar === ' ' || firstSnippetChar === '\\xA0');\n\n          if (hasTrailingSpace) {\n            currentTriggerSnippet = currentTriggerSnippet.trim();\n          }\n\n          var regex = allowSpaces ? /[^\\S ]/g : /[\\xA0\\s]/g;\n          this.tribute.hasTrailingSpace = regex.test(currentTriggerSnippet);\n\n          if (!leadingSpace && (menuAlreadyActive || !regex.test(currentTriggerSnippet))) {\n            return {\n              mentionPosition: mostRecentTriggerCharPos,\n              mentionText: currentTriggerSnippet,\n              mentionSelectedElement: selected,\n              mentionSelectedPath: path,\n              mentionSelectedOffset: offset,\n              mentionTriggerChar: triggerChar\n            };\n          }\n        }\n      }\n    }\n  }, {\n    key: \"lastIndexWithLeadingSpace\",\n    value: function lastIndexWithLeadingSpace(str, _char) {\n      var reversedStr = str.split('').reverse().join('');\n      var index = -1;\n\n      for (var cidx = 0, len = str.length; cidx < len; cidx++) {\n        var firstChar = cidx === str.length - 1;\n        var leadingSpace = /\\s/.test(reversedStr[cidx + 1]);\n        var match = _char === reversedStr[cidx];\n\n        if (match && (firstChar || leadingSpace)) {\n          index = str.length - 1 - cidx;\n          break;\n        }\n      }\n\n      return index;\n    }\n  }, {\n    key: \"isContentEditable\",\n    value: function isContentEditable(element) {\n      return element.nodeName !== 'INPUT' && element.nodeName !== 'TEXTAREA';\n    }\n  }, {\n    key: \"isMenuOffScreen\",\n    value: function isMenuOffScreen(coordinates, menuDimensions) {\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var menuTop = typeof coordinates.top === 'number' ? coordinates.top : windowTop + windowHeight - coordinates.bottom - menuDimensions.height;\n      var menuRight = typeof coordinates.right === 'number' ? coordinates.right : coordinates.left + menuDimensions.width;\n      var menuBottom = typeof coordinates.bottom === 'number' ? coordinates.bottom : coordinates.top + menuDimensions.height;\n      var menuLeft = typeof coordinates.left === 'number' ? coordinates.left : windowLeft + windowWidth - coordinates.right - menuDimensions.width;\n      return {\n        top: menuTop < Math.floor(windowTop),\n        right: menuRight > Math.ceil(windowLeft + windowWidth),\n        bottom: menuBottom > Math.ceil(windowTop + windowHeight),\n        left: menuLeft < Math.floor(windowLeft)\n      };\n    }\n  }, {\n    key: \"getMenuDimensions\",\n    value: function getMenuDimensions() {\n      // Width of the menu depends of its contents and position\n      // We must check what its width would be without any obstruction\n      // This way, we can achieve good positioning for flipping the menu\n      var dimensions = {\n        width: null,\n        height: null\n      };\n      this.tribute.menu.style.cssText = \"top: 0px;\\n                                 left: 0px;\\n                                 position: fixed;\\n                                 display: block;\\n                                 visibility; hidden;\";\n      dimensions.width = this.tribute.menu.offsetWidth;\n      dimensions.height = this.tribute.menu.offsetHeight;\n      this.tribute.menu.style.cssText = \"display: none;\";\n      return dimensions;\n    }\n  }, {\n    key: \"getTextAreaOrInputUnderlinePosition\",\n    value: function getTextAreaOrInputUnderlinePosition(element, position, flipped) {\n      var properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing'];\n      var isFirefox = window.mozInnerScreenX !== null;\n      var div = this.getDocument().createElement('div');\n      div.id = 'input-textarea-caret-position-mirror-div';\n      this.getDocument().body.appendChild(div);\n      var style = div.style;\n      var computed = window.getComputedStyle ? getComputedStyle(element) : element.currentStyle;\n      style.whiteSpace = 'pre-wrap';\n\n      if (element.nodeName !== 'INPUT') {\n        style.wordWrap = 'break-word';\n      } // position off-screen\n\n\n      style.position = 'absolute';\n      style.visibility = 'hidden'; // transfer the element's properties to the div\n\n      properties.forEach(function (prop) {\n        style[prop] = computed[prop];\n      });\n\n      if (isFirefox) {\n        style.width = \"\".concat(parseInt(computed.width) - 2, \"px\");\n        if (element.scrollHeight > parseInt(computed.height)) style.overflowY = 'scroll';\n      } else {\n        style.overflow = 'hidden';\n      }\n\n      div.textContent = element.value.substring(0, position);\n\n      if (element.nodeName === 'INPUT') {\n        div.textContent = div.textContent.replace(/\\s/g, ' ');\n      }\n\n      var span = this.getDocument().createElement('span');\n      span.textContent = element.value.substring(position) || '.';\n      div.appendChild(span);\n      var rect = element.getBoundingClientRect();\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var top = 0;\n      var left = 0;\n\n      if (this.menuContainerIsBody) {\n        top = rect.top;\n        left = rect.left;\n      }\n\n      var coordinates = {\n        top: top + windowTop + span.offsetTop + parseInt(computed.borderTopWidth) + parseInt(computed.fontSize) - element.scrollTop,\n        left: left + windowLeft + span.offsetLeft + parseInt(computed.borderLeftWidth)\n      };\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var menuDimensions = this.getMenuDimensions();\n      var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.right) {\n        coordinates.right = windowWidth - coordinates.left;\n        coordinates.left = 'auto';\n      }\n\n      var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n      if (menuIsOffScreen.bottom) {\n        var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n        var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n        coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top - span.offsetTop);\n        coordinates.top = 'auto';\n      }\n\n      menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.left) {\n        coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n        delete coordinates.right;\n      }\n\n      if (menuIsOffScreen.top) {\n        coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n        delete coordinates.bottom;\n      }\n\n      this.getDocument().body.removeChild(div);\n      return coordinates;\n    }\n  }, {\n    key: \"getContentEditableCaretPosition\",\n    value: function getContentEditableCaretPosition(selectedNodePosition) {\n      var markerTextChar = '﻿';\n      var markerEl,\n          markerId = \"sel_\".concat(new Date().getTime(), \"_\").concat(Math.random().toString().substr(2));\n      var range;\n      var sel = this.getWindowSelection();\n      var prevRange = sel.getRangeAt(0);\n      range = this.getDocument().createRange();\n      range.setStart(sel.anchorNode, selectedNodePosition);\n      range.setEnd(sel.anchorNode, selectedNodePosition);\n      range.collapse(false); // Create the marker element containing a single invisible character using DOM methods and insert it\n\n      markerEl = this.getDocument().createElement('span');\n      markerEl.id = markerId;\n      markerEl.appendChild(this.getDocument().createTextNode(markerTextChar));\n      range.insertNode(markerEl);\n      sel.removeAllRanges();\n      sel.addRange(prevRange);\n      var rect = markerEl.getBoundingClientRect();\n      var doc = document.documentElement;\n      var windowLeft = (window.pageXOffset || doc.scrollLeft) - (doc.clientLeft || 0);\n      var windowTop = (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);\n      var left = 0;\n      var top = 0;\n\n      if (this.menuContainerIsBody) {\n        left = rect.left;\n        top = rect.top;\n      } else {\n        left = markerEl.offsetLeft;\n        top = markerEl.offsetTop;\n      }\n\n      var coordinates = {\n        left: left + windowLeft,\n        top: top + markerEl.offsetHeight + windowTop\n      };\n      var windowWidth = window.innerWidth;\n      var windowHeight = window.innerHeight;\n      var menuDimensions = this.getMenuDimensions();\n      var menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.right) {\n        coordinates.left = 'auto';\n        coordinates.right = windowWidth - rect.left - windowLeft;\n      }\n\n      var parentHeight = this.tribute.menuContainer ? this.tribute.menuContainer.offsetHeight : this.getDocument().body.offsetHeight;\n\n      if (menuIsOffScreen.bottom) {\n        var parentRect = this.tribute.menuContainer ? this.tribute.menuContainer.getBoundingClientRect() : this.getDocument().body.getBoundingClientRect();\n        var scrollStillAvailable = parentHeight - (windowHeight - parentRect.top);\n        coordinates.top = 'auto';\n        coordinates.bottom = scrollStillAvailable + (windowHeight - rect.top);\n      }\n\n      menuIsOffScreen = this.isMenuOffScreen(coordinates, menuDimensions);\n\n      if (menuIsOffScreen.left) {\n        coordinates.left = windowWidth > menuDimensions.width ? windowLeft + windowWidth - menuDimensions.width : windowLeft;\n        delete coordinates.right;\n      }\n\n      if (menuIsOffScreen.top) {\n        coordinates.top = windowHeight > menuDimensions.height ? windowTop + windowHeight - menuDimensions.height : windowTop;\n        delete coordinates.bottom;\n      }\n\n      markerEl.parentNode.removeChild(markerEl);\n      return coordinates;\n    }\n  }, {\n    key: \"scrollIntoView\",\n    value: function scrollIntoView(elem) {\n      var reasonableBuffer = 20,\n          clientRect;\n      var maxScrollDisplacement = 100;\n      var e = this.menu;\n      if (typeof e === 'undefined') return;\n\n      while (clientRect === undefined || clientRect.height === 0) {\n        clientRect = e.getBoundingClientRect();\n\n        if (clientRect.height === 0) {\n          e = e.childNodes[0];\n\n          if (e === undefined || !e.getBoundingClientRect) {\n            return;\n          }\n        }\n      }\n\n      var elemTop = clientRect.top;\n      var elemBottom = elemTop + clientRect.height;\n\n      if (elemTop < 0) {\n        window.scrollTo(0, window.pageYOffset + clientRect.top - reasonableBuffer);\n      } else if (elemBottom > window.innerHeight) {\n        var maxY = window.pageYOffset + clientRect.top - reasonableBuffer;\n\n        if (maxY - window.pageYOffset > maxScrollDisplacement) {\n          maxY = window.pageYOffset + maxScrollDisplacement;\n        }\n\n        var targetY = window.pageYOffset - (window.innerHeight - elemBottom);\n\n        if (targetY > maxY) {\n          targetY = maxY;\n        }\n\n        window.scrollTo(0, targetY);\n      }\n    }\n  }, {\n    key: \"menuContainerIsBody\",\n    get: function get() {\n      return this.tribute.menuContainer === document.body || !this.tribute.menuContainer;\n    }\n  }]);\n\n  return TributeRange;\n}();\n\nvar _default = TributeRange;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// Thanks to https://github.com/mattyork/fuzzy\nvar TributeSearch =\n/*#__PURE__*/\nfunction () {\n  function TributeSearch(tribute) {\n    _classCallCheck(this, TributeSearch);\n\n    this.tribute = tribute;\n    this.tribute.search = this;\n  }\n\n  _createClass(TributeSearch, [{\n    key: \"simpleFilter\",\n    value: function simpleFilter(pattern, array) {\n      var _this = this;\n\n      return array.filter(function (string) {\n        return _this.test(pattern, string);\n      });\n    }\n  }, {\n    key: \"test\",\n    value: function test(pattern, string) {\n      return this.match(pattern, string) !== null;\n    }\n  }, {\n    key: \"match\",\n    value: function match(pattern, string, opts) {\n      opts = opts || {};\n      var patternIdx = 0,\n          result = [],\n          len = string.length,\n          totalScore = 0,\n          currScore = 0,\n          pre = opts.pre || '',\n          post = opts.post || '',\n          compareString = opts.caseSensitive && string || string.toLowerCase(),\n          ch,\n          compareChar;\n\n      if (opts.skip) {\n        return {\n          rendered: string,\n          score: 0\n        };\n      }\n\n      pattern = opts.caseSensitive && pattern || pattern.toLowerCase();\n      var patternCache = this.traverse(compareString, pattern, 0, 0, []);\n\n      if (!patternCache) {\n        return null;\n      }\n\n      return {\n        rendered: this.render(string, patternCache.cache, pre, post),\n        score: patternCache.score\n      };\n    }\n  }, {\n    key: \"traverse\",\n    value: function traverse(string, pattern, stringIndex, patternIndex, patternCache) {\n      // if the pattern search at end\n      if (pattern.length === patternIndex) {\n        // calculate score and copy the cache containing the indices where it's found\n        return {\n          score: this.calculateScore(patternCache),\n          cache: patternCache.slice()\n        };\n      } // if string at end or remaining pattern > remaining string\n\n\n      if (string.length === stringIndex || pattern.length - patternIndex > string.length - stringIndex) {\n        return undefined;\n      }\n\n      var c = pattern[patternIndex];\n      var index = string.indexOf(c, stringIndex);\n      var best, temp;\n\n      while (index > -1) {\n        patternCache.push(index);\n        temp = this.traverse(string, pattern, index + 1, patternIndex + 1, patternCache);\n        patternCache.pop(); // if downstream traversal failed, return best answer so far\n\n        if (!temp) {\n          return best;\n        }\n\n        if (!best || best.score < temp.score) {\n          best = temp;\n        }\n\n        index = string.indexOf(c, index + 1);\n      }\n\n      return best;\n    }\n  }, {\n    key: \"calculateScore\",\n    value: function calculateScore(patternCache) {\n      var score = 0;\n      var temp = 1;\n      patternCache.forEach(function (index, i) {\n        if (i > 0) {\n          if (patternCache[i - 1] + 1 === index) {\n            temp += temp + 1;\n          } else {\n            temp = 1;\n          }\n        }\n\n        score += temp;\n      });\n      return score;\n    }\n  }, {\n    key: \"render\",\n    value: function render(string, indices, pre, post) {\n      var rendered = string.substring(0, indices[0]);\n      indices.forEach(function (index, i) {\n        rendered += pre + string[index] + post + string.substring(index + 1, indices[i + 1] ? indices[i + 1] : string.length);\n      });\n      return rendered;\n    }\n  }, {\n    key: \"filter\",\n    value: function filter(pattern, arr, opts) {\n      var _this2 = this;\n\n      opts = opts || {};\n      return arr.reduce(function (prev, element, idx, arr) {\n        var str = element;\n\n        if (opts.extract) {\n          str = opts.extract(element);\n\n          if (!str) {\n            // take care of undefineds / nulls / etc.\n            str = '';\n          }\n        }\n\n        var rendered = _this2.match(pattern, str, opts);\n\n        if (rendered != null) {\n          prev[prev.length] = {\n            string: rendered.rendered,\n            score: rendered.score,\n            index: idx,\n            original: element\n          };\n        }\n\n        return prev;\n      }, []).sort(function (a, b) {\n        var compare = b.score - a.score;\n        if (compare) return compare;\n        return a.index - b.index;\n      });\n    }\n  }]);\n\n  return TributeSearch;\n}();\n\nvar _default = TributeSearch;\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _Tribute = _interopRequireDefault(require(\"./Tribute\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n* Tribute.js\n* Native ES6 JavaScript @mention Plugin\n**/\nvar _default = _Tribute[\"default\"];\nexports[\"default\"] = _default;\nmodule.exports = exports.default;\n\n},{\"./Tribute\":1}],7:[function(require,module,exports){\n\"use strict\";\n\nif (!Array.prototype.find) {\n  Array.prototype.find = function (predicate) {\n    if (this === null) {\n      throw new TypeError('Array.prototype.find called on null or undefined');\n    }\n\n    if (typeof predicate !== 'function') {\n      throw new TypeError('predicate must be a function');\n    }\n\n    var list = Object(this);\n    var length = list.length >>> 0;\n    var thisArg = arguments[1];\n    var value;\n\n    for (var i = 0; i < length; i++) {\n      value = list[i];\n\n      if (predicate.call(thisArg, value, i, list)) {\n        return value;\n      }\n    }\n\n    return undefined;\n  };\n}\n\nif (window && typeof window.CustomEvent !== \"function\") {\n  var CustomEvent = function CustomEvent(event, params) {\n    params = params || {\n      bubbles: false,\n      cancelable: false,\n      detail: undefined\n    };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  };\n\n  if (typeof window.Event !== 'undefined') {\n    CustomEvent.prototype = window.Event.prototype;\n  }\n\n  window.CustomEvent = CustomEvent;\n}\n\n},{}]},{},[6])(6)\n});\n","/* eslint-disable require-jsdoc, no-console */\n\nimport areachart from \"src/decidim/vizzs/areachart\"\n\n$(() => {\n\n  const metricsData = {};\n  const metricsContainer = {};\n  const metricsParams = {};\n\n  const query = () => {\n    let metricsQuery = `metrics(names: ${metricsParams.names}, space_type: \"${metricsParams.spaceType}\", space_id: ${metricsParams.spaceId}) { name history { key value } }`;\n    return {query: `{ ${metricsQuery} }`};\n  }\n\n  const parameterize = (metrics) => {\n    metricsParams.names = JSON.stringify(metrics || []);\n    metricsParams.spaceType = $(\"#metrics #metrics-space_type\").val() || null;\n    metricsParams.spaceId = $(\"#metrics #metrics-space_id\").val() || null;\n  }\n\n  const fetch = (metrics) => $.post(\"/api\", query(metrics));\n\n  const downloadMetricData = (event) => {\n    event.preventDefault();\n    let metricName = $(event.target).parents(\".metric-downloader\").data(\"metric\");\n    let csvContent = \"data:text/csv;charset=utf-8,\";\n\n    csvContent += \"key,value\\r\\n\";\n    metricsData[metricName].forEach((metricData)  => {\n      csvContent += `${metricData.key},${metricData.value}\\r\\n`;\n    });\n\n    // Required for FF\n    let link = document.createElement(\"a\");\n    link.setAttribute(\"href\", encodeURI(csvContent));\n    link.setAttribute(\"download\", `${metricName}_metric_data.csv`);\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n\n  $(\".metric-chart:visible\").each((_index, container) => {\n    metricsContainer[$(container).data(\"metric\")] = container;\n  });\n  $(\".metric-downloader\").each((_index, container) => {\n    container.onclick = downloadMetricData;\n  });\n\n  if (!$.isEmptyObject(metricsContainer)) {\n    parameterize(Object.keys(metricsContainer))\n    fetch().then((response) => {\n      if (response.data) {\n        $.each(response.data.metrics, (_index, metricData) => {\n          let container = metricsContainer[metricData.name];\n          if (metricData.history.length === 0) {\n            $(container).remove();\n            return;\n          }\n          let info = $(container).data(\"info\");\n          metricsData[metricData.name] = $.extend(true, [], metricData.history);\n          areachart({\n            container: `#${container.id}`,\n            data: metricData.history,\n            title: info.title,\n            objectName: info.object,\n            ...$(container).data()\n          });\n        });\n      } else if (response.errors) {\n        console.log(\"Something wrong happened when fetching metrics:\");\n        $.each(response.errors, (_index, error) => {\n          console.log(error.message);\n        });\n        $(\"#metrics\").remove();\n      }\n    }).fail((err) => {\n      console.log(`Something wrong happened when fetching metrics: ${err.statusText}`);\n      $(\"#metrics\").remove();\n    });\n  }\n});\n","/* eslint-disable require-jsdoc, id-length, no-undefined, no-unused-vars, multiline-ternary, no-ternary, no-nested-ternary, no-invalid-this */\n/* eslint prefer-reflect: [\"error\", { \"exceptions\": [\"call\"] }] */\n/* eslint dot-location: [\"error\", \"property\"] */\n/* eslint no-unused-vars: 0 */\n\nimport { select, mouse } from \"d3-selection\";\nimport { min, max, extent, ascending, bisector } from \"d3-array\";\nimport { scaleTime, scaleLinear } from \"d3-scale\";\nimport { axisLeft, axisBottom } from \"d3-axis\";\nimport { timeMonth } from \"d3-time\";\nimport { timeFormat, isoParse } from \"d3-time-format\";\nimport { area, line } from \"d3-shape\";\n\n// lib\nexport default function areachart(opts = {}) {\n\n  const parseData = (data) => {\n    // format the data\n    data.forEach((d) => {\n      d.key = isoParse(d.key)\n      d.value = Number(d.value)\n    });\n\n    // order by date\n    return data.sort((x, y) => ascending(x.key, y.key))\n  }\n\n  // OPTIONAL: Helper function to accumulates all data values\n  const aggregate = (agg) => agg.map((item, index, array) => {\n    if (index > 0) {\n      item.value += array[index - 1].value\n    }\n    return item\n  })\n\n  // parse opts\n  let data = parseData(opts.data)\n  let title = opts.title\n  let objectName = opts.objectName || \"\"\n  let container = select(opts.container)\n  let showAxis = opts.axis || false\n  let ratio = (opts.ratio || \"\").split(\":\").reduce((a, b) => a / b) || (4 / 3)\n  let showTooltip = Object.is(opts.tip, undefined) ? true : opts.tip\n  let cumulative = opts.agg || false\n\n  if (cumulative) {\n    data = aggregate(data)\n  }\n\n  // set the dimensions and margins of the graph\n  let margin = {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  }\n\n  let width = Number(container.node().getBoundingClientRect().width) - margin.left - margin.right\n  let height = (width / ratio) - margin.top - margin.bottom\n  let titlePadding = min([width / 10, 32])\n\n  // set the ranges\n  let x = scaleTime().range([0, width]);\n  let y = scaleLinear().range([height, 0]);\n\n  // define the area\n  let _area = area()\n    .x((d) => x(d.key))\n    .y0(height)\n    .y1((d) => y(d.value));\n\n  // define the line\n  let valueline = line()\n    .x((d) => x(d.key))\n    .y((d) => y(d.value));\n\n  let svg = container.append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", `translate(${margin.left},${margin.top})`);\n\n  // scale the range of the data\n  x.domain(extent(data, (d) => d.key));\n  y.domain([0, max(data, (d) => d.value)]).nice();\n\n  // add the valueline path.\n  let topLine = svg.append(\"path\")\n    .data([data])\n    .attr(\"class\", \"line\")\n    .attr(\"d\", valueline)\n\n  // add the area\n  svg.append(\"path\")\n    .data([data])\n    .attr(\"class\", \"area\")\n    .attr(\"d\", _area)\n\n  if (showTooltip) {\n    // tooltip\n    let circle = svg.append(\"circle\")\n      .attr(\"class\", \"circle\")\n      .attr(\"r\", 6)\n      .style(\"display\", \"none\")\n\n    let tooltip = select(\"body\").append(\"div\")\n      .attr(\"id\", `${container.node().id}-tooltip`)\n      .attr(\"class\", \"chart-tooltip\")\n      .style(\"opacity\", 0)\n\n    svg\n      .on(\"mouseover\", () => {\n        circle.style(\"display\", null)\n        tooltip.style(\"opacity\", 1)\n      })\n      .on(\"mouseout\", () => {\n        circle.style(\"display\", \"none\")\n        tooltip.style(\"opacity\", 0)\n      })\n      .on(\"mousemove\", function() {\n        let x0 = x.invert(mouse(this)[0])\n        let i = bisector((d) => d.key).left(data, x0, 1)\n        let d0 = data[i - 1]\n        let d1 = data[i]\n        let d = (x0 - d0.key > d1.key - x0) ? d1 : d0\n\n        // svg position relative to document\n        let coords = {\n          x: window.pageXOffset + container.node().getBoundingClientRect().left,\n          y: window.pageYOffset + container.node().getBoundingClientRect().top\n        }\n\n        let tooltipContent = `\n          <div class=\"tooltip-content\">\n            ${timeFormat(\"%e %B %Y\")(d.key)}<br />\n            ${d.value.toLocaleString()} ${objectName}\n          </div>`\n\n        circle.attr(\"transform\", `translate(${x(d.key)},${y(d.value)})`)\n        tooltip.html(tooltipContent)\n          .style(\"left\", `${coords.x + x(d.key)}px`)\n          .style(\"top\", `${coords.y + y(d.value)}px`)\n      })\n  }\n\n  if (showAxis) {\n    let xAxis = axisBottom(x)\n      .ticks(timeMonth)\n      .tickFormat(timeFormat(\"%b %y\"))\n      .tickSize(-height)\n    let yAxis = axisLeft(y)\n      .ticks(5)\n      .tickSize(8)\n\n    let _xAxis = (g) => {\n      g.call(xAxis)\n      g.select(\".domain\").remove()\n      g.selectAll(\".tick line\").attr(\"class\", \"dashed\")\n      g.selectAll(\".tick text\").attr(\"y\", 6)\n    }\n    let _yAxis = (g) => {\n      g.call(yAxis)\n      g.select(\".domain\").remove()\n      g.select(\".tick:first-of-type\").remove()\n      g.selectAll(\".tick text\").attr(\"text-anchor\", \"start\").attr(\"x\", 6)\n    }\n\n    // custom X-Axis\n    svg.append(\"g\")\n      .attr(\"transform\", `translate(0,${height})`)\n      .call(_xAxis);\n\n    // custom Y-Axis\n    svg.append(\"g\")\n      .call(_yAxis)\n\n    // last circle (current value)\n    let g = svg.append(\"g\")\n      .data([data])\n      .attr(\"transform\", (d) => `translate(${x(d[d.length - 1].key)},${y(d[d.length - 1].value)})`)\n\n    g.append(\"circle\")\n      .attr(\"class\", \"circle\")\n      .attr(\"r\", 8)\n\n    g.append(\"text\")\n      .attr(\"class\", \"sum\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"dx\", -8 * 2)\n      .text((d) => d[d.length - 1].value.toLocaleString())\n\n  } else {\n    // add the title group\n    let g = svg.append(\"g\")\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"transform\", `translate(${titlePadding},${titlePadding})`)\n\n    let titleLines = 0\n\n    if (title.length) {\n      g.append(\"text\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"class\", \"title\")\n        .text(title)\n        .call(function(fulltext, wrapwidth, start = 0) {\n          fulltext.each(function() {\n            let text = select(this)\n            let word = \"\"\n            let words = text.text().split(/\\s+/).reverse()\n            let _line = []\n            let lineNumber = 0\n            let lineHeight = 1.1\n            let _x = text.attr(\"x\")\n            let _y = text.attr(\"y\")\n            let dy = 0\n            let tspan = text.text(null)\n              .append(\"tspan\")\n              .attr(\"x\", _x)\n              .attr(\"y\", _y)\n              .attr(\"dy\", `${dy}em`)\n\n            /* eslint-disable no-cond-assign, no-plusplus */\n            while (word = words.pop()) {\n              _line.push(word);\n              tspan.text(_line.join(\" \"));\n              if (tspan.node().getComputedTextLength() > wrapwidth) {\n                _line.pop()\n                tspan.text(_line.join(\" \"))\n                _line = [word]\n                tspan = text.append(\"tspan\")\n                  .attr(\"x\", _x)\n                  .attr(\"y\", _y)\n                  .attr(\"dy\", `${(++lineNumber * lineHeight) + dy}em`)\n                  .text(word);\n              }\n            }\n\n            titleLines = lineNumber * lineHeight\n          });\n        }, width - (titlePadding * 2))\n    }\n\n    let fontSize = parseFloat(getComputedStyle(g.node()).fontSize);\n\n    g.append(\"text\")\n      .attr(\"x\", 0)\n      .attr(\"dy\", title.length ? (titlePadding * 2) + (titleLines * fontSize) : (titlePadding * 1.25))\n      .attr(\"class\", \"sum\")\n      .text(data[data.length - 1].value.toLocaleString())\n  }\n}\n"],"names":["$","document","on","event","preventDefault","link","currentTarget","$modal","concat","dataset","open","html","ajax","type","url","openUrl","success","$html","foundation","error","request","status","_error","_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","_defineProperties","target","props","descriptor","input","hint","prim","toPrimitive","undefined","res","String","Number","_toPrimitive","AutoComplete","el","_this","options","arguments","instance","Constructor","_classCallCheck","this","element","stickySelectedSpan","clearStickySelectionSpan","stickyHiddenInput","promptDiv","fn","_src","thresholdTemp","threshold","assign","placeholder","mode","searchPrompt","searchPromptText","selected","maxResults","dataMatchKeys","dataSource","dataFilter","delay","modifyResult","autocomplete","AutoCompleteJS","selector","diacritics","placeHolder","debounce","data","src","_callee","query","fetchResults","_context","t0","self","args","apply","err","_x","filter","list","results","item","idx","arr","findIndex","val","resultsList","resultItem","events","blur","style","display","acWrapper","closest","ac","stopPropagation","addEventListener","createPromptDiv","createStickySelect","createMultiSelect","protoProps","staticProps","setInput","detail","selection","handleStickyEvents","handleMultiEvents","addMultiSelectItem","addStickySelectItem","removeStickySelection","includes","test","hiddenInput","createElement","prepend","innerHTML","_this2","chosen","classList","add","clearSelection","setAttribute","evt","querySelector","remove","parentElement","appendChild","multiSelectWrapper","inputContainer","insertBefore","createHiddenInput","_this3","focus","className","_this4","DataPicker","pickers","modal","_createModalContainer","appendTo","current","each","_index","picker","activate","$picker","_setCurrentPicker","multiple","_index2","div","hasClass","isMultiPicker","_targetFromEvent","_openPicker","tagName","_removeValue","parentNode","autosort","_sort","toggleClass","attr","map","$link","text","get","savedData","_choose","interactive","modify","_load","$target","find","resp","modalContent","_handleLinks","_handleCheckboxes","content","_this5","click","chooseUrl","_this6","checkbox","$checkbox","checked","_targetFromValue","change","close","opts","dataText","_escape","choosenOption","$input","trigger","_removeErrors","_close","children","sort","item1","item2","detach","_this7","fadeoutTime","navigator","webdriver","fadeOut","_this7$current$target","parent","removeClass","str","replace","_char","charCodeAt","formDatePicker","node","language","initialDate","pickTime","languageProps","fdatepicker","dates","format","disableDblClickSelection","leftArrow","rightArrow","delayed","context","func","wait","timeout","_len","Array","_key","clearTimeout","setTimeout","Reflect","CheckBoxesTree","checkboxesTree","querySelectorAll","globalChecks","global","checkGlobalCheck","checkTheCheckBoxes","checkTheCheckParent","checkboxes","index","theForm","elem","disabled","targetChecks","checkStatus","indeterminate","checksContext","totalInputs","checkedInputs","indeterminateInputs","from","subfilters","nextElementSibling","contains","checkBoxContext","parents","parentCheck","totalCheckSiblings","checkedSiblings","indeterminateSiblings","sibling","FormFilterComponent","$form","id","_getUID","mounted","changeEvents","theCheckBoxesTree","theDataPicker","window","_updateInitialState","_onFormChange","bind","_onFormSubmit","_onPopState","Decidim","PopStateHandler","popStateSubmiter","off","unregisterCallback","queue","contentContainer","currentFormRequest","abort","originalEvent","addClass","setContainerForm","registerCallback","currentState","_this$_currentStateAn2","_slicedToArray","_currentStateAndPath","initialPath","initialState","_path","replaceState","withHost","state","path","location","pathname","search","hash","origin","regexpResult","decodeURIComponent","_getLocation","match","reduce","acc","result","_result$match2","array","order","clear","_clearForm","filterParams","_parseLocationFilterValues","currentOrder","_parseLocationOrderValue","fieldName","isArray","updateChecked","pickerState","load","Rails","fire","ev","eventDetail","_this$_currentStateAn6","newPath","newState","pushState","_saveFilters","formAction","params","serialize","indexOf","save","Date","getUTCMilliseconds","Math","floor","random","pathWithQueryStrings","sessionStorage","pathName","setItem","JSON","stringify","jQuery","lb","days","daysShort","daysMin","months","monthsShort","today","$hashtagContainer","nodatafound","noMatchTemplate","cursor","__quill","getText","tribute","Tribute","cb","post","response","hashtags","fail","always","$parent","removeAttr","remoteSearch","positionMenu","menuContainer","fillAttr","lookup","selectTemplate","range","isContentEditable","quill","insertText","original","Quill","sources","API","position","getLength","setSelection","menuItemTemplate","$qlEditor","attach","isActive","$mentionContainer","callback","users","allowSpaces","menuItemLimit","selectClass","nickname","svg","__typename","iconsPath","config","membersCount","avatarUrl","setupEvents","$element","menu","body","getDocument","sessionTimeOutEnabled","$timeoutModal","timeoutInSeconds","parseInt","secondsUntilTimeoutPath","heartbeatPath","interval","preventTimeOutSeconds","endsAt","dayjs","lastAction","$continueSessionButton","lastActivityCheck","preventTimeOutUntil","css","setTimer","secondsUntilExpiration","heartbeat","contentType","exitInterval","setInterval","seconds","timeSinceLastActivityCheckInSeconds","round","headers","secondsUntilSessionExpires","seconds_remaining","mousemove","scroll","keypress","ajaxComplete","_event","_xhr","settings","clearInterval","enableSessionTimeout","disableSessionTimeout","UTCDate","UTC","Datepicker","that","autoShow","closeButton","split","isRTL","rtl","DPGlobal","parseFormat","formatText","isInline","isInput","is","component","hasInput","onRender","linkField","linkFormat","minuteStep","pickerPosition","faCSSprefix","closeIcon","minView","convertViewMode","maxView","modes","startViewMode","startView","viewMode","forceParse","template","proxy","mousedown","show","hide","siblings","append","autoclose","keyboardNavigation","todayBtn","todayHighlight","calendarWeeks","weekStart","weekEnd","startDate","Infinity","endDate","daysOfWeekDisabled","datesDisabled","setStartDate","setEndDate","setDaysOfWeekDisabled","setDatesDisabled","date","viewDate","parseDate","setValue","fillDow","fillMonths","update","showMode","_attachEvents","_events","_detachEvents","keyup","keydown","dblclick","height","outerHeight","place","datepicker","getDate","getUTCDate","getTime","getTimezoneOffset","setDate","setUTCDate","formatted","getFormattedDate","formatDate","updateNavArrows","valueOf","zIndexes","zIndex","b","textbox","offset","width","outerWidth","fullOffsetTop","top","offsetLeft","left","canShowTop","scrollTop","canShowBottom","fromArgs","currentVal","fill","dowCnt","cell","year","getUTCFullYear","month","getUTCMonth","dayMonth","hours","getUTCHours","minutes","getUTCMinutes","startYear","startMonth","endYear","endMonth","currentDate","titleFormat","en","toggle","prevMonth","day","getDaysInMonth","getUTCDay","nextMonth","clsName","getDay","getFullYear","calWeek","getMonth","inArray","empty","join","actual","currentYear","end","eq","yearCont","hour","visibility","nodeName","toLowerCase","dir","navStep","moveHour","moveDate","moveMonth","moveYear","getHours","getMinutes","getSeconds","_setDate","getUTCSeconds","setUTCMonth","setUTCFullYear","substr","oldViewMode","which","new_date","setUTCHours","new_month","mag","abs","dateWithinRange","keyCode","newDate","newViewDate","dateChanged","ctrlKey","shiftKey","newViewMode","max","min","changeViewDate","option","shift","_data","$this","extend","defaults","_toConsumableArray","navFnc","isLeapYear","validParts","nonpunctuation","separators","parts","part_re","part","exec","Datetimepicker","filtered","parsed","setters_order","setters_map","hh","ii","setUTCMinutes","ss","setUTCSeconds","yyyy","yy","m","_d","M","MM","mm","dd","cnt","toString","substring","seps","headTemplate","contTemplate","footTemplate","code","exports","require","module","_TributeEvents","_interopRequireDefault","_TributeMenuEvents","_TributeRange","_TributeSearch","obj","__esModule","_arrayWithHoles","_arr","_n","_e","_s","_i","_iterableToArrayLimit","_nonIterableRest","_default","_ref","_ref$values","_ref$iframe","iframe","_ref$selectClass","_ref$trigger","_ref$autocompleteMode","autocompleteMode","_ref$selectTemplate","_ref$menuItemTemplate","_ref$lookup","_ref$fillAttr","_ref$collection","collection","_ref$menuContainer","_ref$noMatchTemplate","_ref$requireLeadingSp","requireLeadingSpace","_ref$allowSpaces","_ref$replaceTextSuffi","replaceTextSuffix","_ref$positionMenu","_ref$spaceSelectsMatc","spaceSelectsMatch","_ref$searchOpts","searchOpts","_ref$menuItemLimit","menuSelected","inputEvent","hasTrailingSpace","defaultSelectTemplate","defaultMenuItemTemplate","console","warn","matchItem","string","NodeList","HTMLCollection","_attach","hasAttribute","ensureEditable","inputTypes","contentEditable","wrapper","ul","scrollTo","mentionText","currentMentionTextSnapshot","createMenu","tributeMenu","menuEvents","processValues","items","pre","skip","extract","filteredItems","positionMenuAtCaret","noMatchEvent","CustomEvent","dispatchEvent","hideMenu","fragment","createDocumentFragment","li","_this2$_findLiTarget2","_findLiTarget","movementY","setActiveLi","getAttribute","collectionIndex","activeElement","placeCaretAtEnd","externalTrigger","insertTextAtCursor","insertAtCaret","showMenuFor","getSelection","createRange","selectNodeContents","collapse","sel","removeAllRanges","addRange","createTextRange","textRange","moveToElementText","select","getRangeAt","deleteContents","textNode","createTextNode","insertNode","textarea","scrollPos","caretPos","selectionStart","front","back","selectionEnd","cssText","replaceText","replaceTriggerText","newValues","_append","_detach","unbind","removeAttribute","TributeEvents","boundKeydown","boundKeyup","boundInput","removeEventListener","shouldDeactivate","commandEvent","callbacks","getElementsByClassName","selectItemAtIndex","updateSelection","triggerChar","getKeyCode","triggers","eventKeyPressed","getTriggerInfo","mentionTriggerChar","selectedPath","mentionSelectedPath","selectedOffset","mentionSelectedOffset","collectionItem","enter","escape","tab","space","up","count","scrollHeight","down","lis","liClientRect","getBoundingClientRect","menuClientRect","bottom","scrollDistance","_scrollDistance","includeMargin","currentStyle","getComputedStyle","parseFloat","marginTop","marginBottom","TributeMenuEvents","menuClickEvent","menuContainerScrollEvent","windowResizeEvent","immediate","_arguments","callNow","TributeRange","contentWindow","coordinates","getContentEditableCaretPosition","mentionPosition","getTextAreaOrInputUnderlinePosition","right","scrollIntoView","menuDimensions","offsetWidth","offsetHeight","menuIsOffScreen","isMenuOffScreen","menuIsOffScreenHorizontally","innerWidth","menuIsOffScreenVertically","innerHeight","targetElement","childNodes","nextSibling","previousSibling","getWindowSelection","setStart","setEnd","replaceEvent","pasteHtml","myField","textSuffix","startPos","endPos","anchorNode","lastNode","frag","firstChild","cloneRange","setStartAfter","ctx","ce","getNodePositionInParent","startOffset","selectedElem","workingNodeContent","textContent","selectStartOffset","textComponent","wordsArray","trim","menuAlreadyActive","isAutocomplete","selectionInfo","getContentEditableSelectedPath","effectiveRange","getTextPrecedingCurrentSelection","lastWordOfEffectiveRange","getLastWordInText","mentionSelectedElement","mostRecentTriggerCharPos","lastIndexWithLeadingSpace","lastIndexOf","currentTriggerSnippet","firstSnippetChar","leadingSpace","regex","reversedStr","cidx","len","firstChar","windowWidth","windowHeight","doc","documentElement","windowLeft","pageXOffset","scrollLeft","clientLeft","windowTop","pageYOffset","clientTop","menuTop","menuRight","menuBottom","menuLeft","ceil","dimensions","flipped","isFirefox","mozInnerScreenX","computed","whiteSpace","wordWrap","prop","overflowY","overflow","span","rect","menuContainerIsBody","offsetTop","borderTopWidth","fontSize","borderLeftWidth","getMenuDimensions","parentHeight","scrollStillAvailable","removeChild","selectedNodePosition","markerEl","markerId","prevRange","clientRect","elemTop","elemBottom","maxY","targetY","TributeSearch","pattern","compareString","caseSensitive","rendered","score","patternCache","traverse","render","cache","stringIndex","patternIndex","calculateScore","best","temp","indices","compare","predicate","thisArg","bubbles","cancelable","createEvent","initCustomEvent","Event","metricsQuery","metrics","metricsData","metricsContainer","metricsParams","downloadMetricData","metricName","csvContent","metricData","encodeURI","container","onclick","isEmptyObject","names","spaceType","spaceId","history","isoParse","x","ascending","parseData","title","objectName","showAxis","axis","ratio","showTooltip","tip","agg","margin","titlePadding","scaleTime","scaleLinear","_area","area","y0","y1","valueline","line","domain","extent","nice","circle","tooltip","x0","invert","mouse","bisector","d0","d1","coords","tooltipContent","timeFormat","toLocaleString","xAxis","axisBottom","ticks","timeMonth","tickFormat","tickSize","yAxis","axisLeft","selectAll","_g","titleLines","fulltext","wrapwidth","word","words","_line","lineNumber","_y","tspan","getComputedTextLength","areachart","_objectSpread","object","errors","log","message","statusText"],"sourceRoot":""}