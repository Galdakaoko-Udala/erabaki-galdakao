{"version":3,"file":"js/decidim_decidim_awesome_map-df0bb1c1649e27584b16.js","mappings":"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","sources":["webpack://app/webpack/runtime/chunk loaded","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/vendor/leaflet-tilelayer-here.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/map/svg-icon.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-core-0.27.5/app/packs/src/decidim/map/icon.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/controls_ui.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/controllers/controller.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/api/api_fetcher.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/api/fetcher.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/api/proposals_fetcher.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/controllers/proposals_controller.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/api/meetings_fetcher.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/controllers/meetings_controller.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/awesome_map.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/decidim/decidim_awesome/awesome_map/load_map.js","webpack://app/../.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-decidim_awesome-0.10.2/app/packs/src/vendor/jquery.truncate.js","webpack://app/webpack/bootstrap","webpack://app/webpack/runtime/hasOwnProperty shorthand","webpack://app/webpack/runtime/jsonp chunk loading","webpack://app/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","/* eslint-disable */\n\n// 🍂class TileLayer.HERE\n// Tile layer for HERE maps tiles.\nL.TileLayer.HERE = L.TileLayer.extend({\n\n  options: {\n    subdomains: '1234',\n    minZoom: 2,\n    maxZoom: 18,\n\n    // 🍂option scheme: String = 'normal.day'\n    // The \"map scheme\", as documented in the HERE API.\n    scheme: 'normal.day',\n\n    // 🍂option resource: String = 'maptile'\n    // The \"map resource\", as documented in the HERE API.\n    resource: 'maptile',\n\n    // 🍂option mapId: String = 'newest'\n    // Version of the map tiles to be used, or a hash of an unique map\n    mapId: 'newest',\n\n    // 🍂option format: String = 'png8'\n    // Image format to be used (`png8`, `png`, or `jpg`)\n    format: 'png8',\n\n    // 🍂option appId: String = ''\n    // Required option. The `app_id` provided as part of the HERE credentials\n    appId: '',\n\n    // 🍂option appCode: String = ''\n    // Required option. The `app_code` provided as part of the HERE credentials\n    appCode: '',\n\n    // 🍂option useCIT: boolean = false\n    // Whether to use the CIT when loading the here-maptiles\n    useCIT: false,\n\n    // 🍂option useHTTPS: boolean = true\n    // Whether to use HTTPS when loading the here-maptiles\n    useHTTPS: true,\n\n    // 🍂option language: String = ''\n    // The language of the descriptions on the maps that are loaded\n    language: '',\n\n    // 🍂option language: String = ''\n    // The second language of the descriptions on the maps that are loaded\n    language2: '',\n  },\n\n\n  initialize: function initialize(options) {\n    options = L.setOptions(this, options);\n\n    // Decide if this scheme uses the aerial servers or the basemap servers\n    var schemeStart = options.scheme.split('.')[0];\n    options.tileResolution = 256;\n\n    // {Base URL}{Path}/{resource (tile type)}/{map id}/{scheme}/{zoom}/{column}/{row}/{size}/{format}\n    // ?apiKey={YOUR_API_KEY}\n    // &{param}={value}\n\n    var params = [\n      'apiKey=' + encodeURIComponent(options.apiKey)\n    ];\n    // Fallback to old app_id,app_code if no apiKey passed\n    if(!options.apiKey) {\n      params = [\n        'app_id=' + encodeURIComponent(options.appId),\n        'app_code=' + encodeURIComponent(options.appCode),\n      ];\n    }\n    if(options.language) {\n      params.push('lg=' + encodeURIComponent(options.language));\n    }\n    if(options.language2) {\n      params.push('lg2=' + encodeURIComponent(options.language2));\n    }\n    var urlQuery = '?' + params.join('&');\n\n    var path = '/maptile/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}' + urlQuery;\n    var attributionPath = '/maptile/2.1/copyright/{mapId}?apiKey={apiKey}';\n\n    var baseUrl = 'maps.ls.hereapi.com';\n\n    // Old style with apiId/apiCode for compatibility\n    if(!options.apiKey) {\n      // make sure the CIT-url can be used\n      baseUrl = 'maps' + (options.useCIT ? '.cit' : '') + '.api.here.com';\n      attributionPath = '/maptile/2.1/copyright/{mapId}?app_id={appId}&app_code={appCode}';\n    }\n\n    var tileServer = 'base.' + baseUrl;\n    if (schemeStart == 'satellite' || schemeStart == 'terrain' || schemeStart == 'hybrid') {\n      tileServer = 'aerial.' + baseUrl;\n    }\n    if (options.scheme.indexOf('.traffic.') !== -1) {\n      tileServer = 'traffic' + baseUrl;\n    }\n\n    var protocol = 'http' + (options.useHTTPS ? 's' : '');\n    var tileUrl = protocol + '://{s}.' + tileServer + path;\n\n    this._attributionUrl = L.Util.template(protocol + '://1.' + tileServer + attributionPath, this.options);\n\n    L.TileLayer.prototype.initialize.call(this, tileUrl, options);\n\n    this._attributionText = '';\n\n  },\n\n  onAdd: function onAdd(map) {\n    L.TileLayer.prototype.onAdd.call(this, map);\n\n    if (!this._attributionBBoxes) {\n      this._fetchAttributionBBoxes();\n    }\n  },\n\n  onRemove: function onRemove(map) {\n    //\n    // Remove the attribution text, and clear the cached text so it will be recalculated\n    // if/when we are shown again.\n    //\n    this._map.attributionControl.removeAttribution(this._attributionText);\n    this._attributionText = '';\n\n    this._map.off('moveend zoomend resetview', this._findCopyrightBBox, this);\n\n    //\n    // Call the prototype last, once we've tidied up our own changes\n    //\n    L.TileLayer.prototype.onRemove.call(this, map);\n  },\n\n  _fetchAttributionBBoxes: function _onMapMove() {\n    var xmlhttp = new XMLHttpRequest();\n    xmlhttp.onreadystatechange = L.bind(function(){\n      if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n        this._parseAttributionBBoxes(JSON.parse(xmlhttp.responseText));\n      }\n    }, this);\n    xmlhttp.open(\"GET\", this._attributionUrl, true);\n    xmlhttp.send();\n  },\n\n  _parseAttributionBBoxes: function _parseAttributionBBoxes(json) {\n    if (!this._map) { return; }\n    var providers = json[this.options.scheme.split('.')[0]] || json.normal;\n    for (var i=0; i<providers.length; i++) {\n      if (providers[i].boxes) {\n        for (var j=0; j<providers[i].boxes.length; j++) {\n          var box = providers[i].boxes[j];\n          providers[i].boxes[j] = L.latLngBounds( [ [box[0], box[1]], [box[2], box[3]] ]);\n        }\n      }\n    }\n\n    this._map.on('moveend zoomend resetview', this._findCopyrightBBox, this);\n\n    this._attributionProviders = providers;\n\n    this._findCopyrightBBox();\n  },\n\n  _findCopyrightBBox: function _findCopyrightBBox() {\n    if (!this._map) { return; }\n    var providers = this._attributionProviders;\n    var visibleProviders = [];\n    var zoom = this._map.getZoom();\n    var visibleBounds = this._map.getBounds();\n\n    for (var i=0; i<providers.length; i++) {\n      if (providers[i].minLevel <= zoom && providers[i].maxLevel >= zoom) {\n\n        if (!providers[i].boxes) {\n          // No boxes = attribution always visible\n          visibleProviders.push(providers[i]);\n        } else {\n          for (var j=0; j<providers[i].boxes.length; j++) {\n            var box = providers[i].boxes[j];\n            if (visibleBounds.intersects(box)) {\n              visibleProviders.push(providers[i]);\n              break;\n            }\n          }\n        }\n      }\n    }\n\n    var attributions = ['<a href=\"https://legal.here.com/en-gb/terms\" target=\"_blank\" rel=\"noopener noreferrer\">HERE maps</a>'];\n    for (var i=0; i<visibleProviders.length; i++) {\n      var provider = visibleProviders[i];\n      attributions.push('<abbr title=\"' + provider.alt + '\">' + provider.label + '</abbr>');\n    }\n\n    var attributionText = '© ' + attributions.join(', ') + '. ';\n\n    if (attributionText !== this._attributionText) {\n      this._map.attributionControl.removeAttribution(this._attributionText);\n      this._map.attributionControl.addAttribution(this._attributionText = attributionText);\n    }\n  },\n\n});\n\n\nL.tileLayer.here = function(opts){\n  return new L.TileLayer.HERE(opts);\n}\n","/* eslint prefer-reflect: 0 */\n\n// Leaflet-SVGIcon\n// SVG icon for any marker class\n//\n// Copyright (c) 2016 University of New Hampshire - The MIT License\n// Author: Ilya Atkin <ilya.atkin@unh.edu>\n// Originally copied from https://github.com/iatkin/leaflet-svgicon\n//\n\nlet SVGIcon = L.DivIcon.extend({\n  options: {\n    \"circleText\": \"\",\n    \"className\": \"svg-icon\",\n    // defaults to [iconSize.x/2, iconSize.x/2]\n    \"circleAnchor\": null,\n    // defaults to color\n    \"circleColor\": null,\n    // defaults to opacity\n    \"circleOpacity\": null,\n    \"circleFillColor\": \"rgb(255,255,255)\",\n    // default to opacity\n    \"circleFillOpacity\": null,\n    \"circleRatio\": 0.5,\n    // defaults to weight\n    \"circleWeight\": null,\n    \"color\": \"rgb(0,102,255)\",\n    // defaults to color\n    \"fillColor\": null,\n    \"fillOpacity\": 0.4,\n    \"fontColor\": \"rgb(0, 0, 0)\",\n    \"fontOpacity\": \"1\",\n    // defaults to iconSize.x/4\n    \"fontSize\": null,\n    \"fontWeight\": \"normal\",\n    // defaults to [iconSize.x/2, iconSize.y] (point tip)\n    \"iconAnchor\": null,\n    \"iconSize\": L.point(32, 48),\n    \"opacity\": 1,\n    \"popupAnchor\": null,\n    \"shadowAngle\": 45,\n    \"shadowBlur\": 1,\n    \"shadowColor\": \"rgb(0,0,10)\",\n    \"shadowEnable\": false,\n    \"shadowLength\": 0.75,\n    \"shadowOpacity\": 0.5,\n    \"shadowTranslate\": L.point(0, 0),\n    \"weight\": 2\n  },\n  initialize: function(_options) {\n    let options = L.Util.setOptions(this, _options)\n\n    // iconSize needs to be converted to a Point object if it is not passed as one\n    options.iconSize = L.point(options.iconSize)\n\n    // in addition to setting option dependant defaults, Point-based options are converted to Point objects\n    if (options.circleAnchor) {\n      options.circleAnchor = L.point(options.circleAnchor)\n    } else {\n      options.circleAnchor = L.point(Number(options.iconSize.x) / 2, Number(options.iconSize.x) / 2)\n    }\n    if (!options.circleColor) {\n      options.circleColor = options.color\n    }\n    if (!options.circleFillOpacity) {\n      options.circleFillOpacity = options.opacity\n    }\n    if (!options.circleOpacity) {\n      options.circleOpacity = options.opacity\n    }\n    if (!options.circleWeight) {\n      options.circleWeight = options.weight\n    }\n    if (!options.fillColor) {\n      options.fillColor = options.color\n    }\n    if (!options.fontSize) {\n      options.fontSize = Number(options.iconSize.x / 4)\n    }\n    if (options.iconAnchor) {\n      options.iconAnchor = L.point(options.iconAnchor)\n    }\n    else {\n      options.iconAnchor = L.point(Number(options.iconSize.x) / 2, Number(options.iconSize.y))\n    }\n    if (options.popupAnchor) {\n      options.popupAnchor = L.point(options.popupAnchor)\n    }\n    else {\n      options.popupAnchor = L.point(0, (-0.75) * (options.iconSize.y))\n    }\n\n    options.html = this._createSVG()\n  },\n  _createCircle: function() {\n    let cx = Number(this.options.circleAnchor.x)\n    let cy = Number(this.options.circleAnchor.y)\n    let radius = this.options.iconSize.x / 2 * Number(this.options.circleRatio)\n    let fill = this.options.circleFillColor\n    let fillOpacity = this.options.circleFillOpacity\n    let stroke = this.options.circleColor\n    let strokeOpacity = this.options.circleOpacity\n    let strokeWidth = this.options.circleWeight\n    let className = `${this.options.className}-circle`\n\n    let circle = `<circle class=\"${className}\" cx=\"${cx}\" cy=\"${cy}\" r=\"${radius\n    }\" fill=\"${fill}\" fill-opacity=\"${fillOpacity\n    }\" stroke=\"${stroke}\" stroke-opacity=${strokeOpacity}\" stroke-width=\"${strokeWidth}\"/>`\n\n    return circle\n  },\n  _createPathDescription: function() {\n    let height = Number(this.options.iconSize.y)\n    let width = Number(this.options.iconSize.x)\n    let weight = Number(this.options.weight)\n    let margin = weight / 2\n\n    let startPoint = `M ${margin} ${width / 2} `\n    let leftLine = `L ${width / 2} ${height - weight} `\n    let rightLine = `L ${width - margin} ${width / 2} `\n    let arc = `A ${width / 4} ${width / 4} 0 0 0 ${margin} ${width / 2} Z`\n\n    let description = startPoint + leftLine + rightLine + arc\n\n    return description\n  },\n  _createPath: function() {\n    let pathDescription = this._createPathDescription()\n    let strokeWidth = this.options.weight\n    let stroke = this.options.color\n    let strokeOpacity = this.options.opacity\n    let fill = this.options.fillColor\n    let fillOpacity = this.options.fillOpacity\n    let className = `${this.options.className}-path`\n\n    let path = `<path class=\"${className}\" d=\"${pathDescription\n    }\" stroke-width=\"${strokeWidth}\" stroke=\"${stroke}\" stroke-opacity=\"${strokeOpacity\n    }\" fill=\"${fill}\" fill-opacity=\"${fillOpacity}\"/>`\n\n    return path\n  },\n  _createShadow: function() {\n    let pathDescription = this._createPathDescription()\n    let strokeWidth = this.options.weight\n    let stroke = this.options.shadowColor\n    let fill = this.options.shadowColor\n    let className = `${this.options.className}-shadow`\n\n    let origin = `${this.options.iconSize.x / 2}px ${this.options.iconSize.y}px`\n    let rotation = this.options.shadowAngle\n    let height = this.options.shadowLength\n    let opacity = this.options.shadowOpacity\n    let blur = this.options.shadowBlur\n    let translate = `${this.options.shadowTranslate.x}px, ${this.options.shadowTranslate.y}px`\n\n    let blurFilter = `<filter id='iconShadowBlur'><feGaussianBlur in='SourceGraphic' stdDeviation='${blur}'/></filter>`\n\n    let shadow = `<path filter=\"url(#iconShadowBlur\") class=\"${className}\" d=\"${pathDescription}\" fill=\"${fill}\" stroke-width=\"${strokeWidth}\" stroke=\"${stroke}\" style=\"opacity: ${opacity}; transform-origin: ${origin}; transform: rotate(${rotation}deg) translate(${translate}) scale(1, ${height})\" />`\n\n    return blurFilter + shadow\n  },\n  _createSVG: function() {\n    let path = this._createPath()\n    let circle = this._createCircle()\n    let text = this._createText()\n    let shadow = \"\"\n    if (this.options.shadowEnable) {\n      shadow = this._createShadow()\n    }\n\n    let className = `${this.options.className}-svg`\n    let width = this.options.iconSize.x\n    let height = this.options.iconSize.y\n\n    if (this.options.shadowEnable) {\n      width += this.options.iconSize.y * this.options.shadowLength - (this.options.iconSize.x / 2)\n      width = Math.max(width, 32)\n      height += this.options.iconSize.y * this.options.shadowLength\n    }\n\n    let style = `width:${width}px; height:${height}`\n    let svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" class=\"${className}\" style=\"${style}\">${shadow}${path}${circle}${text}</svg>`\n\n    return svg\n  },\n  _createText: function() {\n    let fontSize = `${this.options.fontSize}px`\n    let fontWeight = this.options.fontWeight\n    let lineHeight = Number(this.options.fontSize)\n\n    let coordX = this.options.circleAnchor.x\n    // 35% was found experimentally\n    let coordY = this.options.circleAnchor.y + (lineHeight * 0.35)\n    let circleText = this.options.circleText\n    let textColor = this.options.fontColor.replace(\"rgb(\", \"rgba(\").replace(\")\", `,${this.options.fontOpacity})`)\n\n    let text = `<text text-anchor=\"middle\" x=\"${coordX}\" y=\"${coordY}\" style=\"font-size: ${fontSize}; font-weight: ${fontWeight}\" fill=\"${textColor}\">${circleText}</text>`\n\n    return text\n  }\n})\n\nlet SVGMarker = L.Marker.extend({\n  options: {\n    \"iconFactory\": L.divIcon.svgIcon,\n    \"iconOptions\": {}\n  },\n  initialize: function(latlng, _options) {\n    let options = L.Util.setOptions(this, _options)\n    options.icon = options.iconFactory(options.iconOptions)\n    this._latlng = latlng\n  },\n  onAdd: function(map) {\n    L.Marker.prototype.onAdd.call(this, map)\n  },\n  setStyle: function(style) {\n    if (this._icon) {\n      //      let svg = this._icon.children[0]\n      let iconBody = this._icon.children[0].children[0]\n      let iconCircle = this._icon.children[0].children[1]\n\n      if (style.color && !style.iconOptions) {\n        let stroke = style.color.replace(\"rgb\", \"rgba\").replace(\")\", `,${this.options.icon.options.opacity})`)\n        let fill = style.color.replace(\"rgb\", \"rgba\").replace(\")\", `,${this.options.icon.options.fillOpacity})`)\n        iconBody.setAttribute(\"stroke\", stroke)\n        iconBody.setAttribute(\"fill\", fill)\n        iconCircle.setAttribute(\"stroke\", stroke)\n\n        this.options.icon.fillColor = fill\n        this.options.icon.color = stroke\n        this.options.icon.circleColor = stroke\n      }\n      if (style.opacity) {\n        this.setOpacity(style.opacity)\n      }\n      if (style.iconOptions) {\n        if (style.color) {\n          style.iconOptions.color = style.color\n        }\n        let iconOptions = L.Util.setOptions(this.options.icon, style.iconOptions)\n        this.setIcon(L.divIcon.svgIcon(iconOptions))\n      }\n    }\n  }\n});\n\nexport { SVGMarker, SVGIcon }\n\n","import { SVGIcon } from \"src/decidim/map/svg-icon\";\n\nL.DivIcon.SVGIcon = SVGIcon;\nL.DivIcon.SVGIcon.DecidimIcon = L.DivIcon.SVGIcon.extend({\n  options: {\n    fillColor: \"#ef604d\",\n    fillOpacity: 1,\n    opacity: 0\n  },\n  _createPathDescription: function() {\n    return \"M14 1.17a11.685 11.685 0 0 0-11.685 11.685c0 11.25 10.23 20.61 10.665 21a1.5 1.5 0 0 0 2.025 0c0.435-.435 10.665-9.81 10.665-21A11.685 11.685 0 0 0 14 1.17Zm0 17.415A5.085 5.085 0 1 1 19.085 13.5 5.085 5.085 0 0 1 14 18.585Z\";\n  },\n  _createCircle: function() {\n    return \"\"\n  },\n  // Improved version of the _createSVG, essentially the same as in later\n  // versions of Leaflet. It adds the `px` values after the width and height\n  // CSS making the focus borders work correctly across all browsers.\n  _createSVG: function() {\n    const path = this._createPath();\n    const circle = this._createCircle();\n    const text = this._createText();\n    const className = `${this.options.className}-svg`;\n\n    const style = `width:${this.options.iconSize.x}px; height:${this.options.iconSize.y}px;`;\n\n    const svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" class=\"${className}\" style=\"${style}\">${path}${circle}${text}</svg>`;\n\n    return svg;\n  }\n});\n","/* eslint-disable no-ternary, multiline-ternary */\n\nimport * as L from \"leaflet\";\n\nexport default class ControlsUI {\n  constructor(awesomeMap) {\n    this.awesomeMap = awesomeMap;\n\n    this.main = L.control.layers(null, null, {\n      position: \"topleft\",\n      sortLayers: false,\n      collapsed: this.awesomeMap.config.collapsedMenu\n      // hideSingleBase: true\n    });\n\n    if (this.awesomeMap.config.hideControls) {\n      $(this.main.getContainer()).hide();\n    }\n\n    this.$loading = $(\"#awesome-map .loading-spinner\");\n    this.onHashtag = this._orderHashtags;\n\n    this.awesomeMap.map.on(\"overlayadd\", () => {\n      this.removeHiddenCategories();\n    });\n  }\n\n  attach() {\n    // legends\n    this.main.addTo(this.awesomeMap.map);\n\n    this.addSearchControls();\n    if (this.awesomeMap.config.menu.categories) {\n      this.addCategoriesControls();\n    }\n\n    // sub-layer hashtag title toggle\n    $(\"#awesome-map\").on(\"click\", \".awesome_map-title-control\", (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n      $(\"#awesome_map-categories-control\").toggleClass(\"active\");\n      $(\"#awesome_map-hashtags-control\").toggleClass(\"active\");\n    });\n\n    // hashtag events\n    $(\"#awesome-map\").on(\"change\", \".awesome_map-hashtags-selector\", (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n      const tag = $(evt.target).closest(\"label\").data(\"layer\");\n      // console.log(\"changed, layer\", tag, \"checked\", evt.target.checked, e);\n      if (tag) {\n        this.updateHashtagLayers();\n      }\n    });\n\n    // select/deselect all tags\n    $(\"#awesome-map\").on(\"click\", \".awesome_map-toggle_all_tags\", (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n      $(\"#awesome-map .awesome_map-hashtags-selector\").prop(\"checked\", $(\"#awesome-map .awesome_map-hashtags-selector:checked\").length < $(\"#awesome-map .awesome_map-hashtags-selector\").length);\n      this.updateHashtagLayers();\n    });\n  }\n\n  addSearchControls() {\n    $(this.main.getContainer()).contents(\"form\").append(`<div id=\"awesome_map-categories-control\" class=\"active\"><b class=\"awesome_map-title-control\">${window.DecidimAwesome.texts.categories}</b><div class=\"categories-container\"></div></div>\n    <div id=\"awesome_map-hashtags-control\"><b class=\"awesome_map-title-control\">${window.DecidimAwesome.texts.hashtags}</b><div class=\"hashtags-container\"></div><a href=\"#\" class=\"awesome_map-toggle_all_tags\">${window.DecidimAwesome.texts.select_deselect_all}</a></div>`);\n  }\n\n  addCategoriesControls() {\n    this.awesomeMap.categories.forEach((category) => {\n      // add control layer for this category\n      const label = `<i class=\"awesome_map-category_${category.id}\"></i> ${category.name}`;\n      this.awesomeMap.layers[category.id] = {\n        label: label,\n        group: new L.FeatureGroup.SubGroup(this.awesomeMap.cluster)\n      };\n      this.awesomeMap.layers[category.id].group.addTo(this.awesomeMap.map);\n      $(\"#awesome_map-categories-control .categories-container\").append(`<label data-layer=\"${category.id}\" class=\"awesome_map-category-${category.id}${category.parent ? \" subcategory\" : \"\"}\" data-parent=\"${category.parent}\"><input type=\"checkbox\" class=\"awesome_map-categories-selector\" checked><span>${label}</span></label>`);\n    })\n\n    // category events\n    $(\"#awesome-map\").on(\"change\", \".awesome_map-categories-selector\", (evt) => {\n      evt.preventDefault();\n      evt.stopPropagation();\n\n      const id = $(evt.target).closest(\"label\").data(\"layer\");\n      const cat = this.awesomeMap.getCategory(id);\n      // console.log(\"changed, layer\", id, \"cat\", cat, \"checked\", evt.target.checked, e);\n      if (cat) {\n        const layer = this.awesomeMap.layers[cat.id];\n        if (evt.target.checked) {\n          // show group of markers\n          this.awesomeMap.map.addLayer(layer.group);\n        } else {\n          // hide group of markers\n          this.awesomeMap.map.removeLayer(layer.group);\n          // cat.children().forEach((c) => {\n          //   let $el = $(`.awesome_map-category-${c.id}`);\n          //   if($el.contents(\"input\").prop(\"checked\")) {\n          //     $el.click();\n          //   }\n          // });\n        }\n        // if it's a children, put the parent to indeterminate\n        this._indeterminateParentInput(cat);\n        // sync tags\n        this.updateHashtagLayers();\n      }\n    });\n  }\n\n  // Hashtags are collected directly from proposals (this is different than categories)\n  addHashtagsControls(hashtags, marker) {\n    // show hashtag layer\n    if (hashtags && hashtags.length) {\n      $(\"#awesome_map-hashtags-control\").show();\n      hashtags.forEach((hashtag) => {\n        // Add layer if not exists, otherwise just add the marker to the group\n        if (!this.awesomeMap.layers[hashtag.tag]) {\n          this.awesomeMap.layers[hashtag.tag] = {\n            label: hashtag.name,\n            group: new L.FeatureGroup.SubGroup(this.awesomeMap.cluster)\n          };\n          this.awesomeMap.map.addLayer(this.awesomeMap.layers[hashtag.tag].group);\n          $(\"#awesome_map-hashtags-control .hashtags-container\").append(`<label data-layer=\"${hashtag.tag}\" class=\"awesome_map-hashtag-${hashtag.tag}\"><input type=\"checkbox\" class=\"awesome_map-hashtags-selector\" checked><span>${hashtag.name}</span></label>`);\n          // Call a trigger, might be in service for customizations\n          this.onHashtag(hashtag, $(\"#awesome_map-hashtags-control .hashtags-container\"));\n        }\n        this.awesomeMap.layers[hashtag.tag].group.addLayer(marker);\n\n        const $label = $(`label.awesome_map-hashtag-${hashtag.tag}`);\n        // update number of items\n        $label.attr(\"title\", `${parseInt($label.attr(\"title\") || 0, 10) + 1} ${window.DecidimAwesome.texts.items}`);\n      });\n    }\n  }\n\n  showCategory(cat) {\n    $(\"#awesome_map-categories-control\").show();\n    // show category if hidden\n    const $label = $(`label.awesome_map-category-${cat.id}`);\n    const $parent = $(`label.awesome_map-category-${cat.parent}`);\n    $label.show();\n    // update number of items\n    $label.attr(\"title\", `${parseInt($label.attr(\"title\") || 0, 10) + 1} ${window.DecidimAwesome.texts.items}`);\n    // show parent if apply\n    $parent.show();\n    $parent.attr(\"title\", `${parseInt($parent.attr(\"title\") || 0, 10) + 1} ${window.DecidimAwesome.texts.items}`);\n  }\n\n  removeHiddenComponents() {\n    $(\".awesome_map-component\").each((_idx, el) => {\n      const layer = this.awesomeMap.layers[$(el).data(\"layer\")];\n      const $input = $(el).closest(\"div\").find(\"input:not(:checked)\");\n      if (layer && $input.length) {\n        this.awesomeMap.map.addLayer(layer.group);\n        this.awesomeMap.map.removeLayer(layer.group);\n      }\n    });\n  }\n\n  removeHiddenCategories() {\n    $(\".awesome_map-categories-selector:not(:checked)\").each((_idx, el) => {\n      const layer = this.awesomeMap.layers[$(el).closest(\"label\").data(\"layer\")];\n      if (layer) {\n        this.awesomeMap.map.addLayer(layer.group);\n        this.awesomeMap.map.removeLayer(layer.group);\n      }\n    });\n  }\n\n  updateHashtagLayers() {\n    // hide all\n    $(\".awesome_map-hashtags-selector\").each((_idx, el) => {\n      const layer = this.awesomeMap.layers[$(el).closest(\"label\").data(\"layer\")];\n      if (layer) {\n        this.awesomeMap.map.removeLayer(layer.group);\n      }\n    });\n    // show selected only\n    $(\".awesome_map-hashtags-selector:checked\").each((_idx, el) => {\n      const layer = this.awesomeMap.layers[$(el).closest(\"label\").data(\"layer\")];\n      if (layer) {\n        this.awesomeMap.map.addLayer(layer.group);\n      }\n    });\n    // hide non-selected categories\n    this.removeHiddenComponents();\n    this.removeHiddenCategories();\n  }\n\n  updateStats(uid, total) {\n    // update component stats\n    const $component = $(`#awesome_map-${uid}`);\n    $component.attr(\"title\", `${total} ${window.DecidimAwesome.texts.items}`);\n  }\n\n  _indeterminateParentInput(cat) {\n    if (cat.parent) {\n      let $input = $(`.awesome_map-category-${cat.parent}`).contents(\"input\");\n      let $subcats = $(`[class^=\"awesome_map-category-\"][data-parent=\"${cat.parent}\"]:visible`);\n      let numChecked = $subcats.contents(\"input:checked\").length;\n      $input.prop(\"indeterminate\", numChecked !== $subcats.length && numChecked !== 0);\n    }\n  }\n\n  // order hashtags alphabetically\n  _orderHashtags(_hashtag, $div) {\n    let $last = $div.contents(\"label:last\");\n    if ($last.prev(\"label\").length) {\n      // move the label to order it alphabetically\n      $div.contents(\"label\").each((_idx, el) => {\n        if ($(el).text().localeCompare($last.text()) > 0) {\n          $(el).before($last);\n        }\n      });\n    }\n  }\n}\n","import * as L from \"leaflet\";\n\nexport default class Controller {\n  constructor(awesomeMap, component) {\n    this.awesomeMap = awesomeMap;\n    this.component = component;\n    this.templateId = \"marker-meeting-popup\";\n    this.controls = {\n      label: this.getLabel(),\n      group: new L.FeatureGroup.SubGroup(this.awesomeMap.cluster)\n    };\n    this.onFinished = () => {};\n    this.allNodes = [];\n  }\n\n  getLabel() {\n    let text = this.awesomeMap.config.menu.mergeComponents || this.component.name;\n    if (!text) {\n      text = window.DecidimAwesome.texts[this.component.type];\n    }\n    return `<span class=\"awesome_map-component\" id=\"awesome_map-component_${this.component.id}\" title=\"0\" data-layer=\"${this.component.type}\">${text}</span>`\n  }\n\n  setFetcher(Fetcher) {\n    let checkProposalState = function (node, map) {\n      const showConfig = map.config.show;\n      return showConfig[node.state || \"notAnswered\"];\n    }\n\n    this.fetcher = new Fetcher(this);\n    this.fetcher.onFinished = () => {\n      // console.log(`all ${this.component.type} loaded`, this)\n      this._onFinished();\n    };\n    this.fetcher.onCollection = (collection) =>  {\n      if (collection && collection.edges)  {\n        // Add markers to the main cluster group\n        let collectionEdges = [];\n        if (this.fetcher.collection === \"meetings\") {\n          collectionEdges = collection.edges.filter((item) => item.node.coordinates && item.node.coordinates.latitude && item.node.coordinates.longitude);\n        } else {\n          collectionEdges = collection.edges.filter((item) => item.node.coordinates && item.node.coordinates.latitude && item.node.coordinates.longitude && checkProposalState(item.node, this.awesomeMap));\n        }\n\n        try {\n          this.awesomeMap.cluster.addLayers(collectionEdges.map((item) => item.node.marker));\n        } catch (evt) {\n          console.error(\"Failed marker collection assignation\", collectionEdges, \"error\", evt);\n        }\n        // subgroups don't have th addLayers utility\n        collectionEdges.forEach((item) => {\n          this.awesomeMap.layers[this.component.type].group.addLayer(item.node.marker);\n          this.addMarkerCategory(item.node.marker, item.node.category);\n          this.addMarkerHashtags(item.node.marker, item.node.hashtags);\n        });\n      }\n    };\n  }\n\n  addControls() {\n    this.awesomeMap.controls.main.addOverlay(this.controls.group, this.controls.label);\n    this.controls.group.addTo(this.awesomeMap.map);\n    this.awesomeMap.layers[this.component.type] = this.controls;\n  }\n\n  loadNodes() {\n    // to override\n  }\n\n  addMarker(marker, node) {\n\n    /*\n    theorically, this should be enough to create popups on markers but it looks that\n    there is some bug in leaflet that sometimes prevents this to work\n    */\n    /*\n    let dom = document.createElement(\"div\");\n    // console.log(\"addMarker\", marker, \"dom\", dom)\n    dom.innerHTML = $.templates(`#${this.templateId}`).render(node);\n    marker.bindPopup(dom, {\n      maxwidth: 640,\n      minWidth: 500,\n      keepInView: true,\n      className: \"map-info\"\n    }); //*/\n\n    marker.on(\"click\", () => {\n      let dom = document.createElement(\"div\");\n      dom.innerHTML = $.templates(`#${this.templateId}`).render(node);\n\n      let pop = L.popup({\n        maxwidth: 640,\n        minWidth: 500,\n        keepInView: true,\n        className: \"map-info\"\n\n      }).setLatLng(marker.getLatLng()).setContent(dom);\n      this.awesomeMap.map.addLayer(pop);\n    });\n    node.marker = marker;\n    node.component = this.component;\n    this.allNodes.push(node);\n  }\n\n  addMarkerCategory(marker, category) {\n    // Add to category layer\n    const cat = this.awesomeMap.getCategory(category);\n    if (this.awesomeMap.layers[cat.id]) {\n      try {\n        this.awesomeMap.layers[cat.id].group.addLayer(marker);\n        this.awesomeMap.controls.showCategory(cat);\n      } catch (evt) {\n        console.error(\"Failed category marker assignation\", marker, evt.message);\n      }\n    }\n  }\n\n  addMarkerHashtags(marker, hashtags) {\n    // Add hashtag layer\n    if (this.awesomeMap.config.menu.hashtags) {\n      try {\n        this.awesomeMap.controls.addHashtagsControls(hashtags, marker);\n      } catch (evt) {\n        console.error(\"Failed hashtags marker assignation\", marker, evt.message);\n      }\n    }\n  }\n\n  // Override if needed (call this.onFinished() at the end!)\n  _onFinished() {\n    this.awesomeMap.controls.updateStats(`component_${this.component.id}`, this.allNodes.length);\n    this.onFinished();\n  }\n\n  createIcon(Builder, color) {\n    return new Builder({\n      color: \"#000000\",\n      fillColor: color,\n      circleFillColor: color,\n      weight: 1,\n      stroke: color,\n      fillOpacity: 0.9\n    });\n  }\n}\n","export default class ApiFetcher { // eslint-disable-line no-unused-vars\n  constructor(query, variables) {\n    this.query = query;\n    this.variables = variables;\n  }\n\n  fetch(callback) {\n    $.ajax({\n      method: \"POST\",\n      url: \"/api\",\n      contentType: \"application/json\",\n      data: JSON.stringify({\n        query: this.query,\n        variables: this.variables\n      })\n    }).done(function(data) {\n      callback(data.data);\n    });\n  }\n\n  fetchAll (callback) {\n    this.fetch(callback);\n  }\n}\n","import ApiFetcher from \"src/decidim/decidim_awesome/awesome_map/api/api_fetcher\";\n\nexport default class Fetcher {\n  constructor(controller) {\n    this.controller = controller;\n    this.config = {\n      length: controller.awesomeMap.config.length || 255\n    };\n    this.onFinished = () => {};\n    this.onNode = () => {};\n    this.onCollection = () => {};\n    this.hashtags = [];\n\n    this.collection = this.controller.component.type;\n    // override in specific components:\n    this.query = `query ($id: ID!, $after: String!) {\n        component(id: $id) {\n          id\n          __typename\n        }\n      }`;\n  }\n\n  fetch(after = \"\") {\n    const variables = {\n      \"id\": this.controller.component.id,\n      \"after\": after\n    };\n    const api = new ApiFetcher(this.query, variables);\n    api.fetchAll((result) => {\n      if (result) {\n        const collection = result.component[this.collection];\n        // console.log(\"collection\",collection)\n        \n        collection.edges.forEach((element) => {\n          let node = element.node;\n          if (!node) {\n            return;\n          }\n      \n          if (node.coordinates && node.coordinates.latitude && node.coordinates.longitude) {\n            this.decorateNode(node);\n            this.onNode(node)\n          }\n        });\n\n        this.onCollection(collection);\n\n        if (collection.pageInfo.hasNextPage) {\n          this.fetch(collection.pageInfo.endCursor);\n        } else {\n          this.onFinished();\n        }\n      }\n    });\n  }\n\n  decorateNode(node) {\n    const body = this.findTranslation(node.body.translations);\n    const title = this.findTranslation(node.title.translations);\n    node.hashtags = this.collectHashtags(title);\n    node.hashtags = node.hashtags.concat(this.collectHashtags(body));\n    // hashtags in the title look ugly, lets replace the gid:... structure with the tag #name\n    node.title.translation = this.replaceHashtags(title, node.hashtags);\n    node.body.translation = this.appendHtmlHashtags(this.truncate(this.removeHashtags(body)).replace(/\\n/g, \"<br>\"), node.hashtags);\n    node.link = `${this.controller.component.url}/${this.collection}/${node.id}`;\n  }\n\n  findTranslation(translations) {\n    let lang = document.querySelector(\"html\").getAttribute(\"lang\"),\n        text = \"\";\n    \n    translations.forEach((txt) => {\n      if (txt.text) {\n        if (!text || txt.locale === lang) {\n          text = txt.text\n        }\n      }\n    });\n    return text;\n  }\n\n  collectHashtags(text) {\n    let tags = [];\n    if (text) {\n      const gids = text.match(/gid:\\/\\/[^\\s<&]+/g)\n      if (gids) {\n        tags = gids.filter((gid) => gid.indexOf(\"/Decidim::Hashtag/\") !== -1).map((gid) => {\n          const parts = gid.split(\"/\");\n          const fromSelector = parts[5].charAt(0) === \"_\";\n          const tag = fromSelector ? parts[5].substr(1) : parts[5]; // eslint-disable-line no-ternary, multiline-ternary\n          const name = `#${tag}`;\n          const html = `<a href=\"/search?term=${name}\">${name}</a>`;\n          const hashtag = {\n            color: getComputedStyle(document.documentElement).getPropertyValue(\"--secondary\"),\n            gid: gid,\n            id: parseInt(parts[4], 10),\n            fromSelector: fromSelector,\n            tag: tag,\n            name: name,\n            html: html\n          }\n          this.hashtags.push(hashtag)\n          return hashtag;\n        });\n      }\n    }\n    return tags;\n  }\n\n  replaceHashtags(txt, hashtags) {\n    let text = txt;\n    hashtags.forEach((tag) => {\n      text = text.replace(tag.gid, tag.name)\n    });\n    return text;\n  }\n\n  removeHashtags(text) {\n    return text.replace(/gid:\\/\\/[^\\s<&]+/g, \"\");\n  }\n\n  appendHtmlHashtags(txt, tags) {\n    let text = txt;\n    tags.forEach((tag) => {\n      text += ` ${tag.html}`;\n    });\n    return text;\n  }\n\n  truncate(html) {\n    return $.truncate(html, this.config);\n  }\n}\n","import Fetcher from \"src/decidim/decidim_awesome/awesome_map/api/fetcher\";\n\nexport default class ProposalsFetcher extends Fetcher {\n  constructor(controller) {\n    super(controller);\n    this.query = `query ($id: ID!, $after: String!) {\n      component(id: $id) {\n          id\n          __typename\n          ... on Proposals {\n            proposals(first: 50, after: $after){\n              pageInfo {\n                hasNextPage\n                endCursor\n              }\n              edges {\n                node {\n                  id\n                  state\n                  title {\n                    translations {\n                      text\n                      locale\n                    }\n                  }\n                  body {\n                    translations {\n                      text\n                      locale\n                    }\n                  }\n                  address\n                  coordinates {\n                    latitude\n                    longitude\n                  }\n                  amendments {\n                    emendation {\n                      id\n                    }\n                  }\n                  category {\n                    id\n                  }\n                }\n              }\n            }\n          }\n        }\n      }`;\n  }\n}\n","import * as L from \"leaflet\";\nimport Controller from \"src/decidim/decidim_awesome/awesome_map/controllers/controller\";\nimport ProposalsFetcher from \"src/decidim/decidim_awesome/awesome_map/api/proposals_fetcher\";\n\nconst ProposalIcon = L.DivIcon.SVGIcon.DecidimIcon.extend({\n  options: {\n    fillColor: \"#ef604d\",\n    fillOpacity: 0.8,\n    strokeWidth: 1,\n    strokeOpcacity: 1\n  }\n});\nexport default class ProposalsController extends Controller {\n  constructor(awesomeMap, component) {\n    super(awesomeMap, component)\n    this.templateId = \"marker-proposal-popup\";\n    this.amendments = {};\n    this.setFetcher(ProposalsFetcher);\n  }\n\n  addControls() {\n    super.addControls();\n\n    // add control layer for amendments if any\n    if (this.awesomeMap.config.menu.amendments && this.component.amendments && !this.awesomeMap.layers.amendments) {\n      this.awesomeMap.layers.amendments = {\n        label: `<span class=\"awesome_map-component\" id=\"awesome_map-amendments_${this.component.id}\" title=\"0\" data-layer=\"amendments\">${window.DecidimAwesome.texts.amendments}</span>`,\n        group: new L.FeatureGroup.SubGroup(this.awesomeMap.cluster)\n      }\n      this.awesomeMap.controls.main.addOverlay(this.awesomeMap.layers.amendments.group, this.awesomeMap.layers.amendments.label);\n      this.awesomeMap.layers.amendments.group.addTo(this.awesomeMap.map);\n    }\n  }\n\n  loadNodes() {\n    // for each proposal, create a marker with an associated popup\n    this.fetcher.onNode = (proposal) => {\n      let marker = new L.Marker([proposal.coordinates.latitude, proposal.coordinates.longitude], {\n        icon: this.createIcon(ProposalIcon, this.awesomeMap.getCategory(proposal.category).color),\n        title: proposal.title.translation\n      });\n\n      // Check if it has amendments, add it to a list\n      // also assign parent's proposal categories to it\n      if (proposal.amendments && proposal.amendments.length) {\n        proposal.amendments.forEach((amendment) => {\n          this.amendments[amendment.emendation.id] = proposal;\n        });\n      }\n\n      // console.log(\"new proposal\", proposal, \"marker\",  marker)\n      this.addMarker(marker, proposal);\n    };\n\n    this.fetcher.fetch();\n  }\n\n  _onFinished() {\n    const iterableAmendments = Object.entries(this.amendments);\n    this.awesomeMap.controls.updateStats(`component_${this.component.id}`, this.allNodes.length - iterableAmendments.length);\n    this.awesomeMap.controls.updateStats(`amendments_${this.component.id}`, iterableAmendments.length);\n\n    // Process all amendments\n    iterableAmendments.forEach((amendment) => {\n      const marker = this.allNodes.find((node) => node.id === amendment[0]);\n      const parent = amendment[1];\n      // console.log(\"marker\", marker, \"parent proposal\", parent)\n      // add marker to amendments layers and remove it from proposals\n      if (marker) {\n        try { \n          marker.marker.removeFrom(this.controls.group) \n        } catch (evt) { \n          console.error(\"error removeFrom marker\", marker, \"layer\", this.controls.group,  evt);\n        }\n        if (this.awesomeMap.config.menu.amendments) {\n          marker.marker.addTo(this.awesomeMap.layers.amendments.group);\n          // mimic parent category (amendments doesn't have categories)\n          if (parent.category) {\n            marker.marker.setIcon(this.createIcon(ProposalIcon, this.awesomeMap.getCategory(parent.category).color));\n            this.addMarkerCategory(marker.marker, parent.category)\n          }\n        }\n      }\n    });\n\n    this.onFinished();\n  }\n}\n","import Fetcher from \"src/decidim/decidim_awesome/awesome_map/api/fetcher\";\n\nexport default class MeetingsFetcher extends Fetcher {\n  constructor(controller) {\n    super(controller);\n    this.query = `query ($id: ID!, $after: String!) {\n    component(id: $id) {\n        id\n        __typename\n        ... on Meetings {\n          meetings(first: 50, after: $after) {\n            pageInfo {\n              hasNextPage\n              endCursor\n            }\n            edges {\n              node {\n                id\n                title {\n                  translations {\n                    text\n                    locale\n                  }\n                }\n                body: description {\n                  translations {\n                    text\n                    locale\n                  }\n                }\n                startTime\n                location {\n                  translations {\n                    text\n                    locale\n                  }\n                }\n                address\n                locationHints {\n                  translations {\n                    text\n                    locale\n                  }\n                }\n                coordinates {\n                  latitude\n                  longitude\n                }\n                category {\n                  id\n                }\n              }\n            }\n          }\n        }\n      }\n    }`;\n  }\n}\n","import * as L from \"leaflet\";\nimport Controller from \"src/decidim/decidim_awesome/awesome_map/controllers/controller\";\nimport MeetingsFetcher from \"src/decidim/decidim_awesome/awesome_map/api/meetings_fetcher\";\n\nconst MeetingIcon = L.DivIcon.SVGIcon.DecidimIcon.extend({\n  _createPathDescription: function() {\n    return \"M 15.991543,4 C 7.3956015,4 2.9250351,10.5 3.000951,16.999999 3.1063486,26.460968 12.747693,30.000004 15.991543,43 19.242091,30.000004 29,26.255134 29,16.999999 29,10.5 23.951131,4 15.996007,4 m -0.153508,2.6000001 a 2.1720294,2.1076698 0 0 1 2.330514,2.1124998 2.177008,2.1125006 0 0 1 -4.354016,0 2.1720294,2.1076698 0 0 1 2.023502,-2.1124998 m -2.651707,4.8056679 h 5.610202 l 3.935584,7.569899 -1.926038,0.934266 -2.009546,-3.859265 v 14.557403 h -2.484243 v -9.126003 h -0.642162 v 9.126003 H 13.190347 V 16.050568 l -2.009545,3.859265 -1.926036,-0.934266 3.935581,-7.569899\";\n  }\n});\n\nexport default class MeetingsController extends Controller {\n  constructor(awesomeMap, component) {\n    super(awesomeMap, component)\n    this.templateId = \"marker-meeting-popup\";\n    this.setFetcher(MeetingsFetcher);\n  }\n\n  loadNodes() {\n    // for each meeting, create a marker with an associated popup\n    this.fetcher.onNode = (meeting) => {\n      let marker = new L.Marker([meeting.coordinates.latitude, meeting.coordinates.longitude], {\n        icon: this.createIcon(MeetingIcon, this.awesomeMap.getCategory(meeting.category).color),\n        title: meeting.title.translation\n      });\n      // console.log(\"new meeting\", meeting, marker)\n      this.addMarker(marker, meeting);\n    };\n\n    this.fetcher.fetch();\n  }\n}\n","import * as L from \"leaflet\";\n// comes with Decidim\nimport \"src/decidim/map/icon.js\" \nimport \"src/decidim/vendor/leaflet-tilelayer-here\"\n// Comes with Decidim\nimport \"leaflet.markercluster\"; \n// included in this package.json\nimport \"leaflet.featuregroup.subgroup\" \nimport \"src/vendor/jquery.truncate\"\nimport \"jsrender\"\n\nimport ControlsUI from \"src/decidim/decidim_awesome/awesome_map/controls_ui\";\nimport ProposalsController from \"src/decidim/decidim_awesome/awesome_map/controllers/proposals_controller\";\nimport MeetingsController from \"src/decidim/decidim_awesome/awesome_map/controllers/meetings_controller\";\n\nexport default class AwesomeMap {\n  constructor(map, config) {\n    this.map = map;\n    this.categories = window.AwesomeMap && window.AwesomeMap.categories || []\n    this.config = $.extend({\n      length: 255,\n      center: null,\n      zoom: 8,\n      menu: {\n        amendments: false,\n        meetings: false,\n        categories: true,\n        hashtags: false,\n        mergeComponents: false\n      },\n      show: {\n        withdrawn: false,\n        accepted: false,\n        evaluating: false,\n        notAnswered: false,\n        rejected: false\n      },\n      hideControls: false,\n      collapsedMenu: false,\n      components: []\n    }, config);\n    this.layers = {};\n    this.cluster = new L.MarkerClusterGroup();\n    this.map.addLayer(this.cluster);\n    this.controls = new ControlsUI(this);\n    this.onFinished = () => {};\n    this.controllers = {};\n    this.loading = [];\n    this._firstController = {};\n  }\n\n  // Queries the API and load all the markers\n  loadControllers() {\n    this.autoResize();\n    this.controls.attach();\n\n    this.config.components.forEach((component) => {\n      const controller = this._getController(component);\n      if (controller) {\n        controller.loadNodes();\n        this.loading.push(component.type);\n        controller.onFinished = () => {\n          this.loading.pop();\n          this.autoResize();\n\n          if (this.loading.length === 0) {\n            this.controls.$loading.hide();\n            // call trigger as all loads are finished\n            this.onFinished();\n          }\n        };\n      }\n    });\n  }\n\n  autoResize() {\n    // Setup center/zoom options if specified, otherwise fitbounds\n    const bounds = this.cluster.getBounds()\n    if (this.config.center && this.config.zoom) {\n      this.map.setView(this.config.center, this.config.zoom);\n    } else if (bounds.isValid()) {\n      // this.map.fitBounds(bounds, { padding: [50, 50] }); // this doesn't work much of the time, probably some race condition\n      this.map.fitBounds([[bounds.getNorth(), bounds.getEast()], [bounds.getSouth(), bounds.getWest()]], { padding: [50, 50] });\n    }\n  }\n\n  getCategory(category) {\n    let defaultCat = {\n      color: getComputedStyle(document.documentElement).getPropertyValue(\"--primary\"),\n      children: () => {},\n      parent: null,\n      name: null\n    };\n\n    if (category) {\n      let id = category.id ? parseInt(category.id, 10) : parseInt(category, 10); // eslint-disable-line no-ternary, multiline-ternary\n      let cat = this.categories.find((ct) => ct.id === id);\n      if (cat) {\n        cat.children = () => {\n          return this.categories.filter((ct) => ct.parent === cat.id);\n        }\n        return cat;\n      }\n    }\n    return defaultCat;\n  }\n\n  _getController(component) {\n    let controller = null;\n\n    if (component.type === \"proposals\") {\n      controller = new ProposalsController(this, component);\n    }\n    if (component.type === \"meetings\" && this.config.menu.meetings) {\n      controller = new MeetingsController(this, component);\n    }\n\n    if (controller) {\n      // Agrupate layers for controlling components\n      if (this._firstController[component.type] && this.config.menu.mergeComponents) {\n        controller.controls = this._firstController[component.type].controls;\n      } else  {\n        controller.addControls();\n      }\n      this._firstController[component.type] = this._firstController[component.type] || controller;\n      this.controllers[component.type] = controller;\n      return this.controllers[component.type]\n    }\n    return null;\n  }\n}\n","import AwesomeMap from \"src/decidim/decidim_awesome/awesome_map/awesome_map\"\n\n$(() => {\n  const sanitizeCenter = (string) => {\n    if (string) {\n      const parts = string.split(\",\")\n      if (parts.length >= 2) {\n        const lat = parseFloat(parts[0]);\n        const lng = parseFloat(parts[1]);\n        if (lat && lng) {\n          return [lat, lng];\n        }\n      }\n    }\n    return null;\n  };\n\n  const config = {\n    length: $(\"#awesome-map\").data(\"truncate\") || 254,\n    center: sanitizeCenter($(\"#awesome-map\").data(\"map-center\")),\n    zoom: $(\"#awesome-map\").data(\"map-zoom\"),    \n    menu: {\n      amendments: $(\"#awesome-map\").data(\"menu-amendments\"),\n      meetings: $(\"#awesome-map\").data(\"menu-meetings\"),\n      categories: $(\"#awesome-map\").data(\"menu-categories\"),\n      hashtags: $(\"#awesome-map\").data(\"menu-hashtags\"),\n      mergeComponents: $(\"#awesome-map\").data(\"menu-merge-components\")\n    },\n    show: {\n      withdrawn: $(\"#awesome-map\").data(\"show-withdrawn\"),\n      accepted: $(\"#awesome-map\").data(\"show-accepted\"),\n      evaluating: $(\"#awesome-map\").data(\"show-evaluating\"),\n      notAnswered: $(\"#awesome-map\").data(\"show-not-answered\"),\n      rejected: $(\"#awesome-map\").data(\"show-rejected\")\n    },\n    hideControls: $(\"#awesome-map\").data(\"hide-controls\"),\n    collapsedMenu: $(\"#awesome-map\").data(\"collapsed\"),\n    components: $(\"#awesome-map\").data(\"components\")\n  };\n\n  // build awesome map (if exist)\n  $(\"#awesome-map .google-map\").on(\"ready.decidim\", (evt, map) => {\n    // bindPopup doesn't work for some unknown cause and these handler neither so we're cancelling them\n    map.off(\"popupopen\");\n    map.off(\"popupclose\");\n\n    // console.log(\"ready map\", map);\n\n    window.AwesomeMap = new AwesomeMap(map, config);\n    window.AwesomeMap.loadControllers();\n  });\n});\n","// From https://github.com/pathable/truncate/\n\n(function($) {\n\n  // Matches trailing non-space characters.\n  var chop = /(\\s*\\S+|\\s)$/;\n\n  // Matches the first word in the string.\n  var start = /^(\\S*)/;\n\n  // Return a truncated html string.  Delegates to $.fn.truncate.\n  $.truncate = function(html, options) {\n    return $('<div></div>').append(html).truncate(options).html();\n  };\n\n  // Truncate the contents of an element in place.\n  $.fn.truncate = function(options) {\n    if ($.isNumeric(options)) options = { length: options };\n    var o = $.extend({}, $.truncate.defaults, options);\n\n    return this.each(function() {\n      var self = $(this);\n\n      if (o.noBreaks) self.find('br').replaceWith(' ');\n\n      var text = self.text();\n      var excess = text.length - o.length;\n\n      if (o.stripTags) self.text(text);\n\n      // Chop off any partial words if appropriate.\n      if (o.words && excess > 0) {\n        var truncated = text.slice(0, o.length).replace(chop, '').length;\n\n        if (o.keepFirstWord && truncated === 0) {\n          excess = text.length - start.exec(text)[0].length - 1;\n        } else {\n          excess = text.length - truncated - 1;\n        }\n      }\n\n      if (excess < 0 || !excess && !o.truncated) return;\n\n      // Iterate over each child node in reverse, removing excess text.\n      $.each(self.contents().get().reverse(), function(i, el) {\n        var $el = $(el);\n        var text = $el.text();\n        var length = text.length;\n\n        // If the text is longer than the excess, remove the node and continue.\n        if (length <= excess) {\n          o.truncated = true;\n          excess -= length;\n          $el.remove();\n          return;\n        }\n\n        // Remove the excess text and append the ellipsis.\n        if (el.nodeType === 3) {\n          // should we finish the block anyway?\n          if (o.finishBlock) {\n            $(el.splitText(length)).replaceWith(o.ellipsis);\n          } else {\n            $(el.splitText(length - excess - 1)).replaceWith(o.ellipsis);\n          }\n          return false;\n        }\n\n        // Recursively truncate child nodes.\n        $el.truncate($.extend(o, { length: length - excess }));\n        return false;\n      });\n    });\n  };\n\n  $.truncate.defaults = {\n\n    // Strip all html elements, leaving only plain text.\n    stripTags: false,\n\n    // Only truncate at word boundaries.\n    words: false,\n\n    // When 'words' is active, keeps the first word in the string\n    // even if it's longer than a target length.\n    keepFirstWord: false,\n\n    // Replace instances of <br> with a single space.\n    noBreaks: false,\n\n    // if true always truncate the content at the end of the block.\n    finishBlock: false,\n\n    // The maximum length of the truncated html.\n    length: Infinity,\n\n    // The character to use as the ellipsis.  The word joiner (U+2060) can be\n    // used to prevent a hanging ellipsis, but displays incorrectly in Chrome\n    // on Windows 7.\n    // http://code.google.com/p/chromium/issues/detail?id=68323\n    ellipsis: '\\u2026' // '\\u2060\\u2026'\n\n  };\n\n})(jQuery);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t8981: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkapp\"] = self[\"webpackChunkapp\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [5732,8270], function() { return __webpack_require__(60538); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","L","TileLayer","HERE","extend","options","subdomains","minZoom","maxZoom","scheme","resource","mapId","format","appId","appCode","useCIT","useHTTPS","language","language2","initialize","schemeStart","setOptions","this","split","tileResolution","params","encodeURIComponent","apiKey","push","path","join","attributionPath","baseUrl","tileServer","indexOf","protocol","tileUrl","_attributionUrl","Util","template","prototype","call","_attributionText","onAdd","map","_attributionBBoxes","_fetchAttributionBBoxes","onRemove","_map","attributionControl","removeAttribution","off","_findCopyrightBBox","xmlhttp","XMLHttpRequest","onreadystatechange","bind","readyState","status","_parseAttributionBBoxes","JSON","parse","responseText","open","send","json","providers","normal","i","length","boxes","j","box","latLngBounds","on","_attributionProviders","visibleProviders","zoom","getZoom","visibleBounds","getBounds","minLevel","maxLevel","intersects","attributions","provider","alt","label","attributionText","addAttribution","tileLayer","here","opts","SVGIcon","DivIcon","point","_options","iconSize","circleAnchor","Number","x","circleColor","color","circleFillOpacity","opacity","circleOpacity","circleWeight","weight","fillColor","fontSize","iconAnchor","y","popupAnchor","html","_createSVG","_createCircle","cx","cy","radius","circleRatio","fill","circleFillColor","fillOpacity","stroke","strokeOpacity","strokeWidth","className","concat","_createPathDescription","height","width","margin","_createPath","pathDescription","_createShadow","shadowColor","origin","rotation","shadowAngle","shadowLength","shadowOpacity","blur","shadowBlur","translate","shadowTranslate","circle","text","_createText","shadow","shadowEnable","Math","max","style","fontWeight","lineHeight","coordX","coordY","circleText","textColor","fontColor","replace","fontOpacity","Marker","divIcon","svgIcon","latlng","icon","iconFactory","iconOptions","_latlng","setStyle","_icon","iconBody","children","iconCircle","setAttribute","setOpacity","setIcon","DecidimIcon","ControlsUI","awesomeMap","_this","_classCallCheck","main","layers","position","sortLayers","collapsed","config","collapsedMenu","hideControls","$","getContainer","hide","$loading","onHashtag","_orderHashtags","removeHiddenCategories","key","value","_this2","addTo","addSearchControls","menu","categories","addCategoriesControls","evt","preventDefault","stopPropagation","toggleClass","target","closest","data","updateHashtagLayers","prop","contents","append","window","DecidimAwesome","texts","hashtags","select_deselect_all","_this3","forEach","category","id","name","group","SubGroup","cluster","parent","cat","getCategory","layer","checked","addLayer","removeLayer","_indeterminateParentInput","marker","_this4","show","hashtag","tag","$label","attr","parseInt","items","$parent","_this5","each","_idx","el","$input","find","_this6","_this7","removeHiddenComponents","uid","total","$subcats","numChecked","_hashtag","$div","$last","prev","localeCompare","before","Controller","component","templateId","controls","getLabel","onFinished","allNodes","mergeComponents","type","Fetcher","fetcher","_onFinished","onCollection","collection","edges","collectionEdges","filter","item","node","coordinates","latitude","longitude","state","addLayers","console","error","addMarkerCategory","addMarkerHashtags","addOverlay","dom","document","createElement","innerHTML","templates","render","pop","maxwidth","minWidth","keepInView","setLatLng","getLatLng","setContent","showCategory","message","addHashtagsControls","updateStats","Builder","ApiFetcher","query","variables","callback","ajax","method","url","contentType","stringify","done","fetch","controller","onNode","after","arguments","undefined","fetchAll","result","element","decorateNode","pageInfo","hasNextPage","endCursor","body","findTranslation","translations","title","collectHashtags","translation","replaceHashtags","appendHtmlHashtags","truncate","removeHashtags","link","lang","querySelector","getAttribute","txt","locale","tags","gids","match","gid","parts","fromSelector","charAt","substr","getComputedStyle","documentElement","getPropertyValue","ProposalsFetcher","_Fetcher","_callSuper","_inherits","ProposalIcon","strokeOpcacity","ProposalsController","_Controller","amendments","setFetcher","_get","_getPrototypeOf","proposal","createIcon","amendment","emendation","addMarker","iterableAmendments","Object","entries","removeFrom","MeetingsFetcher","MeetingIcon","MeetingsController","meeting","AwesomeMap","center","meetings","withdrawn","accepted","evaluating","notAnswered","rejected","components","controllers","loading","_firstController","autoResize","attach","_getController","loadNodes","bounds","setView","isValid","fitBounds","getNorth","getEast","getSouth","getWest","padding","defaultCat","ct","addControls","string","lat","parseFloat","lng","sanitizeCenter","loadControllers","chop","start","fn","isNumeric","o","defaults","self","noBreaks","replaceWith","excess","stripTags","words","truncated","slice","keepFirstWord","exec","get","reverse","$el","remove","nodeType","finishBlock","splitText","ellipsis","Infinity","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","O","chunkIds","priority","notFulfilled","fulfilled","keys","every","splice","r","obj","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}