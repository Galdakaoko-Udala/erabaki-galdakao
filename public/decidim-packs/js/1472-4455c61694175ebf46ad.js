(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1472],{135:function(t,e,n){"use strict";n(92087),n(84633),n(35666),n(62172),n(85392);var r=n(23972),o=n.n(r);n(39281),n(24597),n(47957),n(96524),n(19976),n(74210);var i=n(78265),a=n(73935),c=function(t){var e=document.querySelector(".layout-nav");t.preventDefault(),e.classList.toggle("is-nav-open")};var l=n(64112);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===u(i)?i:String(i)),r)}var o,i}function f(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var p=f((function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),$(e).length>0&&(0,l.Z)(e,n)[0].addEventListener("sortupdate",(function(t){var e=$(t.target).children();n.onSortUpdate&&n.onSortUpdate(e)}))}));function d(t,e){return new p(t,e)}var h=n(85212),m=n(71369),v=n(67925),b=n(9669),y=n.n(b),S=n(43129),g=n(45697),w=n.n(g);function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==_(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===_(i)?i:String(i)),r)}var o,i}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function P(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=C(t);if(e){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"===_(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}function C(t){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C(t)}var j=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(a,t);var e,n,r,o=P(a);function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=o.call(this,t)).minCharactersToSearch=3,e.handleChange=function(t){e.setState({selectedOption:t}),e.props.changeURL&&y().get(e.props.changeURL,{headers:{Accept:"text/javascript"},withCredentials:!0,params:{id:t.value}}).then((function(t){var e=document.createElement("script");e.type="text/javascript",e.innerHTML=t.data,document.getElementsByTagName("head")[0].appendChild(e)})).catch((function(t){y().isCancel(t)}))},e.filterOptions=function(t,e,n){return t},e.onInputChange=function(t){t.length<e.minCharactersToSearch?e.setState({noResultsText:e.props.searchPromptText}):e.setState({noResultsText:e.props.noResultsText})},e.loadOptions=function(t,n){var r=t.toLowerCase();if(e.cancelTokenSource&&e.cancelTokenSource.cancel(),r.length<e.minCharactersToSearch)return n(null,{options:[],complete:!1});e.cancelTokenSource=y().CancelToken.source(),y().get(e.props.searchURL,{cancelToken:e.cancelTokenSource.token,headers:{Accept:"application/json"},withCredentials:!0,params:{term:r}}).then((function(t){return n(null,{options:t.data,complete:!0})})).catch((function(t){if(!y().isCancel(t))return n(t,{options:[],complete:!1})}))},e.state={options:t.options,selectedOption:t.selected,searchPromptText:t.searchPromptText,noResultsText:t.noResultsText},e}return e=a,(n=[{key:"render",value:function(){var t=this.props,e=t.autoload,n=t.name,r=t.placeholder,o=this.state,a=o.selectedOption,c=o.options,l=o.searchPromptText,u=o.noResultsText;return i.createElement("div",{className:"autocomplete-field"},i.createElement(S.e2,{cache:!1,name:n,value:a,options:c,placeholder:r,searchPromptText:l,noResultsText:u,onChange:this.handleChange,onInputChange:this.onInputChange,loadOptions:this.loadOptions,filterOptions:this.filterOptions,autoload:e,removeSelected:!0,escapeClearsValue:!1,onCloseResetsInput:!1}))}}])&&k(e.prototype,n),r&&k(e,r),Object.defineProperty(e,"prototype",{writable:!1}),a}(i.Component);j.defaultProps={autoload:!1},j.propTypes={changeURL:w().string,searchPromptText:w().string,noResultsText:w().string,searchURL:w().string,selected:w().string,options:w().array,autoload:w().bool,name:w().string,placeholder:w().string};var O=j,x=n(77857),E=n(68844);function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==F(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===F(i)?i:String(i)),r)}var o,i}var D="%count%",B={charactersAtLeast:{one:"at least ".concat(D," character"),other:"at least ".concat(D," characters")},charactersLeft:{one:"".concat(D," character left"),other:"".concat(D," characters left")}},L=B,U=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$input=e,this.$target=$(this.$input.data("remaining-characters")),this.minCharacters=parseInt(this.$input.attr("minlength"),10),this.maxCharacters=parseInt(this.$input.attr("maxlength"),10),this.$target.length<1){var n=null;n=this.$input.attr("id")&&this.$input.attr("id").length>0?"".concat(this.$input.attr("id"),"_characters"):"characters_".concat(Math.random().toString(36).substr(2,9)),this.$target=$('<span id="'.concat(n,'" class="form-input-extra-before" />')),this.$input.parent().is(".editor")?this.$input.parent().after(this.$target):this.$input.parent().is(".columns")&&this.$input.parent().parent().is(".row")?this.$input.parent().parent().after(this.$target):this.$input.after(this.$target)}this.$target.length>0&&(this.maxCharacters>0||this.minCharacters>0)&&this.bindEvents()}var e,n,r;return e=t,r=[{key:"configureMessages",value:function(t){L=$.extend(B,t)}}],(n=[{key:"bindEvents",value:function(){var t=this;Quill&&this.$input.parent().is(".editor")&&setTimeout((function(){Quill.find(t.$input.siblings(".editor-container")[0]).on("text-change",(function(){t.updateStatus()}))})),this.$input.on("keyup",(function(){t.updateStatus()})),null!==this.$input.get(0)&&this.$input.get(0).addEventListener("emoji.added",(function(){t.updateStatus()})),this.updateStatus()}},{key:"updateStatus",value:function(){var t=this.$input.val().length,e=[];if(this.minCharacters>0){var n=L.charactersAtLeast.other;1===this.minCharacters&&(n=L.charactersAtLeast.one),e.push(n.replace(D,this.minCharacters))}if(this.maxCharacters>0){var r=this.maxCharacters-t,o=L.charactersLeft.other;1===r&&(o=L.charactersLeft.one),this.$input[0].dispatchEvent(new CustomEvent("characterCounter",{detail:{remaining:r}})),e.push(o.replace(D,r))}this.$target.text(e.join(", "))}}])&&A(e.prototype,n),r&&A(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==I(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===I(i)?i:String(i)),r)}var o,i}$((function(){$("input[type='text'], textarea, .editor>input[type='hidden']").each((function(t,e){var n=$(e);(n.is("[minlength]")||n.is("[maxlength]"))&&function(t){t.data("remaining-characters-counter",new U(t))}(n)}))}));var M=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controllerSelect=e.controllerSelect,this.subformWrapperClass=e.subformWrapperClass,this.globalWrapperSelector=e.globalWrapperSelector,this._bindEvent(),this._runAll()}var e,n,r;return e=t,(n=[{key:"_runAll",value:function(){var t=this;this.controllerSelect.each((function(e,n){t.run(n)}))}},{key:"run",value:function(t){var e=$(t),n=this.subformWrapperClass,r=e.val(),o=e.parents(this.globalWrapperSelector).find(".".concat(n)),i=o.filter("#".concat(n,"-").concat(r));o.find("input,textarea,select").prop("disabled",!0),o.hide(),i.find("input,textarea,select").prop("disabled",!1),i.show()}},{key:"_bindEvent",value:function(){var t=this;this.controllerSelect.on("change",(function(e){t.run(e.target)}))}}])&&R(e.prototype,n),r&&R(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function N(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==W(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==W(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===W(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}window.Decidim=window.Decidim||{},window.Decidim.managedUsersForm=function(){new M({controllerSelect:$("select#impersonate_user_authorization_handler_name"),subformWrapperClass:"authorization-handler",globalWrapperSelector:"form"}).run()},window.Decidim.config=new E.Z,window.Decidim.InputCharacterCounter=U;var q=function(t){window.$(t).each((function(t,e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach((function(e){N(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},window.$(e).data("autocomplete"));a.render(i.createElement(O,n),e)}))};function H(t){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},H(t)}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==H(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===H(i)?i:String(i)),r)}var o,i}$((function(){var t;window.theDataPicker=new v.Z($(".data-picker")),$(document).foundation(),(t=document.querySelector(".menu-trigger"))&&t.addEventListener("click",c),q('[data-plugin="autocomplete"]'),d("#steps tbody",{placeholder:$('<tr style="border-style: dashed; border-color: #000"><td colspan="4">&nbsp;</td></tr>')[0],onSortUpdate:function(t){var e=$("#steps tbody").data("sort-url"),n=t.map((function(t,e){return $(e).data("id")})).toArray();$.ajax({method:"POST",url:e,contentType:"application/json",data:JSON.stringify({items_ids:n})})}}),(0,m.Z)(),$(".editor-container").each((function(t,e){(0,h.Z)(e)})),$("form.new_filter").each((function(){new x.Z($(this)).mountComponent()}))}));var J=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.controllerSelect=e.controllerSelect,this.subformWrapperClass=e.subformWrapperClass,this.globalWrapperSelector=e.globalWrapperSelector,this._bindEvent(),this._runAll()}var e,n,r;return e=t,(n=[{key:"_runAll",value:function(){var t=this;this.controllerSelect.each((function(e,n){t.run(n)}))}},{key:"run",value:function(t){var e=$(t),n=this.subformWrapperClass,r=e.val(),o=e.parents(this.globalWrapperSelector).find("#".concat(n,"-").concat(r));e.prop("checked")?(o.find("input,textarea,select").prop("disabled",!1),o.show()):(o.find("input,textarea,select").prop("disabled",!0),o.hide())}},{key:"_bindEvent",value:function(){var t=this;this.controllerSelect.on("change",(function(e){t.run(e.target)}))}}])&&Z(e.prototype,n),r&&Z(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();$((function(){new J({controllerSelect:$("input[name$=\\[authorization_handlers\\]\\[\\]]"),subformWrapperClass:"authorization-handler",globalWrapperSelector:"fieldset"}).run()}));n(70003),n(17420),n(49836),n(42394);function Q(t){return Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==Q(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===Q(i)?i:String(i)),r)}var o,i}var G=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ruleCheckboxes=e.ruleCheckboxes,this._runAll()}var e,n,r;return e=t,(n=[{key:"_runAll",value:function(){var t=this;this.ruleCheckboxes.each((function(e,n){t._bindEvent(n),t.run(n)}))}},{key:"_bindEvent",value:function(t){var e=this;$(t).on("change",(function(t){e.run(t.target)}))}},{key:"run",value:function(t){var e=this;this.toggleTextInput(t),$(t).prop("checked")&&this.ruleCheckboxes.filter((function(e,n){return n!==t})).prop("checked",!1).each((function(t,n){e.toggleTextInput(n)}))}},{key:"toggleTextInput",value:function(t){var e=$(t).closest("div");if(!(e.length<1)){var n=e.attr("class").replace(/^vote_rule_/,"vote_").replace(/_enabled_container$/,""),r=$('[class^="'.concat(n,'"][class$="_container"]'));$(t).prop("checked")?r.slideDown():r.slideUp()}}}])&&V(e.prototype,n),r&&V(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==K(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===K(i)?i:String(i)),r)}var o,i}$((function(){new G({ruleCheckboxes:$("input[id^='component_settings_vote_rule_']")}).run(),$(".readonly_container input").click((function(t){return t.preventDefault(),!1}));var t=$("input#component_settings_amendments_enabled");if(t.length>0){var e=$(".amendments_wizard_help_text_container, .amendments_visibility_container, .amendment_creation_enabled_container, .amendment_reaction_enabled_container, .amendment_promotion_enabled_container");t.is(":not(:checked)")&&e.hide(),t.click((function(){e.toggle()}))}}));var Y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listSelector=e.listSelector,this.hideOnFirstSelector=e.hideOnFirstSelector,this.hideOnLastSelector=e.hideOnLastSelector,this.run()}var e,n,r;return e=t,(n=[{key:"run",value:function(){var t=$(this.listSelector),e=this.hideOnFirstSelector,n=this.hideOnLastSelector;if(1===t.length){var r=t.first();r.find(e).hide(),r.find(n).hide()}else t.each((function(r,o){o.id===t.first().attr("id")?($(o).find(e).hide(),$(o).find(n).show()):o.id===t.last().attr("id")?($(o).find(n).hide(),$(o).find(e).show()):($(o).find(n).show(),$(o).find(e).show())}))}}])&&X(e.prototype,n),r&&X(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tt(t){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tt(t)}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==tt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===tt(i)?i:String(i)),r)}var o,i}var nt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listSelector=e.listSelector,this.labelSelector=e.labelSelector,this.onPositionComputed=e.onPositionComputed,this.run()}var e,n,r;return e=t,(n=[{key:"run",value:function(){var t=this;$(this.listSelector).each((function(e,n){var r=$(n).find(t.labelSelector),o=r.html();o.match(/#(\d+)/)?r.html(o.replace(/#(\d+)/,"#".concat(e+1))):r.html("".concat(o," #").concat(e+1)),t.onPositionComputed&&t.onPositionComputed(n,e)}))}}])&&et(e.prototype,n),r&&et(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function rt(t){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rt(t)}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,(o=r.key,i=void 0,i=function(t,e){if("object"!==rt(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(o,"string"),"symbol"===rt(i)?i:String(i)),r)}var o,i}var it=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wrapperSelector=e.wrapperSelector,this.containerSelector=e.containerSelector,this.fieldSelector=e.fieldSelector,this.addFieldButtonSelector=e.addFieldButtonSelector,this.addSeparatorButtonSelector=e.addSeparatorButtonSelector,this.addTitleAndDescriptionButtonSelector=e.addTitleAndDescriptionButtonSelector,this.fieldTemplateSelector=e.fieldTemplateSelector,this.separatorTemplateSelector=e.separatorTemplateSelector,this.TitleAndDescriptionTemplateSelector=e.TitleAndDescriptionTemplateSelector,this.removeFieldButtonSelector=e.removeFieldButtonSelector,this.moveUpFieldButtonSelector=e.moveUpFieldButtonSelector,this.moveDownFieldButtonSelector=e.moveDownFieldButtonSelector,this.onAddField=e.onAddField,this.onRemoveField=e.onRemoveField,this.onMoveUpField=e.onMoveUpField,this.onMoveDownField=e.onMoveDownField,this.placeholderId=e.placeholderId,this.elementCounter=0,this._enableInterpolation(),this._activateFields(),this._bindEvents()}var e,n,r;return e=t,n=[{key:"_enableInterpolation",value:function(){$.fn.replaceAttribute=function(t,e,n){return $(this).find("[".concat(t,"*=").concat(e,"]")).addBack("[".concat(t,"*=").concat(e,"]")).each((function(r,o){$(o).attr(t,$(o).attr(t).replace(e,n))})),this},$.fn.template=function(t,e){var n=$(this).find("template, .decidim-template");n.length>0&&n.html((function(n,r){return $(r).template(t,e)[0].outerHTML}));var r=$(this).find("[data-template]");return r.length>0&&r.each((function(n,r){var o=$(r),i=$(o.data("template")),a=$(i[0].outerHTML),c="".concat(i.attr("id"),"-").concat(e),l="#".concat(c);a.attr("id",c),o.attr("data-template",l).data("template",l),i.after(a),a.html((function(n,r){return $(r).template(t,e)[0].outerHTML}))})),$(this).replaceAttribute("id",t,e),$(this).replaceAttribute("name",t,e),$(this).replaceAttribute("data-tabs-content",t,e),$(this).replaceAttribute("for",t,e),$(this).replaceAttribute("tabs_id",t,e),$(this).replaceAttribute("href",t,e),$(this).replaceAttribute("value",t,e),this}}},{key:"_bindEvents",value:function(){var t=this;$(this.wrapperSelector).on("click",this.addFieldButtonSelector,(function(e){return t._bindSafeEvent(e,(function(){return t._addField(t.fieldTemplateSelector)}))})),this.addSeparatorButtonSelector&&$(this.wrapperSelector).on("click",this.addSeparatorButtonSelector,(function(e){return t._bindSafeEvent(e,(function(){return t._addField(t.separatorTemplateSelector)}))})),this.addTitleAndDescriptionButtonSelector&&$(this.wrapperSelector).on("click",this.addTitleAndDescriptionButtonSelector,(function(e){return t._bindSafeEvent(e,(function(){return t._addField(t.TitleAndDescriptionTemplateSelector)}))})),$(this.wrapperSelector).on("click",this.removeFieldButtonSelector,(function(e){return t._bindSafeEvent(e,(function(e){return t._removeField(e)}))})),this.moveUpFieldButtonSelector&&$(this.wrapperSelector).on("click",this.moveUpFieldButtonSelector,(function(e){return t._bindSafeEvent(e,(function(e){return t._moveUpField(e)}))})),this.moveDownFieldButtonSelector&&$(this.wrapperSelector).on("click",this.moveDownFieldButtonSelector,(function(e){return t._bindSafeEvent(e,(function(e){return t._moveDownField(e)}))}))}},{key:"_bindSafeEvent",value:function(t,e){t.preventDefault(),t.stopPropagation();try{return e(t.target)}catch(n){return console.error(n),n}}},{key:"_addField",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".decidim-template",e=$(this.wrapperSelector),n=e.find(this.containerSelector),r=e.data("template"),o=null;r&&(o=$(r)),(null===o||o.length<1)&&(o=e.children("template, ".concat(t)));var i=$(o.html()).template(this.placeholderId,this._getUID());i.find("ul.tabs").attr("data-tabs",!0);var a=n.find(this.fieldSelector).last();a.length>0?a.after(i):i.appendTo(n),i.foundation(),this.onAddField&&this.onAddField(i)}},{key:"_removeField",value:function(t){var e=$(t).parents(this.fieldSelector);if(e.find("input").filter((function(t,e){return e.name.match(/id/)})).length>0){var n=e.find("input").filter((function(t,e){return e.name.match(/delete/)}));n.length>0&&$(n[0]).val(!0),e.addClass("hidden"),e.hide()}else e.remove();this.onRemoveField&&this.onRemoveField(e)}},{key:"_moveUpField",value:function(t){var e=$(t).parents(this.fieldSelector);e.prev().before(e),this.onMoveUpField&&this.onMoveUpField(e)}},{key:"_moveDownField",value:function(t){var e=$(t).parents(this.fieldSelector);e.next().after(e),this.onMoveDownField&&this.onMoveDownField(e)}},{key:"_activateFields",value:function(){var t=this,e=$(this.wrapperSelector).find(this.containerSelector);e.append(e.find("script")),$(this.fieldSelector).each((function(e,n){$(n).template(t.placeholderId,t._getUID()),$(n).find("ul.tabs").attr("data-tabs",!0)}))}},{key:"_getUID",value:function(){return this.elementCounter+=1,(new Date).getTime()+this.elementCounter}}],n&&ot(e.prototype,n),r&&ot(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();$((function(){[{placeHolderId:"external-domain-id",wrapperSelector:".external-domains",fieldSelector:".external-domain",addFieldSelector:".add-external-domain"}].forEach((function(t){var e,n=t.fieldSelector.replace(".",""),r=new Y({listSelector:"".concat(t.fieldSelector,":not(.hidden)"),hideOnFirstSelector:".move-up-question",hideOnLastSelector:".move-down-question"}),o=new nt({listSelector:"".concat(t.fieldSelector,":not(.hidden)"),labelSelector:".card-title span:first",onPositionComputed:function(t,e){$(t).find("input[name$=\\[position\\]]").val(e)}}),i=function(){d(".external-domains-list:not(.published)",{handle:".external-domain-divider",placeholder:'<div style="border-style: dashed; border-color: #000"></div>',forcePlaceholderSize:!0,onSortUpdate:function(){o.run(),r.run()}})};e={placeholderId:t.placeHolderId,wrapperSelector:t.wrapperSelector,containerSelector:"".concat(t.wrapperSelector,"-list"),fieldSelector:t.fieldSelector,addFieldButtonSelector:t.addFieldSelector,removeFieldButtonSelector:".remove-".concat(n),moveUpFieldButtonSelector:".move-up-question",moveDownFieldButtonSelector:".move-down-question",onAddField:function(){i(),o.run(),r.run()},onRemoveField:function(t){o.run(),r.run(),$("input",t).removeAttr("required")},onMoveUpField:function(){o.run(),r.run()},onMoveDownField:function(){o.run(),r.run()}},new it(e),i(),$(t.fieldSelector).each((function(t,e){!function(t){"true"===t.find("input[name$=\\[deleted\\]]").val()&&(t.addClass("hidden"),t.hide(),$("input",t).removeAttr("required"))}($(e))})),o.run(),r.run()}))}));n(29881);function at(t){return function(t){if(Array.isArray(t))return ct(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}$((function(){var t=$(".draggable-list"),e=[];t.each((function(t,n){e=[].concat(at(e),[".".concat(n.className.split(" ").filter((function(t){return/js-list.*/.test(t)}))[0])])})),document.addEventListener("drag",(function(e){t.not(e.target.parentElement).addClass("dragging")})),document.addEventListener("dragend",(function(){t.removeClass("dragging")})),d(e.join(", "),{handle:"li",forcePlaceholderSize:!0,acceptFrom:".js-connect"})})),$((function(){var t=".js-sortable";$(t).each((function(e,n){d(n.id?"#".concat(n.id):t,{handle:"li",forcePlaceholderSize:!0,placeholderClass:"sort-placeholder"})}))}));n(15947),n(91187),n(33622),n(8347),n(22879),n(50983),n(22621),n(10689),n(70953),n(75903);o().start(),window.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("select.language-change").forEach((function(t){t.addEventListener("change",(function(){var e=t.value,n=t.parentElement.parentElement.nextElementSibling;n.querySelector(".is-active").classList.remove("is-active"),n.querySelector(e).classList.add("is-active")}))}))}))},91187:function(){$((function(){var t=$(".moderation-details"),e=t.find(".toggle-content"),n=t.find(".reported-content"),r=n.find(".current"),o=n.find(".original");o.hide(),e.on("click",(function(){r.toggle(),o.toggle(),r.is(":hidden")?e.html(e.data("see-current-button-label")):e.html(e.data("see-original-button-label"))}))}))},17420:function(){$((function(){var t=$(".form.newsletter_deliver");if(t.length>0){var e=t.find("#send_newsletter_to_all_users"),n=t.find("#send_newsletter_to_followers"),r=t.find("#send_newsletter_to_participants"),o=t.find("#participatory_spaces_for_select"),i=n.find("input[type='checkbox']").prop("checked"),a=r.find("input[type='checkbox']").prop("checked");e.on("change",(function(t){var e=t.target.checked;e?(n.find("input[type='checkbox']").prop("checked",!e),r.find("input[type='checkbox']").prop("checked",!e),o.hide()):(n.find("input[type='checkbox']").prop("checked",!e),r.find("input[type='checkbox']").prop("checked",!e),o.show())})),n.on("change",(function(t){var n=t.target.checked,i=r.find("input[type='checkbox']").prop("checked");n?(e.find("input[type='checkbox']").prop("checked",!n),o.show()):i||(e.find("input[type='checkbox']").prop("checked",!0),o.hide())})),r.on("change",(function(t){var r=t.target.checked,i=n.find("input[type='checkbox']").prop("checked");r?(e.find("input[type='checkbox']").prop("checked",!r),o.show()):i||(e.find("input[type='checkbox']").prop("checked",!0),o.hide())})),i||a?o.show():o.hide(),$(".form .spaces-block-tag").each((function(t,e){var n=$(e).find(".chosen-select");n.change((function(){var t=n.find("option:selected").val();"all"===t?(n.find("option").not(":first").prop("selected",!0),n.find("option[value='all']").prop("selected",!1)):""===t&&n.find("option").not(":first").prop("selected",!1)}))})),t.on("change",(function(){var e=t.serializeJSON().newsletter,n=t.data("recipients-count-newsletter-path"),r=$("#recipients_count_spinner");r.removeClass("hide"),$.get(n,{data:e},(function(t){$("#recipients_count").text(t)})).always((function(){r.addClass("hide")}))}))}}))},10689:function(){$((function(){var t=$("#show-email-modal");if(0!==t.length){var e=$("[data-open=user_email]",t),n=$("#user_email",t),r=$("#user_full_name",t);$("[data-toggle=show-email-modal]").on("click",(function(t){t.preventDefault(),e.show(),e.attr("data-open-url",t.currentTarget.href),r.text($(t.currentTarget).data("full-name")),n.html("")}))}}))},42394:function(){$((function(){var t=$("label[for='component_settings_proposal_edit_time_limited']"),e=$("#component_settings_proposal_edit_time_limited"),n=$("#component_settings_proposal_edit_time_infinite"),r=$(".proposal_edit_before_minutes_container");r.detach().appendTo(t),n.is(":checked")&&r.hide(),e.on("click",(function(){r.show()})),n.on("click",(function(){r.hide()}))}))},49836:function(){$((function(){var t=$("#component_settings_scopes_enabled"),e=$("#component_settings_scope_id");$(".edit_component, .new_component").length>0&&(t.on("change",(function(t){var n=t.target.checked;window.theDataPicker.enabled(e,n)})),window.theDataPicker.enabled(e,t.prop("checked")))}))},74210:function(){$((function(){$("[data-tabs]").on("change.zf.tabs",(function(t){var e=$(t.target).next(".tabs-content .tabs-panel.is-active"),n=e.find(".editor .ql-editor");(n.length>0||(n=e.find("input:first")).length>0)&&n.focus()}))}))},70003:function(){$((function(){var t=$("#welcome-notification-details"),e=$("#organization_send_welcome_notification",t),n=$("#organization_customize_welcome_notification",t),r=function(){e.is(":checked")?$(".send-welcome-notification-details",t).show():$(".send-welcome-notification-details",t).hide(),n.is(":checked")?$(".customize-welcome-notification-details",t).show():$(".customize-welcome-notification-details",t).hide()};$(e).click((function(){return r()})),$(n).click((function(){return r()})),r()}))},42113:function(t,e,n){"use strict";n.d(e,{AP:function(){return i},SB:function(){return l},jC:function(){return o},lO:function(){return c},qA:function(){return a}});var r={};function o(t,e){r[t]=e}var i=function(t){r[t]=null},a=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;window.history&&window.history.pushState(e,null,t)},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;window.history&&window.history.replaceState(e,null,t)},l=function(){return window.history?window.history.state:null};window.onpopstate=function(t){if(t.isTrusted)for(var e in r)r.hasOwnProperty(e)&&r[e](t.state)}},75903:function(){$((function(){var t=$(".slug"),e=t.find("input"),n=t.find("span.slug-url-value");e.on("keyup",(function(t){n.html(t.target.value)}))}))}}]);
//# sourceMappingURL=1472-4455c61694175ebf46ad.js.map